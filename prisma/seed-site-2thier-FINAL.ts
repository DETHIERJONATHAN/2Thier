import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('üöÄ SEED COMPLET - Site Vitrine 2Thier Energy\n');

  // üßπ NETTOYAGE (si le site existe d√©j√†)
  console.log('üßπ Nettoyage...');
  const existingSite = await prisma.webSite.findFirst({
    where: {
      organizationId: '1757366075154-i554z93kl',
      siteName: '2Thier Energy'
    }
  });
  
  if (existingSite) {
    await prisma.webSite.delete({ where: { id: existingSite.id } });
    console.log('‚úÖ Site existant supprim√©\n');
  }

  // 1Ô∏è‚É£ CR√âATION DU SITE
  console.log('1Ô∏è‚É£ Cr√©ation du site "2Thier Energy"...');
  const website = await prisma.webSite.create({
    data: {
      organizationId: '1757366075154-i554z93kl',
      siteName: '2Thier Energy',
      siteType: 'vitrine',
      slug: 'site-vitrine-2thier',
      domain: '2thier.be',
      isActive: true,
      isPublished: true,
      maintenanceMode: false
    },
  });
  console.log(`‚úÖ Site cr√©√© - ID: ${website.id}\n`);

  // 2Ô∏è‚É£ CONFIGURATION DU SITE
  console.log('2Ô∏è‚É£ Configuration du site...');
  await prisma.webSiteConfig.create({
    data: {
      websiteId: website.id,
      primaryColor: '#10b981',
      secondaryColor: '#059669',
      phone: '071/XX.XX.XX',
      email: 'info@2thier.be',
      address: 'Rue de l\'√ânergie',
      city: 'Charleroi',
      postalCode: '6000',
      country: 'Belgique',
      heroTitle: 'Votre Partenaire en Transition √ânerg√©tique',
      heroSubtitle: 'Solutions photovolta√Øques, batteries, bornes de recharge et pompes √† chaleur',
      heroCtaPrimary: 'Demander un Devis',
      heroCtaSecondary: 'Nos R√©alisations',
      metaTitle: '2Thier Energy - Votre Partenaire en Transition √ânerg√©tique',
      metaDescription: 'Sp√©cialiste en photovolta√Øque, batteries, bornes de recharge et pompes √† chaleur en Belgique.',
      stats: {
        installations: '500+',
        power: '2.5 MW',
        satisfaction: '98%',
        regions: '15'
      },
      socialLinks: {
        facebook: 'https://facebook.com/2thier',
        linkedin: 'https://linkedin.com/company/2thier',
        instagram: 'https://instagram.com/2thier'
      }
    }
  });
  console.log('‚úÖ Configuration cr√©√©e\n');

  // 3Ô∏è‚É£ TH√àME
  console.log('3Ô∏è‚É£ Cr√©ation du th√®me...');
  await prisma.webSiteTheme.create({
    data: {
      websiteId: website.id,
      name: 'Th√®me 2Thier',
      primaryColor: '#10b981',
      secondaryColor: '#059669',
      accentColor: '#047857',
      textColor: '#1f2937',
      textLightColor: '#6b7280',
      backgroundColor: '#ffffff',
      surfaceColor: '#f9fafb',
      fontTitle: 'Poppins',
      fontText: 'Inter',
      borderRadius: 12,
      shadowLevel: 'medium'
    }
  });
  console.log('‚úÖ Th√®me cr√©√©\n');

  // 4Ô∏è‚É£ SECTIONS
  console.log('4Ô∏è‚É£ Cr√©ation des sections...');
  
  // HEADER
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'header',
      type: 'header',
      name: 'Header',
      displayOrder: 0,
      isActive: true,
      isLocked: true,
      content: {
        logo: {
          text: '‚ö° 2THIER ENERGY',
          color: '#10b981'
        },
        navigation: [
          { label: 'Accueil', url: '#hero' },
          { label: 'Services', url: '#services' },
          { label: 'R√©alisations', url: '#projects' },
          { label: 'T√©moignages', url: '#testimonials' },
          { label: 'Contact', url: '#cta' }
        ],
        ctaButton: {
          text: 'DEVIS GRATUIT',
          url: '/devis',
          variant: 'primary',
          backgroundColor: '#10b981',
          textColor: '#ffffff'
        },
        sticky: true,
        backgroundColor: 'rgba(255, 255, 255, 0.98)',
        shadow: true
      }
    }
  });
  
  // HERO
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'hero',
      type: 'hero',
      name: 'Section Hero',
      displayOrder: 1,
      isActive: true,
      content: {
        title: 'üåû Votre Partenaire en Transition √ânerg√©tique',
        subtitle: 'Photovolta√Øque ‚Ä¢ Batteries ‚Ä¢ Bornes de Recharge ‚Ä¢ Pompes √† Chaleur ‚Ä¢ Isolation ‚Ä¢ Toiture ‚Ä¢ √âlectricit√© ‚Ä¢ Gros ≈íuvre',
        buttons: [
          { text: 'DEMANDER UN DEVIS GRATUIT', url: '/devis', variant: 'primary', icon: 'RocketOutlined' },
          { text: 'NOS R√âALISATIONS', url: '#projects', variant: 'secondary' }
        ],
        badge: '+500 installations r√©alis√©es ‚Ä¢ 4.9/5 de satisfaction',
        backgroundGradient: 'linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)',
        minHeight: '600px'
      }
    }
  });

  // STATS
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'stats',
      type: 'stats',
      name: 'Statistiques',
      displayOrder: 2,
      isActive: true,
      content: {
        stats: [
          { value: '+500', label: 'Installations r√©alis√©es', icon: 'HomeOutlined' },
          { value: '2.5 MW', label: 'Puissance install√©e', icon: 'ThunderboltOutlined' },
          { value: '4.9/5', label: 'Satisfaction client', icon: 'StarFilled' },
          { value: 'Wallonie', label: 'R√©gion couverte', icon: 'EnvironmentOutlined' }
        ],
        backgroundColor: '#f9fafb'
      }
    }
  });

  // SERVICES
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'services',
      type: 'services',
      name: 'Nos Services',
      displayOrder: 3,
      isActive: true,
      content: {
        title: 'üîÜ Nos Solutions √ânerg√©tiques',
        subtitle: 'Un √©cosyst√®me complet pour votre autonomie √©nerg√©tique et votre confort',
        items: [
          {
            icon: 'ThunderboltOutlined',
            title: 'Panneaux Photovolta√Øques',
            description: 'Installation professionnelle de panneaux solaires haute performance pour produire votre propre √©lectricit√© verte.',
            features: ['Panneaux premium', 'Garantie 25 ans', 'Monitoring temps r√©el', 'Maintenance incluse'],
            linkText: 'En savoir plus',
            link: '/services/photovoltaique'
          },
          {
            icon: 'BulbOutlined',
            title: 'Batteries de Stockage',
            description: 'Stockez votre √©nergie solaire pour une autonomie maximale, jour et nuit.',
            features: ['Stockage intelligent', 'Autonomie optimale', 'Compatible EV', 'Gestion app'],
            linkText: 'D√©couvrir',
            link: '/services/batteries'
          },
          {
            icon: 'CarOutlined',
            title: 'Bornes de Recharge',
            description: 'Rechargez votre v√©hicule √©lectrique √† domicile avec nos bornes intelligentes.',
            features: ['Installation rapide', 'Charge ultra-rapide', 'Contr√¥le app', 'Primes disponibles'],
            linkText: 'Voir les bornes',
            link: '/services/bornes'
          },
          {
            icon: 'FireOutlined',
            title: 'Pompes √† Chaleur',
            description: 'Chauffage et climatisation √©conomiques et √©cologiques pour votre habitation.',
            features: ['√âconomies 70%', 'Chauffage + clim', 'Silencieux', 'Primes √©lev√©es'],
            linkText: 'En savoir plus',
            link: '/services/pompes-chaleur'
          },
          {
            icon: 'HomeOutlined',
            title: 'Audit √ânerg√©tique',
            description: 'Analyse compl√®te de votre consommation pour identifier les meilleures √©conomies.',
            features: ['Analyse d√©taill√©e', 'Recommandations', 'ROI calcul√©', 'Rapport complet'],
            linkText: 'Demander un audit',
            link: '/services/audit'
          },
          {
            icon: 'ToolOutlined',
            title: 'Maintenance & SAV',
            description: 'Service apr√®s-vente et maintenance pr√©ventive pour la long√©vit√© de vos installations.',
            features: ['Intervention rapide', 'Pi√®ces d\'origine', 'Contrat maintenance', 'Garantie √©tendue'],
            linkText: 'Nos contrats',
            link: '/services/maintenance'
          },
          {
            icon: 'CloudOutlined',
            title: 'Monitoring & Optimisation',
            description: 'Suivez et optimisez votre production et consommation en temps r√©el.',
            features: ['App mobile', 'Alertes instantan√©es', 'Rapports d√©taill√©s', 'IA pr√©dictive'],
            linkText: 'D√©couvrir l\'app',
            link: '/services/monitoring'
          }
        ],
        layout: {
          grid: {
            columns: { mobile: 1, tablet: 2, desktop: 4 },
            gap: '24px'
          },
          cardStyle: 'elevated'
        }
      }
    }
  });

  // VALUES (POURQUOI 2THIER)
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'values',
      type: 'values',
      name: 'Pourquoi nous choisir',
      displayOrder: 4,
      isActive: true,
      content: {
        title: 'üíö Pourquoi Choisir 2Thier ?',
        subtitle: 'Les raisons de nous faire confiance',
        items: [
          {
            icon: 'SafetyCertificateOutlined',
            title: 'Expertise Certifi√©e',
            description: 'Techniciens qualifi√©s avec certifications reconnues et formations continues'
          },
          {
            icon: 'StarFilled',
            title: 'Qualit√© Premium',
            description: 'Mat√©riel haut de gamme, garanties longues et normes strictes'
          },
          {
            icon: 'CustomerServiceOutlined',
            title: 'Service Client',
            description: 'Accompagnement personnalis√© de A √† Z, r√©ponse sous 24h'
          },
          {
            icon: 'CheckCircleOutlined',
            title: 'Satisfaction Garantie',
            description: '98% de clients satisfaits et recommandent nos services'
          }
        ],
        style: {
          backgroundColor: '#f9fafb',
          iconColor: '#10b981',
          cardBackground: '#ffffff'
        }
      }
    }
  });

  // PROJECTS (R√âALISATIONS)
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'projects',
      type: 'projects',
      name: 'Nos R√©alisations',
      displayOrder: 5,
      isActive: true,
      content: {
        title: 'üì∏ Nos Derni√®res R√©alisations',
        subtitle: 'D√©couvrez quelques-uns de nos projets r√©ussis',
        showAllLink: true,
        items: [
          {
            image: '/images/project1.jpg',
            title: 'Installation R√©sidentielle 9 kWc',
            location: 'Charleroi',
            details: 'Installation de 24 panneaux solaires avec batterie de stockage et borne de recharge. Production annuelle estim√©e : 8500 kWh.',
            tags: ['R√©sidentiel', 'Photovolta√Øque', 'Batterie', 'Borne EV'],
            date: 'Ao√ªt 2024'
          },
          {
            image: '/images/project2.jpg',
            title: 'Ferme Solaire 50 kWc',
            location: 'Namur',
            details: 'Projet agricole avec 130 panneaux haute performance. Autoconsommation optimis√©e pour les b√¢timents et √©quipements de la ferme.',
            tags: ['Agricole', 'Photovolta√Øque', 'Grande puissance'],
            date: 'Juillet 2024'
          },
          {
            image: '/images/project3.jpg',
            title: 'Entreprise + Carport Solaire',
            location: 'Li√®ge',
            details: 'Installation commerciale avec carport solaire pour le parking. 80 panneaux + 15 bornes de recharge pour la flotte √©lectrique.',
            tags: ['Commercial', 'Carport', 'Bornes EV', 'Flotte'],
            date: 'Juin 2024'
          },
          {
            image: '/images/project4.jpg',
            title: 'R√©novation √ânerg√©tique Compl√®te',
            location: 'Mons',
            details: 'Projet global : panneaux solaires 12 kWc + pompe √† chaleur air-eau + isolation renforc√©e. √âconomie √©nerg√©tique : 85%.',
            tags: ['R√©novation', 'Photovolta√Øque', 'Pompe √† chaleur', 'Global'],
            date: 'Mai 2024'
          }
        ],
        layout: {
          grid: {
            columns: { mobile: 1, tablet: 2, desktop: 4 },
            gap: '24px'
          }
        },
        style: {
          backgroundColor: '#ffffff',
          tagColor: '#10b981'
        }
      }
    }
  });

  // TESTIMONIALS
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'testimonials',
      type: 'testimonials',
      name: 'T√©moignages',
      displayOrder: 6,
      isActive: true,
      content: {
        title: '‚≠ê Ce Que Nos Clients Disent',
        subtitle: 'La satisfaction de nos clients est notre priorit√©',
        items: [
          {
            customerName: 'Jean Dupont',
            location: 'Charleroi',
            service: 'Photovolta√Øque + Batterie',
            rating: 5,
            text: 'Installation impeccable, √©quipe professionnelle et √† l\'√©coute. Notre facture d\'√©lectricit√© a diminu√© de 80% ! Je recommande vivement.',
            date: 'Ao√ªt 2024'
          },
          {
            customerName: 'Marie Leblanc',
            location: 'Namur',
            service: 'Pompe √† chaleur',
            rating: 5,
            text: 'Tr√®s satisfaite de ma pompe √† chaleur. Confort optimal √©t√© comme hiver, et des √©conomies impressionnantes. Service apr√®s-vente au top !',
            date: 'Juillet 2024'
          },
          {
            customerName: 'Pierre Martin',
            location: 'Li√®ge',
            service: 'Borne de recharge',
            rating: 5,
            text: 'Installation de ma borne en une journ√©e. Application intuitive pour g√©rer la recharge. Plus besoin de chercher des bornes publiques !',
            date: 'Juin 2024'
          },
          {
            customerName: 'Sophie Durant',
            location: 'Mons',
            service: 'Audit √©nerg√©tique',
            rating: 5,
            text: 'L\'audit √©nerg√©tique m\'a permis de comprendre mes d√©penses et de faire les bons choix. Accompagnement excellent du d√©but √† la fin.',
            date: 'Juin 2024'
          }
        ],
        showAverageRating: true,
        averageRating: 4.9,
        totalReviews: 124,
        googleReviewsLink: 'https://google.com/reviews/2thier',
        backgroundColor: '#f9fafb'
      }
    }
  });

  // PROCESS
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'process',
      type: 'process',
      name: 'Notre Processus',
      displayOrder: 7,
      isActive: true,
      content: {
        title: 'üöÄ Votre Projet en 5 √âtapes',
        subtitle: 'Un processus simple et transparent',
        steps: [
          {
            icon: 'PhoneOutlined',
            title: 'Contact',
            description: 'Demande gratuite sous 24h'
          },
          {
            icon: 'SafetyCertificateOutlined',
            title: '√âtude',
            description: 'Visite + analyse de faisabilit√©'
          },
          {
            icon: 'ToolOutlined',
            title: 'Devis',
            description: 'Proposition d√©taill√©e personnalis√©e'
          },
          {
            icon: 'TeamOutlined',
            title: 'Installation',
            description: 'Pose par techniciens certifi√©s'
          },
          {
            icon: 'CheckCircleOutlined',
            title: 'Suivi',
            description: 'SAV & garanties longue dur√©e'
          }
        ],
        style: {
          backgroundColor: '#ffffff',
          iconColor: '#10b981',
          lineColor: '#10b981'
        }
      }
    }
  });

  // CTA FINAL
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'cta-final',
      type: 'cta',
      name: 'Appel √† l\'action final',
      displayOrder: 8,
      isActive: true,
      content: {
        title: 'üåü Pr√™t √† Passer √† l\'√ânergie Verte ?',
        subtitle: 'Demandez votre devis gratuit et sans engagement ‚Ä¢ R√©ponse sous 24h garantie',
        buttons: [
          { text: '071/XX.XX.XX', url: 'tel:071XXXXXX', variant: 'primary', icon: 'PhoneOutlined' },
          { text: 'DEVIS EN LIGNE', url: '/devis', variant: 'secondary', icon: 'MailOutlined' }
        ],
        footer: 'üìç Route de Gosselies 23, 6220 Fleurus (Charleroi)',
        backgroundGradient: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
        textColor: '#ffffff'
      }
    }
  });

  // FOOTER
  await prisma.webSiteSection.create({
    data: {
      websiteId: website.id,
      key: 'footer',
      type: 'footer',
      name: 'Footer',
      displayOrder: 9,
      isActive: true,
      isLocked: true,
      content: {
        brand: {
          name: '2THIER ENERGY',
          tagline: 'Votre partenaire en transition √©nerg√©tique depuis 2020'
        },
        columns: [
          {
            title: 'Solutions',
            links: [
              { label: 'Photovolta√Øque', url: '/services/photovoltaique' },
              { label: 'Batteries', url: '/services/batteries' },
              { label: 'Bornes de Recharge', url: '/services/bornes' },
              { label: 'Pompes √† Chaleur', url: '/services/pompes-chaleur' }
            ]
          },
          {
            title: 'Entreprise',
            links: [
              { label: '√Ä propos', url: '/about' },
              { label: 'R√©alisations', url: '#projects' },
              { label: 'Blog', url: '/blog' },
              { label: 'Contact', url: '#cta' }
            ]
          },
          {
            title: 'Contact',
            links: [
              { label: '071/XX.XX.XX', url: 'tel:071XXXXXX', icon: 'PhoneOutlined' },
              { label: 'info@2thier.be', url: 'mailto:info@2thier.be', icon: 'MailOutlined' },
              { label: 'Lu-Ve: 8h-18h', icon: 'ClockCircleOutlined' }
            ]
          }
        ],
        copyright: '¬© 2025 2Thier Energy - Tous droits r√©serv√©s ‚Ä¢ BE 0XXX.XXX.XXX ‚Ä¢ Agr√©gation Classe 1 ‚Ä¢ RESCERT Certifi√©',
        backgroundColor: '#1f2937',
        textColor: '#ffffff'
      }
    }
  });

  console.log('‚úÖ 10 sections cr√©√©es (header + 8 sections + footer)\n');

  console.log('üéâ SEED TERMIN√â AVEC SUCC√àS !');
  console.log(`\nüìä R√âCAPITULATIF :`);
  console.log(`   - Site : ${website.siteName} (ID: ${website.id})`);
  console.log(`   - Sections : 10 (header + hero + stats + services + values + projects + testimonials + process + cta + footer)`);
  console.log(`   - Config : ‚úÖ`);
  console.log(`   - Th√®me : ‚úÖ`);
  console.log(`\nüåê Acc√®s : http://localhost:5173/site-vitrine-2thier\n`);
}

main()
  .catch((e) => {
    console.error('‚ùå ERREUR:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
