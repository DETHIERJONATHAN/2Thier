<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <!-- ðŸ“± META VIEWPORT OPTIMISÃ‰ POUR MOBILE -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <title>2Thier CRM - Gestion de Formulaires</title>
    <!-- ðŸ”§ Configuration d'environnement runtime INLINE (AVANT tout code) -->
    <script>
      (function() {
        // DÃ©terminer si c'est production ou dÃ©veloppement
        // Liste des domaines de production (URLs relatives = mÃªme serveur pour API)
        const productionDomains = [
          '2thier.be',
          'devis1min.be',
          'railway.app',      // Railway deployments
          'up.railway.app'    // Railway preview URLs
        ];
        
        const hostname = window.location.hostname;
        const isProduction = productionDomains.some(domain => hostname.includes(domain));
        const isDev = !isProduction && hostname !== '127.0.0.1';
        
        // En production: URLs relatives (mÃªme domaine = API sur le mÃªme serveur)
        // En dÃ©veloppement local: localhost:4000
        const apiBaseUrl = isProduction ? '' : (isDev ? 'http://localhost:4000' : '');
        
        // Injecter les configurations globales IMMÃ‰DIATEMENT
        window.__API_BASE_URL = apiBaseUrl;
        window.__BACKEND_URL = apiBaseUrl;
        
        console.log('[ENV-CONFIG] API Base URL:', apiBaseUrl || '(relative - same origin)');
        console.log('[ENV-CONFIG] Host:', hostname);
        console.log('[ENV-CONFIG] Mode:', isProduction ? 'PRODUCTION' : 'DEVELOPMENT');
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
