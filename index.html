<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <!-- ðŸ“± META VIEWPORT OPTIMISÃ‰ POUR MOBILE -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <title>2Thier CRM - Gestion de Formulaires</title>
    <!-- ðŸ”§ Configuration d'environnement runtime INLINE (AVANT tout code) -->
    <script>
      (function() {
        // DÃ©terminer si c'est production ou dÃ©veloppement
        // Liste des domaines qui utilisent URLs relatives (proxy ou mÃªme serveur pour API)
        const relativeUrlDomains = [
          '2thier.be',
          'devis1min.be',
          'railway.app',      // Railway deployments
          'up.railway.app',   // Railway preview URLs
          'github.dev',       // GitHub Codespaces (proxy Vite)
          'codespaces.new'    // GitHub Codespaces alternate
        ];
        
        const hostname = window.location.hostname;
        const useRelativeUrls = relativeUrlDomains.some(domain => hostname.includes(domain));
        
        // URLs relatives si production OU Codespace (le proxy Vite gÃ¨re le forwarding)
        // localhost:4000 uniquement si vraiment en local (127.0.0.1 ou localhost)
        const apiBaseUrl = useRelativeUrls ? '' : (hostname === 'localhost' || hostname === '127.0.0.1' ? 'http://localhost:4000' : '');
        
        // Injecter les configurations globales IMMÃ‰DIATEMENT
        window.__API_BASE_URL = apiBaseUrl;
        window.__BACKEND_URL = apiBaseUrl;
        
        console.log('[ENV-CONFIG] API Base URL:', apiBaseUrl || '(relative - using proxy)');
        console.log('[ENV-CONFIG] Host:', hostname);
        console.log('[ENV-CONFIG] Mode:', useRelativeUrls ? 'PROXY/PRODUCTION' : 'LOCAL DEV');
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
