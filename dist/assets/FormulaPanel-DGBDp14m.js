import{j as e}from"./index-C0S0DpaX.js";import{r}from"./react-vendor-Al_k-ZB6.js";import{T as n}from"./TokenDropZone-DC6IWn53.js";import{T as a}from"./TokenChip-CxHEbEuw.js";import{u as t}from"./useAuthenticatedApi-BbQI8SDU.js";import{N as s}from"./NodeTreeSelector-BPMc5QXk.js";import{s as i,a as o,T as l,an as c,B as m,I as u,$ as d,a7 as p,aC as b,a0 as f}from"./antd-vendor-zFcGztvE.js";import"./dnd-vendor-D0spq1w0.js";const{Title:h,Text:v}=l,N=({nodeId:l,onChange:N,readOnly:D})=>{const{api:C}=(()=>{const e=t(),n=r.useRef(new Map),a=r.useRef(!1),s=r.useRef(new Map),i=r.useCallback((e,r,n)=>`${e}:${r}:${n?JSON.stringify(n):""}`,[]),o=r.useCallback(e=>Date.now()-e<5e3,[]),l=r.useCallback(async(r,t,l)=>{const c=i(r,t,l);if("get"===r){const e=s.current.get(c);if(e&&o(e.timestamp))return e.data}const m=n.current.get(c);if(m)return m;a.current=!0;const u=(async()=>{try{let n;switch(r){case"get":n=await e.api.get(t);break;case"post":n=await e.api.post(t,l);break;case"put":n=await e.api.put(t,l);break;case"delete":n=await e.api.delete(t);break;default:throw new Error(`M√©thode non support√©e: ${r}`)}if("get"===r&&n&&s.current.set(c,{data:n,timestamp:Date.now()}),"get"!==r){const e=t.split("?")[0];for(const[r]of s.current.entries())r.startsWith("get:")&&r.includes(e)&&s.current.delete(r)}return n}catch(i){throw i}finally{n.current.delete(c),a.current=!1}})();return n.current.set(c,u),u},[e.api,i,o]),c=r.useMemo(()=>({get:e=>l("get",e),post:(e,r)=>l("post",e,r),put:(e,r)=>l("put",e,r),delete:e=>l("delete",e)}),[l]),m=r.useCallback(()=>{s.current.clear(),n.current.clear()},[]);return{api:c,isLoading:a.current,clearCache:m}})(),x=r.useRef(!0),E=r.useRef(),P=r.useRef(""),V=r.useRef(""),[k,S]=r.useState([]),[w,T]=r.useState(""),[j,A]=r.useState(!1),[g,O]=r.useState(!1),[B,R]=r.useState(!1),[F,y]=r.useState({}),[M,L]=r.useState(!1),[U,z]=r.useState(""),[$,I]=r.useState(!1),[W,J]=r.useState(""),[q,Z]=r.useState({}),[_,G]=r.useState(""),[H,K]=r.useState(""),[Q,X]=r.useState(!1),[Y,ee]=r.useState(null),[re,ne]=r.useState([]),[ae,te]=r.useState(null);r.useEffect(()=>(x.current=!0,()=>{x.current=!1}),[]),r.useEffect(()=>{if(!l||!C)return;(async()=>{try{const e=(await C.get(`/api/treebranchleaf/nodes/${l}/formulas`)).formulas||[];if(e.length>0){ne(e);const r=e[0];te(r.id),S(r.tokens||[]),T(r.name||""),P.current=JSON.stringify(r.tokens||[]),V.current=r.name||""}else ne([]),te(null),S([]),T("")}catch(e){ne([]),te(null),S([]),T("")}})()},[l,C]);const se=r.useCallback(async(e,r)=>{if(!x.current||j)return;const n=JSON.stringify(e);if(n===P.current&&r===V.current)return;A(!0);const a=setTimeout(async()=>{if(x.current)try{let a=null;const t=r&&r.trim().length>0?r.trim():"Formule";ae?(await C.put(`/api/treebranchleaf/nodes/${l}/formulas/${ae}`,{tokens:e,name:t}),ne(r=>r.map(r=>r.id===ae?{...r,tokens:e,name:t}:r))):(a=await C.post(`/api/treebranchleaf/nodes/${l}/formulas`,{tokens:e,name:t}),(null==a?void 0:a.id)&&(te(a.id),ne(r=>[...r,{id:a.id,name:t,tokens:e}]))),P.current=n,V.current=t,x.current&&(null==N||N({tokens:e,name:t}))}catch(a){x.current&&i.error("Erreur de sauvegarde de la formule")}finally{x.current&&A(!1)}},300);E.current=a},[C,l,ae,N,j]),ie=r.useCallback(e=>{x.current&&(S(e),se(e,w))},[se,w]),oe=r.useCallback(e=>{x.current&&(T(e),se(k,e))},[se,k]),le=r.useMemo(()=>"Glissez ici des r√©f√©rences (@value.*, @key, #marker)‚Ä¶",[]),ce=r.useCallback(e=>{const r=e.ref;ie([...k,r])},[k,ie]),me=r.useCallback(e=>{ie([...k,e])},[k,ie]),ue=r.useCallback(()=>{(null==k?void 0:k.length)&&ie(k.slice(0,-1))},[k,ie]),de=r.useCallback(()=>{ie([])},[ie]),pe=r.useCallback(()=>{ae&&!g&&(ee(ae),X(!0))},[ae,g]),be=r.useCallback(async()=>{if(Y){O(!0),X(!1);try{await C.delete(`/api/treebranchleaf/nodes/${l}/formulas/${Y}`);const e=re.filter(e=>e.id!==Y);ne(e);const r=e[0]||null;te(r?r.id:null),r?(S(r.tokens||[]),T(r.name||""),P.current=JSON.stringify(r.tokens||[]),V.current=r.name||""):(S([]),T(""),P.current="[]",V.current=""),null==N||N({tokens:(null==r?void 0:r.tokens)||[],name:(null==r?void 0:r.name)||""}),i.success("Formule supprim√©e")}catch(e){i.error("Impossible de supprimer la formule")}finally{O(!1),ee(null)}}},[C,l,Y,re,N]),fe=r.useCallback(()=>{X(!1),ee(null)},[]),he=r.useCallback(e=>{if(e&&"string"==typeof e)return e.startsWith("@value.")?e.slice(7):e.startsWith("@select.")?e.slice(8).split(".")[0]:void 0},[]),ve=r.useCallback(async e=>{if(e&&!F[e])try{const r=await C.get(`/api/treebranchleaf/nodes/${e}`);if(!r)return;y(n=>({...n,[e]:{label:r.label||e,type:r.type||"leaf_field"}}))}catch{}},[C,F]);return r.useEffect(()=>{k.map(he).filter(Boolean).forEach(ve)},[k,he,ve]),e.jsxDEV(o,{size:"small",variant:"outlined",children:[e.jsxDEV(h,{level:5,children:"üßÆ Formule"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:318,columnNumber:7},void 0),e.jsxDEV("div",{style:{marginBottom:8,padding:4,background:"#f0f0f0",fontSize:"11px",borderRadius:4},children:e.jsxDEV(v,{type:"secondary",children:["Debug: activeId=",ae||"null"," | instances=",re.length]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:322,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:321,columnNumber:7},void 0),e.jsxDEV("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsxDEV(v,{type:"secondary",children:"Instance:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:329,columnNumber:9},void 0),e.jsxDEV(c,{size:"small",style:{minWidth:220},value:ae||void 0,options:re.map(e=>({value:e.id,label:`${e.name||"Sans nom"} (${(e.tokens||[]).length} √©l√©ments)`})),onChange:e=>{te(e);const r=re.find(r=>r.id===e);r&&(S(r.tokens||[]),T(r.name||""),P.current=JSON.stringify(r.tokens||[]),V.current=r.name||"")},placeholder:0===re.length?"Aucune formule disponible":"S√©lectionner une instance",notFoundContent:"Aucune formule trouv√©e",allowClear:!1},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:330,columnNumber:9},void 0),e.jsxDEV(m,{size:"small",onClick:async()=>{try{const e=await C.post(`/api/treebranchleaf/nodes/${l}/formulas`,{name:"Nouvelle formule",tokens:[],description:"Nouvelle formule",isDefault:0===re.length,order:re.length+1}),r=[...re,e];ne(r),te(e.id),S([]),T(e.name||""),P.current="[]",V.current=e.name||"",i.success("Nouvelle formule cr√©√©e")}catch(e){i.error("Impossible de cr√©er une nouvelle formule")}},children:"Ajouter"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:355,columnNumber:9},void 0),e.jsxDEV(m,{size:"small",danger:!0,onClick:pe,disabled:!ae||g,loading:g,children:"Supprimer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:383,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:328,columnNumber:7},void 0),e.jsxDEV("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsxDEV(v,{type:"secondary",children:"Nom:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:396,columnNumber:9},void 0),e.jsxDEV(u,{size:"small",style:{maxWidth:280},placeholder:"Nom de la formule",value:w,onChange:e=>oe(e.target.value)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:397,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:395,columnNumber:7},void 0),e.jsxDEV("div",{style:{marginBottom:8,padding:"6px 8px",background:"#fafafa",border:"1px solid #f0f0f0",borderRadius:6},children:[e.jsxDEV(v,{strong:!0,style:{marginRight:8},children:"R√©sum√© test:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:408,columnNumber:9},void 0),e.jsxDEV(d,{wrap:!0,size:6,children:[e.jsxDEV(v,{type:"secondary",children:["√âl√©ments (",(null==k?void 0:k.length)||0,"):"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:410,columnNumber:11},void 0),k.map((r,n)=>e.jsxDEV(a,{token:r},`${r}-${n}`,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:412,columnNumber:13},void 0))]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:409,columnNumber:9},void 0),e.jsxDEV("div",{style:{marginTop:8},children:e.jsxDEV(d,{direction:"vertical",style:{width:"100%"},size:8,children:[e.jsxDEV(d,{wrap:!0,children:Array.from(new Set(k.map(he).filter(Boolean))).map(r=>e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsxDEV(a,{token:`@value.${r}`},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:422,columnNumber:19},void 0),e.jsxDEV(u,{size:"small",placeholder:"Valeur de test",style:{width:180},value:q[r]||"",onChange:e=>Z(n=>({...n,[r]:e.target.value}))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:423,columnNumber:19},void 0)]},r,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:421,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:419,columnNumber:13},void 0),e.jsxDEV(m,{size:"small",type:"primary",onClick:()=>{try{K("");const e=k.map(e=>{if("CONCAT"===e)return"+";if(["+","-","*","/","(",")"].includes(e))return e;if(/^".*"$/.test(e))return e;if(/^[-+]?[0-9]*\.?[0-9]+$/.test(e))return e;if(e.startsWith("@value.")){const r=e.slice(7),n=(q[r]??"").trim(),a=Number(n.replace(",","."));return Number.isFinite(a)?String(a):JSON.stringify(n)}if(e.startsWith("@select.")){const r=e.slice(8).split(".")[0],n=q[r]??"";return JSON.stringify(n)}return JSON.stringify(e)}).join(" "),r=new Function(`return (${e});`)();G(String(r))}catch(e){G("");const r=(e=>!!e&&"object"==typeof e&&"message"in e)(e)?String(e.message):"Erreur pendant l'√©valuation";K(r)}},children:"√âvaluer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:434,columnNumber:13},void 0),H?e.jsxDEV(v,{type:"danger",children:["Erreur: ",H]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:470,columnNumber:15},void 0):e.jsxDEV(v,{children:["R√©sultat: ",_||"(vide)"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:472,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:418,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:417,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:407,columnNumber:7},void 0),e.jsxDEV(v,{type:"secondary",style:{display:"block",marginBottom:8},children:"Construisez votre formule √©tape par √©tape: s√©lectionnez un champ, ajoutez un op√©rateur, puis un autre champ, etc."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:479,columnNumber:7},void 0),e.jsxDEV("div",{style:{marginBottom:8},children:e.jsxDEV(d,{wrap:!0,size:6,children:[e.jsxDEV(p,{title:"Addition",children:e.jsxDEV(m,{size:"small",onClick:()=>me("+"),children:"+"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:485,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:485,columnNumber:11},void 0),e.jsxDEV(p,{title:"Soustraction",children:e.jsxDEV(m,{size:"small",onClick:()=>me("-"),children:"-"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:486,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:486,columnNumber:11},void 0),e.jsxDEV(p,{title:"Multiplication",children:e.jsxDEV(m,{size:"small",onClick:()=>me("*"),children:"*"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:487,columnNumber:43},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:487,columnNumber:11},void 0),e.jsxDEV(p,{title:"Division",children:e.jsxDEV(m,{size:"small",onClick:()=>me("/"),children:"/"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:488,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:488,columnNumber:11},void 0),e.jsxDEV(p,{title:"Parenth√®se ouvrante",children:e.jsxDEV(m,{size:"small",onClick:()=>me("("),children:"("},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:489,columnNumber:48},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:489,columnNumber:11},void 0),e.jsxDEV(p,{title:"Parenth√®se fermante",children:e.jsxDEV(m,{size:"small",onClick:()=>me(")"),children:")"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:490,columnNumber:48},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:490,columnNumber:11},void 0),e.jsxDEV(p,{title:"Concat√©nation de texte",children:e.jsxDEV(m,{size:"small",onClick:()=>me("CONCAT"),children:"CONCAT"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:491,columnNumber:51},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:491,columnNumber:11},void 0),e.jsxDEV(b,{type:"vertical"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:492,columnNumber:11},void 0),e.jsxDEV(p,{title:"Ajouter un nombre",children:e.jsxDEV(m,{size:"small",onClick:()=>{z(""),L(!0)},children:"Nombre‚Ä¶"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:493,columnNumber:46},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:493,columnNumber:11},void 0),e.jsxDEV(p,{title:"Ajouter un texte",children:e.jsxDEV(m,{size:"small",onClick:()=>{J(""),I(!0)},children:"Texte‚Ä¶"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:494,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:494,columnNumber:11},void 0),e.jsxDEV(b,{type:"vertical"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:495,columnNumber:11},void 0),e.jsxDEV(p,{title:"Supprimer le dernier √©l√©ment",children:e.jsxDEV(m,{size:"small",danger:!0,disabled:!(null==k?void 0:k.length),onClick:ue,children:"‚ü≤ Annuler dernier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:496,columnNumber:57},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:496,columnNumber:11},void 0),e.jsxDEV(p,{title:"Vider la formule",children:e.jsxDEV(m,{size:"small",danger:!0,disabled:!(null==k?void 0:k.length),onClick:de,children:"üóëÔ∏è Vider"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:497,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:497,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:484,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:483,columnNumber:7},void 0),e.jsxDEV(d,{style:{marginBottom:8},children:e.jsxDEV(m,{size:"small",onClick:()=>R(!0),disabled:D,children:"S√©lectionner‚Ä¶"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:502,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:501,columnNumber:7},void 0),e.jsxDEV(f,{title:"Ajouter un nombre",open:M,onCancel:()=>L(!1),onOk:()=>{const e=U.trim();if(!e)return L(!1);/^[-+]?[0-9]*\.?[0-9]+$/.test(e)?(me(e),L(!1)):i.error("Entrez un nombre valide")},okText:"Ajouter",children:e.jsxDEV(u,{placeholder:"Ex: 10, 3.14",value:U,onChange:e=>z(e.target.value),inputMode:"decimal"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:524,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:508,columnNumber:7},void 0),e.jsxDEV(f,{title:"Ajouter un texte",open:$,onCancel:()=>I(!1),onOk:()=>{const e='"'+W.replace(/"/g,'\\"')+'"';me(e),I(!1)},okText:"Ajouter",children:e.jsxDEV(u,{placeholder:"Ex: TVA",value:W,onChange:e=>J(e.target.value)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:544,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:532,columnNumber:7},void 0),e.jsxDEV(n,{nodeId:l,capability:"formula",label:"R√©f√©rences utilis√©es",placeholder:le,value:k,onChange:ie,readOnly:D},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:551,columnNumber:7},void 0),e.jsxDEV(v,{type:"secondary",style:{fontSize:12},children:"‚úÖ Stockage uniquement dans TreeBranchLeafNodeFormula - Sauvegarde automatique activ√©e."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:561,columnNumber:7},void 0),e.jsxDEV(s,{nodeId:l,open:B,onClose:()=>R(!1),onSelect:ce},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:565,columnNumber:7},void 0),e.jsxDEV(f,{title:"Supprimer la formule ?",open:Q,onOk:be,onCancel:fe,okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0,loading:g},cancelButtonProps:{disabled:g},children:[e.jsxDEV(v,{children:"Cette action supprime d√©finitivement la formule de la table TreeBranchLeafNodeFormula."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:582,columnNumber:9},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:583,columnNumber:9},void 0),e.jsxDEV(v,{type:"secondary",children:"Cette action est irr√©versible."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:584,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:572,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/capabilities/FormulaPanel.tsx",lineNumber:317,columnNumber:5},void 0)};export{N as default};
