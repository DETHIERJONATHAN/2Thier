import{j as e}from"./index-C0S0DpaX.js";import{r as s}from"./react-vendor-Al_k-ZB6.js";import{u as i}from"./useAuthenticatedApi-BbQI8SDU.js";import{F as r,s as a,T as t,bY as l,af as m,ag as n,a as c,aj as u,b2 as d,b_ as o,al as p,B as v,q as h,an as N,I as D,$ as g,aW as b,ba as x,aG as C,a8 as k,ab as V,P as E,a7 as M,R as f,aH as P,a0 as S,b as A}from"./antd-vendor-zFcGztvE.js";const{Title:O,Text:j}=t,{Option:U}=N,R=({lead:s,open:i,onCancel:r,onConfirm:a,loading:t})=>s?e.jsxDEV(S,{title:e.jsxDEV(g,{children:[e.jsxDEV(l,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:128,columnNumber:11},void 0),"Confirmer l'achat du lead"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:127,columnNumber:9},void 0),open:i,onCancel:r,footer:[e.jsxDEV(v,{onClick:r,children:"Annuler"},"cancel",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:135,columnNumber:9},void 0),e.jsxDEV(v,{type:"primary",loading:t,onClick:()=>a(s.id),icon:e.jsxDEV(o,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:143,columnNumber:17},void 0),children:["Acheter pour ",s.price," crédits"]},"confirm",!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:138,columnNumber:9},void 0)],width:600,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(A,{message:"Aperçu du lead",description:e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Titre :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:155,columnNumber:18},void 0)," ",s.title]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:155,columnNumber:15},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Description :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:156,columnNumber:18},void 0)," ",s.description]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:156,columnNumber:15},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Localisation :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:157,columnNumber:18},void 0)," ",s.postalCode]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:157,columnNumber:15},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Valeur estimée :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:158,columnNumber:18},void 0)," ",s.estimatedValue,"€"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:158,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:154,columnNumber:13},void 0),type:"info",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:151,columnNumber:9},void 0),e.jsxDEV(m,{gutter:16,children:[e.jsxDEV(n,{span:12,children:e.jsxDEV(u,{title:"Prix d'achat",value:s.price,suffix:"crédits",valueStyle:{color:"#cf1322"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:167,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:166,columnNumber:11},void 0),e.jsxDEV(n,{span:12,children:e.jsxDEV(u,{title:"Autres acheteurs",value:`${s.purchaseCount}/${s.maxPurchases}`,valueStyle:{color:s.purchaseCount>=s.maxPurchases?"#cf1322":"#3f8600"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:175,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:174,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:165,columnNumber:9},void 0),s.tags.length>0&&e.jsxDEV("div",{children:[e.jsxDEV(j,{strong:!0,children:"Tags :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:185,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-1",children:s.tags.map(s=>e.jsxDEV(V,{color:"blue",className:"mb-1",children:s},s,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:188,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:186,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:184,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:150,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:125,columnNumber:5},void 0):null,y=e=>{const s=`${e.lead.firstName} ${e.lead.lastName}`.trim();return{id:e.id,title:s||e.lead.company||"Lead sans nom",description:`Lead de ${e.lead.company||"entreprise non spécifiée"} - ${e.lead.email}`,price:e.price,category:e.targetSectors[0]||"Non spécifié",postalCode:e.targetRegions[0]||"N/A",urgency:e.urgencyScore>=7?"high":e.urgencyScore>=4?"medium":"low",publishedAt:e.publishedAt,purchaseCount:e.currentPartners,maxPurchases:e.maxPartners,isAvailable:"AVAILABLE"===e.status,tags:e.targetSectors,estimatedValue:Math.round(3.5*e.price)}};function w(){const{api:t}=i(),[S,A]=s.useState([]),[w,I]=s.useState({totalLeads:0,availableLeads:0,avgPrice:0,newToday:0}),[L,$]=s.useState(!0),[T,z]=s.useState(!1),[F,q]=s.useState(null),[B,J]=s.useState(!1),[G,H]=s.useState([]),[K,Q]=s.useState({category:void 0,minPrice:void 0,maxPrice:void 0,postalCode:"",urgency:void 0,newOnly:!1,availableOnly:!0}),[W]=r.useForm(),Y=s.useCallback(async()=>{try{const e=new URLSearchParams;K.category&&e.append("category",K.category),K.minPrice&&e.append("minPrice",K.minPrice.toString()),K.maxPrice&&e.append("maxPrice",K.maxPrice.toString()),K.postalCode&&e.append("postalCode",K.postalCode),K.urgency&&e.append("urgency",K.urgency),K.newOnly&&e.append("newOnly","true"),K.availableOnly&&e.append("availableOnly","true");const s=await t.get(`/api/marketplace/leads?${e}`),i=s.data.leads.map(y);A(i)}catch(e){a.error("Impossible de charger les leads")}},[t,K]),_=s.useCallback(async()=>{try{const e=await t.get("/api/marketplace/stats");I(e)}catch(e){}},[t]),X=s.useCallback(async()=>{try{const e=await t.get("/api/marketplace/saved-searches");H(e)}catch(e){}},[t]),Z=s.useCallback(async()=>{try{$(!0),await Promise.all([Y(),_()])}finally{$(!1)}},[Y,_]);s.useEffect(()=>{Z(),X()},[Z,X]),s.useEffect(()=>{Y()},[Y]);const ee=e=>{switch(e){case"high":return"red";case"medium":return"orange";default:return"green"}},se=e=>{switch(e){case"high":return"Urgent";case"medium":return"Modéré";default:return"Normal"}},ie=e=>{const s=new Date,i=new Date(e);return(s.getTime()-i.getTime())/36e5<24},re=[{title:"Lead",dataIndex:"title",key:"title",width:250,render:(s,i)=>e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold flex items-center gap-2",children:[s,ie(i.publishedAt)&&e.jsxDEV(k,{count:"NOUVEAU",style:{backgroundColor:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:390,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:387,columnNumber:11},this),e.jsxDEV(j,{type:"secondary",className:"text-xs",children:[i.description.substring(0,80),"..."]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:393,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1",children:i.tags.map(s=>e.jsxDEV(V,{size:"small",color:"blue",children:s},s,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:398,columnNumber:15},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:396,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:386,columnNumber:9},this)},{title:"Prix",dataIndex:"price",key:"price",width:100,sorter:(e,s)=>e.price-s.price,render:s=>e.jsxDEV(u,{value:s,suffix:"crédits",valueStyle:{fontSize:"14px",color:"#cf1322"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:413,columnNumber:9},this)},{title:"Localisation",dataIndex:"postalCode",key:"postalCode",width:120,render:s=>e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(E,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:427,columnNumber:11},this),e.jsxDEV("span",{children:s},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:428,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:426,columnNumber:9},this)},{title:"Urgence",dataIndex:"urgency",key:"urgency",width:100,sorter:(e,s)=>e.urgency.localeCompare(s.urgency),render:s=>e.jsxDEV(V,{color:ee(s),icon:e.jsxDEV(p,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:439,columnNumber:53},this),children:se(s)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:439,columnNumber:9},this)},{title:"Acheteurs",key:"buyers",width:120,render:(s,i)=>{const r=i.purchaseCount/i.maxPurchases,a=r>=1?"red":r>=.75?"orange":"green";return e.jsxDEV(M,{title:`${i.purchaseCount} pro(s) ont déjà acheté ce lead sur ${i.maxPurchases} maximum`,children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:455,columnNumber:15},this),e.jsxDEV("span",{style:{color:a},children:[i.purchaseCount,"/",i.maxPurchases]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:456,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:454,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:453,columnNumber:11},this)}},{title:"Valeur estimée",dataIndex:"estimatedValue",key:"estimatedValue",width:130,sorter:(e,s)=>e.estimatedValue-s.estimatedValue,render:s=>e.jsxDEV(u,{value:s,suffix:"€",valueStyle:{fontSize:"14px",color:"#3f8600"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:471,columnNumber:9},this)},{title:"Actions",key:"actions",width:150,render:(s,i)=>e.jsxDEV(g,{children:[e.jsxDEV(v,{type:"primary",size:"small",icon:e.jsxDEV(l,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:487,columnNumber:19},this),disabled:!i.isAvailable,onClick:()=>{q(i),J(!0)},children:"Acheter"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:484,columnNumber:11},this),e.jsxDEV(v,{size:"small",icon:e.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:498,columnNumber:19},this),onClick:()=>{q(i)},children:"Voir"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:496,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:483,columnNumber:9},this)}];return e.jsxDEV("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-4",children:e.jsxDEV("div",{children:[e.jsxDEV(O,{level:2,className:"mb-0",children:[e.jsxDEV(l,{className:"mr-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:519,columnNumber:15},this),"Marketplace des leads"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:518,columnNumber:13},this),e.jsxDEV(j,{type:"secondary",children:"Achetez des leads qualifiés pour développer votre business"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:522,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:517,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:516,columnNumber:9},this),e.jsxDEV(m,{gutter:16,className:"mb-6",children:[e.jsxDEV(n,{span:6,children:e.jsxDEV(c,{children:e.jsxDEV(u,{title:"Leads disponibles",value:w.availableLeads,suffix:`/ ${w.totalLeads}`,valueStyle:{color:"#3f8600"},prefix:e.jsxDEV(d,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:536,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:531,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:530,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:529,columnNumber:11},this),e.jsxDEV(n,{span:6,children:e.jsxDEV(c,{children:e.jsxDEV(u,{title:"Prix moyen",value:w.avgPrice,suffix:"crédits",precision:1,valueStyle:{color:"#1890ff"},prefix:e.jsxDEV(o,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:548,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:542,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:541,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:540,columnNumber:11},this),e.jsxDEV(n,{span:6,children:e.jsxDEV(c,{children:e.jsxDEV(u,{title:"Nouveaux aujourd'hui",value:w.newToday,valueStyle:{color:"#52c41a"},prefix:e.jsxDEV(p,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:558,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:554,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:553,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:552,columnNumber:11},this),e.jsxDEV(n,{span:6,children:e.jsxDEV(c,{className:"text-center",children:e.jsxDEV(v,{type:"primary",ghost:!0,icon:e.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:567,columnNumber:23},this),onClick:()=>a.info("Fonctionnalité bientôt disponible"),block:!0,children:"Alertes leads"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:564,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:563,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:562,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:528,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:515,columnNumber:7},this),e.jsxDEV(c,{title:e.jsxDEV(g,{children:[e.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:582,columnNumber:13},this),"Filtres de recherche"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:581,columnNumber:11},this),extra:e.jsxDEV(g,{children:[G.length>0&&e.jsxDEV(N,{placeholder:"Recherches sauvegardées",style:{width:200},allowClear:!0,onSelect:e=>{const s=G.find(s=>s.id===e);var i;s&&(i=s.filters,Q(i),W.setFieldsValue(i))},children:G.map(s=>e.jsxDEV(U,{value:s.id,children:s.name},s.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:599,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:589,columnNumber:15},this),e.jsxDEV(v,{icon:e.jsxDEV(b,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:606,columnNumber:21},this),onClick:async()=>{const e=prompt("Nom de la recherche sauvegardée :");if(e)try{await t.post("/api/marketplace/saved-searches",{name:e,filters:K}),a.success("Recherche sauvegardée !"),X()}catch(s){a.error("Erreur lors de la sauvegarde de la recherche")}},title:"Sauvegarder cette recherche",children:"Sauvegarder"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:605,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:587,columnNumber:11},this),className:"mb-6",children:e.jsxDEV(r,{form:W,layout:"inline",className:"w-full",onValuesChange:(e,s)=>{Q({...K,...s})},children:e.jsxDEV(m,{gutter:16,className:"w-full",children:[e.jsxDEV(n,{span:4,children:e.jsxDEV(r.Item,{name:"category",label:"Catégorie",children:e.jsxDEV(N,{placeholder:"Toutes",allowClear:!0,style:{width:"100%"},children:[e.jsxDEV(U,{value:"renovation",children:"Rénovation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:628,columnNumber:19},this),e.jsxDEV(U,{value:"construction",children:"Construction"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:629,columnNumber:19},this),e.jsxDEV(U,{value:"plomberie",children:"Plomberie"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:630,columnNumber:19},this),e.jsxDEV(U,{value:"electricite",children:"Électricité"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:631,columnNumber:19},this),e.jsxDEV(U,{value:"chauffage",children:"Chauffage"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:632,columnNumber:19},this),e.jsxDEV(U,{value:"jardinage",children:"Jardinage"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:633,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:627,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:626,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:625,columnNumber:13},this),e.jsxDEV(n,{span:3,children:e.jsxDEV(r.Item,{name:"minPrice",label:"Prix min",children:e.jsxDEV(D,{type:"number",placeholder:"0",suffix:"crédits"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:640,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:639,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:638,columnNumber:13},this),e.jsxDEV(n,{span:3,children:e.jsxDEV(r.Item,{name:"maxPrice",label:"Prix max",children:e.jsxDEV(D,{type:"number",placeholder:"∞",suffix:"crédits"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:650,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:649,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:648,columnNumber:13},this),e.jsxDEV(n,{span:3,children:e.jsxDEV(r.Item,{name:"postalCode",label:"CP",children:e.jsxDEV(D,{placeholder:"1000"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:660,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:659,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:658,columnNumber:13},this),e.jsxDEV(n,{span:4,children:e.jsxDEV(r.Item,{name:"urgency",label:"Urgence",children:e.jsxDEV(N,{placeholder:"Toutes",allowClear:!0,children:[e.jsxDEV(U,{value:"high",children:"Urgent"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:667,columnNumber:19},this),e.jsxDEV(U,{value:"medium",children:"Modéré"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:668,columnNumber:19},this),e.jsxDEV(U,{value:"low",children:"Normal"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:669,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:666,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:665,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:664,columnNumber:13},this),e.jsxDEV(n,{span:3,children:e.jsxDEV(r.Item,{name:"newOnly",valuePropName:"checked",children:e.jsxDEV(v,{type:K.newOnly?"primary":"default",size:"small",onClick:()=>Q({...K,newOnly:!K.newOnly}),children:"Nouveaux uniquement"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:676,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:675,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:674,columnNumber:13},this),e.jsxDEV(n,{span:4,children:e.jsxDEV(r.Item,{name:"availableOnly",valuePropName:"checked",children:e.jsxDEV(v,{type:K.availableOnly?"primary":"default",size:"small",onClick:()=>Q({...K,availableOnly:!K.availableOnly}),children:"Disponibles seulement"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:688,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:687,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:686,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:624,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:616,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:579,columnNumber:7},this),e.jsxDEV(c,{children:e.jsxDEV(C,{columns:re,dataSource:S,rowKey:"id",loading:L,pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`${e} leads au total`},scroll:{x:1200},size:"middle"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:703,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:702,columnNumber:7},this),e.jsxDEV(R,{lead:F,open:B,onCancel:()=>{J(!1),q(null)},onConfirm:async e=>{z(!0);try{await t.post(`/api/marketplace/leads/${e}/purchase`,{}),a.success("Lead acheté avec succès !"),J(!1),q(null),Y()}catch(s){const e=s instanceof Error?s.message:"Erreur lors de l'achat du lead";a.error(e)}finally{z(!1)}},loading:T},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:720,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/MarketplacePage.tsx",lineNumber:513,columnNumber:5},this)}export{w as default};
