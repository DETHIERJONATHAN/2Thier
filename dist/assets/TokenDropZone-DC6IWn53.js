var e=Object.defineProperty,r=(r,n,s)=>((r,n,s)=>n in r?e(r,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[n]=s)(r,"symbol"!=typeof n?n+"":n,s);import{j as n}from"./index-C0S0DpaX.js";import{r as s}from"./react-vendor-Al_k-ZB6.js";import{a as o}from"./dnd-vendor-D0spq1w0.js";import{T as t}from"./TokenChip-CxHEbEuw.js";import{be as a,a as i}from"./antd-vendor-zFcGztvE.js";const l=new class{constructor(){r(this,"listeners",new Map)}on(e,r){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(r),()=>this.off(e,r)}off(e,r){var n;null==(n=this.listeners.get(e))||n.delete(r)}emit(e,r){var n;null==(n=this.listeners.get(e))||n.forEach(e=>e(r))}},c=({nodeId:e,capability:r,label:c,placeholder:m,value:d,onChange:p,readOnly:f})=>{const[h,u]=s.useState(()=>d||[]),{setNodeRef:b,isOver:v}=o({id:`param-${r}-${e}`,data:{type:"parameter",nodeId:e,capability:r,position:"token"}});s.useEffect(()=>{u(d||[])},[d]),s.useEffect(()=>{const n=l.on("parameter:drop",n=>{n.nodeId===e&&n.capability===r&&u(e=>{if(e.includes(n.token))return e;const r=[...e,n.token];return null==p||p(r),r})});return()=>{n()}},[e,r,p]);const D=s.useMemo(()=>h.length?n.jsxDEV("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:h.map(e=>n.jsxDEV(t,{token:e,onRemove:f?void 0:e=>{const r=h.filter(r=>r!==e);u(r),null==p||p(r)}},e,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/shared/TokenDropZone.tsx",lineNumber:54,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/shared/TokenDropZone.tsx",lineNumber:52,columnNumber:7},void 0):n.jsxDEV(a,{image:a.PRESENTED_IMAGE_SIMPLE,description:m||"Glissez des références ici"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/shared/TokenDropZone.tsx",lineNumber:49,columnNumber:7},void 0),[h,p,f,m]);return n.jsxDEV("div",{ref:b,children:n.jsxDEV(i,{size:"small",bordered:!0,style:{background:v?"#e6f7ff":"#fafafa",transition:"background 120ms"},title:c,children:D},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/shared/TokenDropZone.tsx",lineNumber:66,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/TreeBranchLeaf/treebranchleaf-new/components/Parameters/shared/TokenDropZone.tsx",lineNumber:65,columnNumber:5},void 0)};export{c as T};
