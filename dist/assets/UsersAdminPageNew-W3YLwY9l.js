import{u as e,j as s}from"./index-C0S0DpaX.js";import{R as i,r}from"./react-vendor-Al_k-ZB6.js";import{u as t}from"./useAuthenticatedApi-BbQI8SDU.js";import{F as n,a0 as a,I as o,an as d,B as l,s as m,aF as c,$ as u,aG as p,ab as v,b4 as h,b5 as N,b as g,a2 as f,a as x,af as b,ag as D,T as C,a3 as y,a4 as E,c as k,aM as A,bl as V,aC as U,bm as _,R as S,cB as M,l as O,Q as w,aZ as j,cM as R,h as P,aj as I,al as T,z,a$ as Z,be as $,aQ as G,b3 as W,cN as L,a7 as F,a6 as B}from"./antd-vendor-zFcGztvE.js";const q=({visible:r,onCancel:c,onSuccess:u,roles:p})=>{const[v]=n.useForm(),{api:h}=t(),{currentOrganization:N}=e(),[g,f]=i.useState(!1);return s.jsxDEV(a,{title:"Inviter un nouvel utilisateur",open:r,onCancel:c,footer:[s.jsxDEV(l,{onClick:c,children:"Annuler"},"back",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:52,columnNumber:9},void 0),s.jsxDEV(l,{type:"primary",loading:g,onClick:()=>v.submit(),children:"Envoyer l'invitation"},"submit",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:55,columnNumber:9},void 0)],children:s.jsxDEV(n,{form:v,onFinish:async e=>{if(null==N?void 0:N.id){f(!0);try{const s=await h.post("/api/users/invitations",{...e,organizationId:N.id});s.success?(m.success(s.message||"Invitation envoyée avec succès !"),u(),v.resetFields()):m.error(s.message||"Une erreur est survenue.")}catch(s){}finally{f(!1)}}else m.error("Aucune organisation sélectionnée")},layout:"vertical",children:[s.jsxDEV(n.Item,{name:"email",label:"Adresse e-mail",rules:[{required:!0,type:"email",message:"Veuillez entrer une adresse e-mail valide."}],children:s.jsxDEV(o,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:66,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:61,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"roleName",label:"Rôle",rules:[{required:!0,message:"Veuillez sélectionner un rôle."}],children:s.jsxDEV(d,{placeholder:"Sélectionner un rôle",children:p.map(e=>s.jsxDEV(d.Option,{value:e.name,children:e.label||e.name},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:75,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:73,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:68,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:60,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/InvitationModal.tsx",lineNumber:47,columnNumber:5},void 0)};var K,J,H;(J=K||(K={})).assertEqual=e=>{},J.assertIs=function(e){},J.assertNever=function(e){throw new Error},J.arrayToEnum=e=>{const s={};for(const i of e)s[i]=i;return s},J.getValidEnumValues=e=>{const s=J.objectKeys(e).filter(s=>"number"!=typeof e[e[s]]),i={};for(const r of s)i[r]=e[r];return J.objectValues(i)},J.objectValues=e=>J.objectKeys(e).map(function(s){return e[s]}),J.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const s=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&s.push(i);return s},J.find=(e,s)=>{for(const i of e)if(s(i))return i},J.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,J.joinValues=function(e,s=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(s)},J.jsonStringifyReplacer=(e,s)=>"bigint"==typeof s?s.toString():s,(H||(H={})).mergeShapes=(e,s)=>({...e,...s});const Y=K.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Q=e=>{switch(typeof e){case"undefined":return Y.undefined;case"string":return Y.string;case"number":return Number.isNaN(e)?Y.nan:Y.number;case"boolean":return Y.boolean;case"function":return Y.function;case"bigint":return Y.bigint;case"symbol":return Y.symbol;case"object":return Array.isArray(e)?Y.array:null===e?Y.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Y.promise:"undefined"!=typeof Map&&e instanceof Map?Y.map:"undefined"!=typeof Set&&e instanceof Set?Y.set:"undefined"!=typeof Date&&e instanceof Date?Y.date:Y.object;default:return Y.unknown}},X=K.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ee extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(e){return e.message},i={_errors:[]},r=e=>{for(const t of e.issues)if("invalid_union"===t.code)t.unionErrors.map(r);else if("invalid_return_type"===t.code)r(t.returnTypeError);else if("invalid_arguments"===t.code)r(t.argumentsError);else if(0===t.path.length)i._errors.push(s(t));else{let e=i,r=0;for(;r<t.path.length;){const i=t.path[r];r===t.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(s(t))):e[i]=e[i]||{_errors:[]},e=e[i],r++}}};return r(this),i}static assert(e){if(!(e instanceof ee))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,K.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const s={},i=[];for(const r of this.issues)if(r.path.length>0){const i=r.path[0];s[i]=s[i]||[],s[i].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:s}}get formErrors(){return this.flatten()}}ee.create=e=>new ee(e);const se=(e,s)=>{let i;switch(e.code){case X.invalid_type:i=e.received===Y.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case X.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,K.jsonStringifyReplacer)}`;break;case X.unrecognized_keys:i=`Unrecognized key(s) in object: ${K.joinValues(e.keys,", ")}`;break;case X.invalid_union:i="Invalid input";break;case X.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${K.joinValues(e.options)}`;break;case X.invalid_enum_value:i=`Invalid enum value. Expected ${K.joinValues(e.options)}, received '${e.received}'`;break;case X.invalid_arguments:i="Invalid function arguments";break;case X.invalid_return_type:i="Invalid function return type";break;case X.invalid_date:i="Invalid date";break;case X.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(i=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?i=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?i=`Invalid input: must end with "${e.validation.endsWith}"`:K.assertNever(e.validation):i="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case X.too_small:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case X.too_big:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case X.custom:i="Invalid input";break;case X.invalid_intersection_types:i="Intersection results could not be merged";break;case X.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case X.not_finite:i="Number must be finite";break;default:i=s.defaultError,K.assertNever(e)}return{message:i}};let ie=se;function re(e,s){const i=ie,r=(e=>{const{data:s,path:i,errorMaps:r,issueData:t}=e,n=[...i,...t.path||[]],a={...t,path:n};if(void 0!==t.message)return{...t,path:n,message:t.message};let o="";const d=r.filter(e=>!!e).slice().reverse();for(const l of d)o=l(a,{data:s,defaultError:o}).message;return{...t,path:n,message:o}})({issueData:s,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i,i===se?void 0:se].filter(e=>!!e)});e.common.issues.push(r)}class te{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,s){const i=[];for(const r of s){if("aborted"===r.status)return ne;"dirty"===r.status&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,s){const i=[];for(const r of s){const e=await r.key,s=await r.value;i.push({key:e,value:s})}return te.mergeObjectSync(e,i)}static mergeObjectSync(e,s){const i={};for(const r of s){const{key:s,value:t}=r;if("aborted"===s.status)return ne;if("aborted"===t.status)return ne;"dirty"===s.status&&e.dirty(),"dirty"===t.status&&e.dirty(),"__proto__"===s.value||void 0===t.value&&!r.alwaysSet||(i[s.value]=t.value)}return{status:e.value,value:i}}}const ne=Object.freeze({status:"aborted"}),ae=e=>({status:"dirty",value:e}),oe=e=>({status:"valid",value:e}),de=e=>"aborted"===e.status,le=e=>"dirty"===e.status,me=e=>"valid"===e.status,ce=e=>"undefined"!=typeof Promise&&e instanceof Promise;var ue,pe;(pe=ue||(ue={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},pe.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class ve{constructor(e,s,i,r){this._cachedPath=[],this.parent=e,this.data=s,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const he=(e,s)=>{if(me(s))return{success:!0,data:s.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ee(e.common.issues);return this._error=s,this._error}}};function Ne(e){if(!e)return{};const{errorMap:s,invalid_type_error:i,required_error:r,description:t}=e;if(s&&(i||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(s)return{errorMap:s,description:t};return{errorMap:(s,t)=>{const{message:n}=e;return"invalid_enum_value"===s.code?{message:n??t.defaultError}:void 0===t.data?{message:n??r??t.defaultError}:"invalid_type"!==s.code?{message:t.defaultError}:{message:n??i??t.defaultError}},description:t}}class ge{get description(){return this._def.description}_getType(e){return Q(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:Q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new te,ctx:{common:e.parent.common,data:e.data,parsedType:Q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(ce(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const i=this.safeParse(e,s);if(i.success)return i.data;throw i.error}safeParse(e,s){const i={common:{issues:[],async:(null==s?void 0:s.async)??!1,contextualErrorMap:null==s?void 0:s.errorMap},path:(null==s?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Q(e)},r=this._parseSync({data:e,path:i.path,parent:i});return he(i,r)}"~validate"(e){var s,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Q(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:r});return me(s)?{value:s.value}:{issues:r.common.issues}}catch(t){(null==(i=null==(s=null==t?void 0:t.message)?void 0:s.toLowerCase())?void 0:i.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(e=>me(e)?{value:e.value}:{issues:r.common.issues})}async parseAsync(e,s){const i=await this.safeParseAsync(e,s);if(i.success)return i.data;throw i.error}async safeParseAsync(e,s){const i={common:{issues:[],contextualErrorMap:null==s?void 0:s.errorMap,async:!0},path:(null==s?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Q(e)},r=this._parse({data:e,path:i.path,parent:i}),t=await(ce(r)?r:Promise.resolve(r));return he(i,t)}refine(e,s){const i=e=>"string"==typeof s||void 0===s?{message:s}:"function"==typeof s?s(e):s;return this._refinement((s,r)=>{const t=e(s),n=()=>r.addIssue({code:X.custom,...i(s)});return"undefined"!=typeof Promise&&t instanceof Promise?t.then(e=>!!e||(n(),!1)):!!t||(n(),!1)})}refinement(e,s){return this._refinement((i,r)=>!!e(i)||(r.addIssue("function"==typeof s?s(i,r):s),!1))}_refinement(e){return new hs({schema:this,typeName:Es.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Ns.create(this,this._def)}nullable(){return gs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return es.create(this)}promise(){return vs.create(this,this._def)}or(e){return rs.create([this,e],this._def)}and(e){return ns.create(this,e,this._def)}transform(e){return new hs({...Ne(this._def),schema:this,typeName:Es.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s="function"==typeof e?e:()=>e;return new fs({...Ne(this._def),innerType:this,defaultValue:s,typeName:Es.ZodDefault})}brand(){return new Ds({typeName:Es.ZodBranded,type:this,...Ne(this._def)})}catch(e){const s="function"==typeof e?e:()=>e;return new xs({...Ne(this._def),innerType:this,catchValue:s,typeName:Es.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Cs.create(this,e)}readonly(){return ys.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fe=/^c[^\s-]{8,}$/i,xe=/^[0-9a-z]+$/,be=/^[0-9A-HJKMNP-TV-Z]{26}$/i,De=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ce=/^[a-z0-9_-]{21}$/i,ye=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ee=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ke=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ae;const Ve=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Se=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Me=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Oe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,we="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",je=new RegExp(`^${we}$`);function Re(e){let s="[0-5]\\d";e.precision?s=`${s}\\.\\d{${e.precision}}`:null==e.precision&&(s=`${s}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${e.precision?"+":"?"}`}function Pe(e){return new RegExp(`^${Re(e)}$`)}function Ie(e){let s=`${we}T${Re(e)}`;const i=[];return i.push(e.local?"Z?":"Z"),e.offset&&i.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${i.join("|")})`,new RegExp(`^${s}$`)}function Te(e,s){return!("v4"!==s&&s||!Ve.test(e))||!("v6"!==s&&s||!_e.test(e))}function ze(e,s){if(!ye.test(e))return!1;try{const[i]=e.split(".");if(!i)return!1;const r=i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+(4-i.length%4)%4,"="),t=JSON.parse(atob(r));return"object"==typeof t&&null!==t&&((!("typ"in t)||"JWT"===(null==t?void 0:t.typ))&&(!!t.alg&&(!s||t.alg===s)))}catch{return!1}}function Ze(e,s){return!("v4"!==s&&s||!Ue.test(e))||!("v6"!==s&&s||!Se.test(e))}class $e extends ge{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Y.string){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.string,received:s.parsedType}),ne}const s=new te;let i;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:X.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if("max"===r.kind)e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:X.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if("length"===r.kind){const t=e.data.length>r.value,n=e.data.length<r.value;(t||n)&&(i=this._getOrReturnCtx(e,i),t?re(i,{code:X.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):n&&re(i,{code:X.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if("email"===r.kind)ke.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"email",code:X.invalid_string,message:r.message}),s.dirty());else if("emoji"===r.kind)Ae||(Ae=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ae.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"emoji",code:X.invalid_string,message:r.message}),s.dirty());else if("uuid"===r.kind)De.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"uuid",code:X.invalid_string,message:r.message}),s.dirty());else if("nanoid"===r.kind)Ce.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"nanoid",code:X.invalid_string,message:r.message}),s.dirty());else if("cuid"===r.kind)fe.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid",code:X.invalid_string,message:r.message}),s.dirty());else if("cuid2"===r.kind)xe.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid2",code:X.invalid_string,message:r.message}),s.dirty());else if("ulid"===r.kind)be.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ulid",code:X.invalid_string,message:r.message}),s.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),re(i,{validation:"url",code:X.invalid_string,message:r.message}),s.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"regex",code:X.invalid_string,message:r.message}),s.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),re(i,{code:X.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:X.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:X.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty());else if("datetime"===r.kind){Ie(r).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:X.invalid_string,validation:"datetime",message:r.message}),s.dirty())}else if("date"===r.kind){je.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:X.invalid_string,validation:"date",message:r.message}),s.dirty())}else if("time"===r.kind){Pe(r).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:X.invalid_string,validation:"time",message:r.message}),s.dirty())}else"duration"===r.kind?Ee.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"duration",code:X.invalid_string,message:r.message}),s.dirty()):"ip"===r.kind?Te(e.data,r.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ip",code:X.invalid_string,message:r.message}),s.dirty()):"jwt"===r.kind?ze(e.data,r.alg)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"jwt",code:X.invalid_string,message:r.message}),s.dirty()):"cidr"===r.kind?Ze(e.data,r.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cidr",code:X.invalid_string,message:r.message}),s.dirty()):"base64"===r.kind?Me.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64",code:X.invalid_string,message:r.message}),s.dirty()):"base64url"===r.kind?Oe.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64url",code:X.invalid_string,message:r.message}),s.dirty()):K.assertNever(r);return{status:s.value,value:e.data}}_regex(e,s,i){return this.refinement(s=>e.test(s),{validation:s,code:X.invalid_string,...ue.errToObj(i)})}_addCheck(e){return new $e({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ue.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ue.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ue.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ue.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ue.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ue.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:(null==e?void 0:e.offset)??!1,local:(null==e?void 0:e.local)??!1,...ue.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...ue.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ue.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...ue.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:null==s?void 0:s.position,...ue.errToObj(null==s?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...ue.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...ue.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...ue.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...ue.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...ue.errToObj(s)})}nonempty(e){return this.min(1,ue.errToObj(e))}trim(){return new $e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const s of this._def.checks)"min"===s.kind&&(null===e||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)"max"===s.kind&&(null===e||s.value<e)&&(e=s.value);return e}}function Ge(e,s){const i=(e.toString().split(".")[1]||"").length,r=(s.toString().split(".")[1]||"").length,t=i>r?i:r;return Number.parseInt(e.toFixed(t).replace(".",""))%Number.parseInt(s.toFixed(t).replace(".",""))/10**t}$e.create=e=>new $e({checks:[],typeName:Es.ZodString,coerce:(null==e?void 0:e.coerce)??!1,...Ne(e)});class We extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Y.number){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.number,received:s.parsedType}),ne}let s;const i=new te;for(const r of this._def.checks)if("int"===r.kind)K.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{code:X.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),re(s,{code:X.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),re(s,{code:X.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty())}else"multipleOf"===r.kind?0!==Ge(e.data,r.value)&&(s=this._getOrReturnCtx(e,s),re(s,{code:X.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{code:X.not_finite,message:r.message}),i.dirty()):K.assertNever(r);return{status:i.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,ue.toString(s))}setLimit(e,s,i,r){return new We({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:i,message:ue.toString(r)}]})}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ue.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)"min"===s.kind&&(null===e||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)"max"===s.kind&&(null===e||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&K.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const i of this._def.checks){if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===s||i.value>s)&&(s=i.value):"max"===i.kind&&(null===e||i.value<e)&&(e=i.value)}return Number.isFinite(s)&&Number.isFinite(e)}}We.create=e=>new We({checks:[],typeName:Es.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Ne(e)});class Le extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Y.bigint)return this._getInvalidInput(e);let s;const i=new te;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),re(s,{code:X.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),re(s,{code:X.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),re(s,{code:X.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):K.assertNever(r);return{status:i.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.bigint,received:s.parsedType}),ne}gte(e,s){return this.setLimit("min",e,!0,ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,ue.toString(s))}setLimit(e,s,i,r){return new Le({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:i,message:ue.toString(r)}]})}_addCheck(e){return new Le({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)"min"===s.kind&&(null===e||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)"max"===s.kind&&(null===e||s.value<e)&&(e=s.value);return e}}Le.create=e=>new Le({checks:[],typeName:Es.ZodBigInt,coerce:(null==e?void 0:e.coerce)??!1,...Ne(e)});class Fe extends ge{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Y.boolean){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.boolean,received:s.parsedType}),ne}return oe(e.data)}}Fe.create=e=>new Fe({typeName:Es.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Ne(e)});class Be extends ge{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Y.date){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.date,received:s.parsedType}),ne}if(Number.isNaN(e.data.getTime())){return re(this._getOrReturnCtx(e),{code:X.invalid_date}),ne}const s=new te;let i;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:X.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:X.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):K.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Be({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:ue.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:ue.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)"min"===s.kind&&(null===e||s.value>e)&&(e=s.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)"max"===s.kind&&(null===e||s.value<e)&&(e=s.value);return null!=e?new Date(e):null}}Be.create=e=>new Be({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Es.ZodDate,...Ne(e)});class qe extends ge{_parse(e){if(this._getType(e)!==Y.symbol){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.symbol,received:s.parsedType}),ne}return oe(e.data)}}qe.create=e=>new qe({typeName:Es.ZodSymbol,...Ne(e)});class Ke extends ge{_parse(e){if(this._getType(e)!==Y.undefined){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.undefined,received:s.parsedType}),ne}return oe(e.data)}}Ke.create=e=>new Ke({typeName:Es.ZodUndefined,...Ne(e)});class Je extends ge{_parse(e){if(this._getType(e)!==Y.null){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.null,received:s.parsedType}),ne}return oe(e.data)}}Je.create=e=>new Je({typeName:Es.ZodNull,...Ne(e)});class He extends ge{constructor(){super(...arguments),this._any=!0}_parse(e){return oe(e.data)}}He.create=e=>new He({typeName:Es.ZodAny,...Ne(e)});class Ye extends ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return oe(e.data)}}Ye.create=e=>new Ye({typeName:Es.ZodUnknown,...Ne(e)});class Qe extends ge{_parse(e){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.never,received:s.parsedType}),ne}}Qe.create=e=>new Qe({typeName:Es.ZodNever,...Ne(e)});class Xe extends ge{_parse(e){if(this._getType(e)!==Y.undefined){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.void,received:s.parsedType}),ne}return oe(e.data)}}Xe.create=e=>new Xe({typeName:Es.ZodVoid,...Ne(e)});class es extends ge{_parse(e){const{ctx:s,status:i}=this._processInputParams(e),r=this._def;if(s.parsedType!==Y.array)return re(s,{code:X.invalid_type,expected:Y.array,received:s.parsedType}),ne;if(null!==r.exactLength){const e=s.data.length>r.exactLength.value,t=s.data.length<r.exactLength.value;(e||t)&&(re(s,{code:e?X.too_big:X.too_small,minimum:t?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(null!==r.minLength&&s.data.length<r.minLength.value&&(re(s,{code:X.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),null!==r.maxLength&&s.data.length>r.maxLength.value&&(re(s,{code:X.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),s.common.async)return Promise.all([...s.data].map((e,i)=>r.type._parseAsync(new ve(s,e,s.path,i)))).then(e=>te.mergeArray(i,e));const t=[...s.data].map((e,i)=>r.type._parseSync(new ve(s,e,s.path,i)));return te.mergeArray(i,t)}get element(){return this._def.type}min(e,s){return new es({...this._def,minLength:{value:e,message:ue.toString(s)}})}max(e,s){return new es({...this._def,maxLength:{value:e,message:ue.toString(s)}})}length(e,s){return new es({...this._def,exactLength:{value:e,message:ue.toString(s)}})}nonempty(e){return this.min(1,e)}}function ss(e){if(e instanceof is){const s={};for(const i in e.shape){const r=e.shape[i];s[i]=Ns.create(ss(r))}return new is({...e._def,shape:()=>s})}return e instanceof es?new es({...e._def,type:ss(e.element)}):e instanceof Ns?Ns.create(ss(e.unwrap())):e instanceof gs?gs.create(ss(e.unwrap())):e instanceof as?as.create(e.items.map(e=>ss(e))):e}es.create=(e,s)=>new es({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Es.ZodArray,...Ne(s)});class is extends ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),s=K.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==Y.object){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.object,received:s.parsedType}),ne}const{status:s,ctx:i}=this._processInputParams(e),{shape:r,keys:t}=this._getCached(),n=[];if(!(this._def.catchall instanceof Qe&&"strip"===this._def.unknownKeys))for(const o in i.data)t.includes(o)||n.push(o);const a=[];for(const o of t){const e=r[o],s=i.data[o];a.push({key:{status:"valid",value:o},value:e._parse(new ve(i,s,i.path,o)),alwaysSet:o in i.data})}if(this._def.catchall instanceof Qe){const e=this._def.unknownKeys;if("passthrough"===e)for(const s of n)a.push({key:{status:"valid",value:s},value:{status:"valid",value:i.data[s]}});else if("strict"===e)n.length>0&&(re(i,{code:X.unrecognized_keys,keys:n}),s.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const s of n){const r=i.data[s];a.push({key:{status:"valid",value:s},value:e._parse(new ve(i,r,i.path,s)),alwaysSet:s in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const e=[];for(const s of a){const i=await s.key,r=await s.value;e.push({key:i,value:r,alwaysSet:s.alwaysSet})}return e}).then(e=>te.mergeObjectSync(s,e)):te.mergeObjectSync(s,a)}get shape(){return this._def.shape()}strict(e){return ue.errToObj,new is({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(s,i)=>{var r,t;const n=(null==(t=(r=this._def).errorMap)?void 0:t.call(r,s,i).message)??i.defaultError;return"unrecognized_keys"===s.code?{message:ue.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new is({...this._def,unknownKeys:"strip"})}passthrough(){return new is({...this._def,unknownKeys:"passthrough"})}extend(e){return new is({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new is({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Es.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new is({...this._def,catchall:e})}pick(e){const s={};for(const i of K.objectKeys(e))e[i]&&this.shape[i]&&(s[i]=this.shape[i]);return new is({...this._def,shape:()=>s})}omit(e){const s={};for(const i of K.objectKeys(this.shape))e[i]||(s[i]=this.shape[i]);return new is({...this._def,shape:()=>s})}deepPartial(){return ss(this)}partial(e){const s={};for(const i of K.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?s[i]=r:s[i]=r.optional()}return new is({...this._def,shape:()=>s})}required(e){const s={};for(const i of K.objectKeys(this.shape))if(e&&!e[i])s[i]=this.shape[i];else{let e=this.shape[i];for(;e instanceof Ns;)e=e._def.innerType;s[i]=e}return new is({...this._def,shape:()=>s})}keyof(){return cs(K.objectKeys(this.shape))}}is.create=(e,s)=>new is({shape:()=>e,unknownKeys:"strip",catchall:Qe.create(),typeName:Es.ZodObject,...Ne(s)}),is.strictCreate=(e,s)=>new is({shape:()=>e,unknownKeys:"strict",catchall:Qe.create(),typeName:Es.ZodObject,...Ne(s)}),is.lazycreate=(e,s)=>new is({shape:e,unknownKeys:"strip",catchall:Qe.create(),typeName:Es.ZodObject,...Ne(s)});class rs extends ge{_parse(e){const{ctx:s}=this._processInputParams(e),i=this._def.options;if(s.common.async)return Promise.all(i.map(async e=>{const i={...s,common:{...s.common,issues:[]},parent:null};return{result:await e._parseAsync({data:s.data,path:s.path,parent:i}),ctx:i}})).then(function(e){for(const s of e)if("valid"===s.result.status)return s.result;for(const r of e)if("dirty"===r.result.status)return s.common.issues.push(...r.ctx.common.issues),r.result;const i=e.map(e=>new ee(e.ctx.common.issues));return re(s,{code:X.invalid_union,unionErrors:i}),ne});{let e;const r=[];for(const n of i){const i={...s,common:{...s.common,issues:[]},parent:null},t=n._parseSync({data:s.data,path:s.path,parent:i});if("valid"===t.status)return t;"dirty"!==t.status||e||(e={result:t,ctx:i}),i.common.issues.length&&r.push(i.common.issues)}if(e)return s.common.issues.push(...e.ctx.common.issues),e.result;const t=r.map(e=>new ee(e));return re(s,{code:X.invalid_union,unionErrors:t}),ne}}get options(){return this._def.options}}function ts(e,s){const i=Q(e),r=Q(s);if(e===s)return{valid:!0,data:e};if(i===Y.object&&r===Y.object){const i=K.objectKeys(s),r=K.objectKeys(e).filter(e=>-1!==i.indexOf(e)),t={...e,...s};for(const n of r){const i=ts(e[n],s[n]);if(!i.valid)return{valid:!1};t[n]=i.data}return{valid:!0,data:t}}if(i===Y.array&&r===Y.array){if(e.length!==s.length)return{valid:!1};const i=[];for(let r=0;r<e.length;r++){const t=ts(e[r],s[r]);if(!t.valid)return{valid:!1};i.push(t.data)}return{valid:!0,data:i}}return i===Y.date&&r===Y.date&&+e===+s?{valid:!0,data:e}:{valid:!1}}rs.create=(e,s)=>new rs({options:e,typeName:Es.ZodUnion,...Ne(s)});class ns extends ge{_parse(e){const{status:s,ctx:i}=this._processInputParams(e),r=(e,r)=>{if(de(e)||de(r))return ne;const t=ts(e.value,r.value);return t.valid?((le(e)||le(r))&&s.dirty(),{status:s.value,value:t.data}):(re(i,{code:X.invalid_intersection_types}),ne)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([e,s])=>r(e,s)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}ns.create=(e,s,i)=>new ns({left:e,right:s,typeName:Es.ZodIntersection,...Ne(i)});class as extends ge{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==Y.array)return re(i,{code:X.invalid_type,expected:Y.array,received:i.parsedType}),ne;if(i.data.length<this._def.items.length)return re(i,{code:X.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne;!this._def.rest&&i.data.length>this._def.items.length&&(re(i,{code:X.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const r=[...i.data].map((e,s)=>{const r=this._def.items[s]||this._def.rest;return r?r._parse(new ve(i,e,i.path,s)):null}).filter(e=>!!e);return i.common.async?Promise.all(r).then(e=>te.mergeArray(s,e)):te.mergeArray(s,r)}get items(){return this._def.items}rest(e){return new as({...this._def,rest:e})}}as.create=(e,s)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new as({items:e,typeName:Es.ZodTuple,rest:null,...Ne(s)})};class os extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==Y.map)return re(i,{code:X.invalid_type,expected:Y.map,received:i.parsedType}),ne;const r=this._def.keyType,t=this._def.valueType,n=[...i.data.entries()].map(([e,s],n)=>({key:r._parse(new ve(i,e,i.path,[n,"key"])),value:t._parse(new ve(i,s,i.path,[n,"value"]))}));if(i.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const i of n){const r=await i.key,t=await i.value;if("aborted"===r.status||"aborted"===t.status)return ne;"dirty"!==r.status&&"dirty"!==t.status||s.dirty(),e.set(r.value,t.value)}return{status:s.value,value:e}})}{const e=new Map;for(const i of n){const r=i.key,t=i.value;if("aborted"===r.status||"aborted"===t.status)return ne;"dirty"!==r.status&&"dirty"!==t.status||s.dirty(),e.set(r.value,t.value)}return{status:s.value,value:e}}}}os.create=(e,s,i)=>new os({valueType:s,keyType:e,typeName:Es.ZodMap,...Ne(i)});class ds extends ge{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==Y.set)return re(i,{code:X.invalid_type,expected:Y.set,received:i.parsedType}),ne;const r=this._def;null!==r.minSize&&i.data.size<r.minSize.value&&(re(i,{code:X.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),s.dirty()),null!==r.maxSize&&i.data.size>r.maxSize.value&&(re(i,{code:X.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),s.dirty());const t=this._def.valueType;function n(e){const i=new Set;for(const r of e){if("aborted"===r.status)return ne;"dirty"===r.status&&s.dirty(),i.add(r.value)}return{status:s.value,value:i}}const a=[...i.data.values()].map((e,s)=>t._parse(new ve(i,e,i.path,s)));return i.common.async?Promise.all(a).then(e=>n(e)):n(a)}min(e,s){return new ds({...this._def,minSize:{value:e,message:ue.toString(s)}})}max(e,s){return new ds({...this._def,maxSize:{value:e,message:ue.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}ds.create=(e,s)=>new ds({valueType:e,minSize:null,maxSize:null,typeName:Es.ZodSet,...Ne(s)});class ls extends ge{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}ls.create=(e,s)=>new ls({getter:e,typeName:Es.ZodLazy,...Ne(s)});class ms extends ge{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return re(s,{received:s.data,code:X.invalid_literal,expected:this._def.value}),ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}function cs(e,s){return new us({values:e,typeName:Es.ZodEnum,...Ne(s)})}ms.create=(e,s)=>new ms({value:e,typeName:Es.ZodLiteral,...Ne(s)});class us extends ge{_parse(e){if("string"!=typeof e.data){const s=this._getOrReturnCtx(e),i=this._def.values;return re(s,{expected:K.joinValues(i),received:s.parsedType,code:X.invalid_type}),ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),i=this._def.values;return re(s,{received:s.data,code:X.invalid_enum_value,options:i}),ne}return oe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return us.create(e,{...this._def,...s})}exclude(e,s=this._def){return us.create(this.options.filter(s=>!e.includes(s)),{...this._def,...s})}}us.create=cs;class ps extends ge{_parse(e){const s=K.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Y.string&&i.parsedType!==Y.number){const e=K.objectValues(s);return re(i,{expected:K.joinValues(e),received:i.parsedType,code:X.invalid_type}),ne}if(this._cache||(this._cache=new Set(K.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=K.objectValues(s);return re(i,{received:i.data,code:X.invalid_enum_value,options:e}),ne}return oe(e.data)}get enum(){return this._def.values}}ps.create=(e,s)=>new ps({values:e,typeName:Es.ZodNativeEnum,...Ne(s)});class vs extends ge{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.promise&&!1===s.common.async)return re(s,{code:X.invalid_type,expected:Y.promise,received:s.parsedType}),ne;const i=s.parsedType===Y.promise?s.data:Promise.resolve(s.data);return oe(i.then(e=>this._def.type.parseAsync(e,{path:s.path,errorMap:s.common.contextualErrorMap})))}}vs.create=(e,s)=>new vs({type:e,typeName:Es.ZodPromise,...Ne(s)});class hs extends ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Es.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:i}=this._processInputParams(e),r=this._def.effect||null,t={addIssue:e=>{re(i,e),e.fatal?s.abort():s.dirty()},get path(){return i.path}};if(t.addIssue=t.addIssue.bind(t),"preprocess"===r.type){const e=r.transform(i.data,t);if(i.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===s.value)return ne;const r=await this._def.schema._parseAsync({data:e,path:i.path,parent:i});return"aborted"===r.status?ne:"dirty"===r.status||"dirty"===s.value?ae(r.value):r});{if("aborted"===s.value)return ne;const r=this._def.schema._parseSync({data:e,path:i.path,parent:i});return"aborted"===r.status?ne:"dirty"===r.status||"dirty"===s.value?ae(r.value):r}}if("refinement"===r.type){const e=e=>{const s=r.refinement(e,t);if(i.common.async)return Promise.resolve(s);if(s instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===i.common.async){const r=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===r.status?ne:("dirty"===r.status&&s.dirty(),e(r.value),{status:s.value,value:r.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(i=>"aborted"===i.status?ne:("dirty"===i.status&&s.dirty(),e(i.value).then(()=>({status:s.value,value:i.value}))))}if("transform"===r.type){if(!1===i.common.async){const e=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!me(e))return ne;const n=r.transform(e.value,t);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:n}}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(e=>me(e)?Promise.resolve(r.transform(e.value,t)).then(e=>({status:s.value,value:e})):ne)}K.assertNever(r)}}hs.create=(e,s,i)=>new hs({schema:e,typeName:Es.ZodEffects,effect:s,...Ne(i)}),hs.createWithPreprocess=(e,s,i)=>new hs({schema:s,effect:{type:"preprocess",transform:e},typeName:Es.ZodEffects,...Ne(i)});class Ns extends ge{_parse(e){return this._getType(e)===Y.undefined?oe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ns.create=(e,s)=>new Ns({innerType:e,typeName:Es.ZodOptional,...Ne(s)});class gs extends ge{_parse(e){return this._getType(e)===Y.null?oe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gs.create=(e,s)=>new gs({innerType:e,typeName:Es.ZodNullable,...Ne(s)});class fs extends ge{_parse(e){const{ctx:s}=this._processInputParams(e);let i=s.data;return s.parsedType===Y.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}fs.create=(e,s)=>new fs({innerType:e,typeName:Es.ZodDefault,defaultValue:"function"==typeof s.default?s.default:()=>s.default,...Ne(s)});class xs extends ge{_parse(e){const{ctx:s}=this._processInputParams(e),i={...s,common:{...s.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return ce(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ee(i.common.issues)},input:i.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ee(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}xs.create=(e,s)=>new xs({innerType:e,typeName:Es.ZodCatch,catchValue:"function"==typeof s.catch?s.catch:()=>s.catch,...Ne(s)});class bs extends ge{_parse(e){if(this._getType(e)!==Y.nan){const s=this._getOrReturnCtx(e);return re(s,{code:X.invalid_type,expected:Y.nan,received:s.parsedType}),ne}return{status:"valid",value:e.data}}}bs.create=e=>new bs({typeName:Es.ZodNaN,...Ne(e)});class Ds extends ge{_parse(e){const{ctx:s}=this._processInputParams(e),i=s.data;return this._def.type._parse({data:i,path:s.path,parent:s})}unwrap(){return this._def.type}}class Cs extends ge{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?ne:"dirty"===e.status?(s.dirty(),ae(e.value)):this._def.out._parseAsync({data:e.value,path:i.path,parent:i})})()}{const e=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?ne:"dirty"===e.status?(s.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:i.path,parent:i})}}static create(e,s){return new Cs({in:e,out:s,typeName:Es.ZodPipeline})}}class ys extends ge{_parse(e){const s=this._def.innerType._parse(e),i=e=>(me(e)&&(e.value=Object.freeze(e.value)),e);return ce(s)?s.then(e=>i(e)):i(s)}unwrap(){return this._def.innerType}}var Es,ks;ys.create=(e,s)=>new ys({innerType:e,typeName:Es.ZodReadonly,...Ne(s)}),(ks=Es||(Es={})).ZodString="ZodString",ks.ZodNumber="ZodNumber",ks.ZodNaN="ZodNaN",ks.ZodBigInt="ZodBigInt",ks.ZodBoolean="ZodBoolean",ks.ZodDate="ZodDate",ks.ZodSymbol="ZodSymbol",ks.ZodUndefined="ZodUndefined",ks.ZodNull="ZodNull",ks.ZodAny="ZodAny",ks.ZodUnknown="ZodUnknown",ks.ZodNever="ZodNever",ks.ZodVoid="ZodVoid",ks.ZodArray="ZodArray",ks.ZodObject="ZodObject",ks.ZodUnion="ZodUnion",ks.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ks.ZodIntersection="ZodIntersection",ks.ZodTuple="ZodTuple",ks.ZodRecord="ZodRecord",ks.ZodMap="ZodMap",ks.ZodSet="ZodSet",ks.ZodFunction="ZodFunction",ks.ZodLazy="ZodLazy",ks.ZodLiteral="ZodLiteral",ks.ZodEnum="ZodEnum",ks.ZodEffects="ZodEffects",ks.ZodNativeEnum="ZodNativeEnum",ks.ZodOptional="ZodOptional",ks.ZodNullable="ZodNullable",ks.ZodDefault="ZodDefault",ks.ZodCatch="ZodCatch",ks.ZodPromise="ZodPromise",ks.ZodBranded="ZodBranded",ks.ZodPipeline="ZodPipeline",ks.ZodReadonly="ZodReadonly";const As=$e.create;Qe.create,es.create;const Vs=is.create;rs.create,ns.create,as.create,us.create,vs.create,Ns.create,gs.create;const Us=Vs({firstName:As().min(1,"Prénom requis").max(50,"Prénom trop long"),lastName:As().min(1,"Nom requis").max(50,"Nom trop long"),email:As().email("Email invalide").min(1,"Email requis"),phoneNumber:As().optional().nullable().transform(e=>""===e?null:e),address:As().optional().nullable().transform(e=>""===e?null:e),vatNumber:As().optional().nullable().transform(e=>""===e?null:e),avatarUrl:As().url("URL d'avatar invalide").optional().nullable().transform(e=>""===e?null:e),roleId:As().uuid("ID de rôle invalide").min(1,"Rôle requis")}),_s=({open:e,onCancel:c,onSuccess:u,user:p,roles:v})=>{const[h]=n.useForm(),{api:N}=t(),[g,f]=i.useState(!1);r.useEffect(()=>{var e;p&&h.setFieldsValue({firstName:p.firstName,lastName:p.lastName,email:p.email,phoneNumber:p.phoneNumber,address:p.address,vatNumber:p.vatNumber,avatarUrl:p.avatarUrl,roleId:null==(e=p.organizationRole)?void 0:e.id})},[p,h]);return s.jsxDEV(a,{title:`Modifier l'utilisateur ${null==p?void 0:p.firstName} ${null==p?void 0:p.lastName}`,open:e,onCancel:c,footer:[s.jsxDEV(l,{onClick:c,children:"Annuler"},"back",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:157,columnNumber:9},void 0),s.jsxDEV(l,{type:"primary",loading:g,onClick:()=>h.submit(),children:"Mettre à jour"},"submit",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:160,columnNumber:9},void 0)],width:800,children:s.jsxDEV(n,{form:h,onFinish:async e=>{if(!p||!p.userOrganizationId)return void m.error("Impossible de trouver l'identifiant de l'utilisateur.");const s=Us.safeParse(e);if(s.success){f(!0);try{const e={firstName:s.data.firstName,lastName:s.data.lastName,email:s.data.email,phoneNumber:s.data.phoneNumber,address:s.data.address,vatNumber:s.data.vatNumber,avatarUrl:s.data.avatarUrl},i=await N.patch(`/users/${p.id}`,e),r={roleId:s.data.roleId},t=await N.patch(`/users/user-organizations/${p.userOrganizationId}`,r);(null==i?void 0:i.success)&&(null==t?void 0:t.success)?(m.success("Utilisateur mis à jour avec succès !"),u()):m.error("Erreur lors de la mise à jour de l'utilisateur")}catch(i){m.error("Erreur lors de la mise à jour de l'utilisateur")}finally{f(!1)}}else m.error("Données invalides: "+s.error.errors.map(e=>e.message).join(", "))},layout:"vertical",children:[s.jsxDEV(n.Item,{name:"firstName",label:"Prénom",rules:[{required:!0,message:"Veuillez saisir le prénom."},{max:50,message:"Le prénom ne peut pas dépasser 50 caractères."}],children:s.jsxDEV(o,{placeholder:"Prénom de l'utilisateur"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:175,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:167,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"lastName",label:"Nom de famille",rules:[{required:!0,message:"Veuillez saisir le nom de famille."},{max:50,message:"Le nom ne peut pas dépasser 50 caractères."}],children:s.jsxDEV(o,{placeholder:"Nom de famille de l'utilisateur"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:186,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:178,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"email",label:"Adresse email",rules:[{required:!0,message:"Veuillez saisir l'email."},{type:"email",message:"Veuillez saisir un email valide."}],children:s.jsxDEV(o,{placeholder:"email@example.com"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:197,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:189,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"phoneNumber",label:"Numéro de téléphone",children:s.jsxDEV(o,{placeholder:"+32 123 456 789"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:204,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:200,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"address",label:"Adresse complète",children:s.jsxDEV(o.TextArea,{placeholder:"Rue, ville, code postal, pays",rows:3},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:211,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:207,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"vatNumber",label:"Numéro de TVA",children:s.jsxDEV(o,{placeholder:"BE0123456789"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:221,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:217,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"avatarUrl",label:"URL de l'avatar",rules:[{type:"url",message:"Veuillez saisir une URL valide."}],children:s.jsxDEV(o,{placeholder:"https://example.com/avatar.jpg"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:231,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:224,columnNumber:9},void 0),s.jsxDEV(n.Item,{name:"roleId",label:"Rôle dans l'organisation",rules:[{required:!0,message:"Veuillez sélectionner un rôle."}],children:s.jsxDEV(d,{placeholder:"Sélectionner un rôle",children:v.map(e=>s.jsxDEV(d.Option,{value:e.id,children:e.label||e.name},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:241,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:239,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:234,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:166,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/EditUserModal.tsx",lineNumber:152,columnNumber:5},void 0)},Ss=({visible:e,onCancel:i,onSuccess:n,user:o})=>{const{api:g}=t(),[f,x]=m.useMessage(),[b,D]=r.useState([]),[C,y]=r.useState([]),[E,k]=r.useState([]),[A,V]=r.useState(!1),[U,_]=r.useState(!1),[S,M]=r.useState(""),[O,w]=r.useState(""),j=r.useCallback(()=>{_(!1),M(""),w(""),i()},[i]),R=r.useCallback(async()=>{V(!0);try{const e=await g.get(`/api/users/${o.id}/organizations`);e.success&&D(e.data)}catch{f.error("Erreur lors du chargement des organisations de l'utilisateur")}finally{V(!1)}},[g,o.id,f]),P=r.useCallback(async()=>{try{const e=await g.get("/api/organizations/active");e.success&&y(e.data)}catch{f.error("Erreur lors du chargement des organisations")}},[g,f]),I=r.useCallback(async()=>{try{const e=await g.get("/api/roles");e.success&&k(e.data)}catch{f.error("Erreur lors du chargement des rôles")}},[g,f]);r.useEffect(()=>{e&&o.id&&(R(),P(),I())},[e,o.id,R,P,I]);const T=r.useCallback(async()=>{if(S&&O)try{(await g.post("/api/users/user-organizations",{userId:o.id,organizationId:S,roleId:O})).success&&(f.success("Utilisateur ajouté à l'organisation avec succès"),M(""),w(""),_(!1),R(),n())}catch{f.error("Erreur lors de l'ajout à l'organisation")}else f.warning("Veuillez sélectionner une organisation et un rôle")},[g,R,f,n,S,O,o.id]),z=r.useCallback(async e=>{try{(await g.delete(`/api/users/user-organizations/${e}`)).success&&(f.success("Utilisateur retiré de l'organisation avec succès"),R(),n())}catch{f.error("Erreur lors du retrait de l'organisation")}},[g,R,f,n]),Z=r.useCallback(async(e,s)=>{try{(await g.patch(`/api/users/user-organizations/${e}`,{roleId:s})).success&&(f.success("Rôle modifié avec succès"),R(),n())}catch{f.error("Erreur lors de la modification du rôle")}},[g,R,f,n]),$=C.filter(e=>!b.some(s=>s.organizationId===e.id)),G=E.filter(e=>e.organizationId===S||null===e.organizationId),W=[{title:"Organisation",dataIndex:["Organization","name"],key:"organizationName"},{title:"Rôle",key:"role",render:(e,i)=>s.jsxDEV(d,{value:i.roleId,style:{width:150},onChange:e=>Z(i.id,e),options:E.filter(e=>e.organizationId===i.organizationId||null===e.organizationId).map(e=>({value:e.id,label:e.label||e.name}))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:190,columnNumber:9},void 0)},{title:"Statut",dataIndex:"status",key:"status",render:e=>s.jsxDEV(v,{color:"ACTIVE"===e?"green":"red",children:"ACTIVE"===e?"Actif":"Inactif"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:208,columnNumber:9},void 0)},{title:"Actions",key:"actions",render:(e,i)=>s.jsxDEV(h,{title:"Êtes-vous sûr de vouloir retirer cet utilisateur de cette organisation ?",onConfirm:()=>z(i.id),okText:"Oui",cancelText:"Annuler",disabled:b.length<=1,children:s.jsxDEV(l,{type:"text",danger:!0,icon:s.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:227,columnNumber:19},void 0),disabled:b.length<=1,title:b.length<=1?"Impossible de supprimer la dernière organisation":"Retirer de l'organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:224,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:217,columnNumber:9},void 0)}];return s.jsxDEV(a,{title:`Gestion des organisations - ${o.firstName} ${o.lastName}`,open:e,onCancel:j,footer:null,width:800,children:[x,s.jsxDEV("div",{style:{marginBottom:16},children:s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(c,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:248,columnNumber:17},void 0),onClick:()=>_(!0),disabled:0===$.length,children:"Ajouter à une organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:246,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:245,columnNumber:7},void 0),U&&s.jsxDEV("div",{style:{marginBottom:16,padding:16,border:"1px solid #d9d9d9",borderRadius:4},children:[s.jsxDEV("h4",{children:"Ajouter à une nouvelle organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:258,columnNumber:11},void 0),s.jsxDEV(u,{children:[s.jsxDEV(d,{placeholder:"Sélectionner une organisation",style:{width:200},value:S,onChange:e=>{M(e),w("")},options:$.map(e=>({value:e.id,label:e.name}))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:260,columnNumber:13},void 0),s.jsxDEV(d,{placeholder:"Sélectionner un rôle",style:{width:200},value:O,onChange:w,disabled:!S,options:G.map(e=>({value:e.id,label:e.label||e.name}))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:273,columnNumber:13},void 0),s.jsxDEV(l,{type:"primary",onClick:T,disabled:!S||!O,children:"Ajouter"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:284,columnNumber:13},void 0),s.jsxDEV(l,{onClick:()=>{_(!1),M(""),w("")},children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:287,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:259,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:257,columnNumber:9},void 0),s.jsxDEV(p,{columns:W,dataSource:b,loading:A,rowKey:"id",pagination:!1},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:298,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserOrganizationsModal.tsx",lineNumber:237,columnNumber:5},void 0)},{Text:Ms}=C,Os=({visible:i,onCancel:d,onSuccess:c,user:p})=>{var h,N,C,S;const{api:M}=t(),{user:O}=e(),[w]=n.useForm(),[j,R]=r.useState(!1),[P,I]=r.useState(!1),[T,z]=r.useState(null),Z=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"").trim(),$=r.useCallback((e,s,i)=>`${Z(e)}.${Z(s)}@${i}`,[]),G=r.useCallback(async()=>{var e,s;if(!p)return;const i=null==(s=null==(e=null==O?void 0:O.organizationRole)?void 0:e.role)?void 0:s.name;if(!i||!["admin","super_admin"].includes(i))return z({hasGoogleAccount:!1,email:null,isActivated:!1,lastSync:null,error:"Permissions insuffisantes"}),void I(!1);I(!0);try{const e=await M.get(`/google-workspace/users/${p.id}/status`);if(e.success)if(z(e.data),e.data.email)w.setFieldsValue({email:e.data.email,activateServices:e.data.isActivated});else{const e=await M.get(`/organizations/${p.organizationId||"current"}`);if(e.success&&e.data.googleWorkspaceDomain){const s=$(p.firstName,p.lastName,e.data.googleWorkspaceDomain);w.setFieldsValue({email:s,activateServices:!0}),z(i=>i?{...i,email:s,organizationDomain:e.data.googleWorkspaceDomain}:null)}}}catch{m.error("Erreur lors de la vérification du statut Google Workspace")}finally{I(!1)}},[p,M,w,$,null==(N=null==(h=null==O?void 0:O.organizationRole)?void 0:h.role)?void 0:N.name]);r.useEffect(()=>{i&&p&&G()},[i,p,G]);const W=()=>{w.resetFields(),z(null),d()};return s.jsxDEV(a,{title:s.jsxDEV(u,{children:[s.jsxDEV(V,{style:{color:"#4285F4"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:223,columnNumber:11},void 0),s.jsxDEV("span",{children:"Gestion Google Workspace"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:224,columnNumber:11},void 0),p&&s.jsxDEV(v,{color:"blue",children:[p.firstName," ",p.lastName]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:225,columnNumber:20},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:222,columnNumber:9},void 0),open:i,onCancel:W,footer:null,width:700,children:(null==(S=null==(C=null==O?void 0:O.organizationRole)?void 0:C.role)?void 0:S.name)&&["admin","super_admin"].includes(O.organizationRole.role.name)?P?s.jsxDEV("div",{style:{textAlign:"center",padding:"40px"},children:[s.jsxDEV(f,{size:"large"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:244,columnNumber:11},void 0),s.jsxDEV("div",{style:{marginTop:16},children:"Vérification du statut Google Workspace..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:245,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:243,columnNumber:9},void 0):s.jsxDEV(s.Fragment,{children:[T&&s.jsxDEV(x,{className:"mb-4",children:[s.jsxDEV(b,{gutter:16,children:[s.jsxDEV(D,{span:12,children:s.jsxDEV(u,{direction:"vertical",size:"small",children:[s.jsxDEV(Ms,{strong:!0,children:"Statut du compte"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:255,columnNumber:21},void 0),s.jsxDEV(u,{children:[T.hasGoogleAccount?s.jsxDEV(v,{color:"green",icon:s.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:258,columnNumber:50},void 0),children:"Compte créé"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:258,columnNumber:25},void 0):s.jsxDEV(v,{color:"orange",icon:s.jsxDEV(E,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:262,columnNumber:51},void 0),children:"Pas de compte"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:262,columnNumber:25},void 0),T.isActivated?s.jsxDEV(v,{color:"green",children:"Activé"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:267,columnNumber:25},void 0):s.jsxDEV(v,{color:"red",children:"Désactivé"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:269,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:256,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:254,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:253,columnNumber:17},void 0),s.jsxDEV(D,{span:12,children:s.jsxDEV(u,{direction:"vertical",size:"small",children:[s.jsxDEV(Ms,{strong:!0,children:"Email Google"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:276,columnNumber:21},void 0),s.jsxDEV(u,{children:[s.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:278,columnNumber:23},void 0),s.jsxDEV(Ms,{code:!0,children:T.email||"Non défini"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:279,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:277,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:275,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:274,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:252,columnNumber:15},void 0),T.organizationDomain&&s.jsxDEV(g,{message:`Domaine de l'organisation: ${T.organizationDomain}`,type:"info",style:{marginTop:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:286,columnNumber:17},void 0),T.lastSync&&s.jsxDEV("div",{style:{marginTop:16},children:s.jsxDEV(Ms,{type:"secondary",children:["Dernière synchronisation: ",new Date(T.lastSync).toLocaleString()]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:295,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:294,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:251,columnNumber:13},void 0),(!(null==T?void 0:T.hasGoogleAccount)||!(null==T?void 0:T.isActivated))&&s.jsxDEV(n,{form:w,layout:"vertical",onFinish:async e=>{if(p){R(!0);try{(await M.post("/google-workspace/users/create",{userId:p.id,email:e.email,activateServices:e.activateServices||!1})).success&&(m.success("Compte Google Workspace créé avec succès !"),await G(),c())}catch{m.error("Erreur lors de la création du compte Google Workspace")}finally{R(!1)}}},children:[s.jsxDEV(n.Item,{name:"email",label:"Adresse email Google Workspace",rules:[{required:!0,message:"L'adresse email est requise"},{type:"email",message:"Format d'email invalide"}],children:s.jsxDEV(o,{prefix:s.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:319,columnNumber:27},void 0),placeholder:"prenom.nom@organisation.be",disabled:j},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:318,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:310,columnNumber:15},void 0),s.jsxDEV(n.Item,{name:"activateServices",label:"Activer les services Google",valuePropName:"checked",children:s.jsxDEV(A,{checkedChildren:"Oui",unCheckedChildren:"Non",disabled:j},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:330,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:325,columnNumber:15},void 0),s.jsxDEV(g,{message:"Information",description:"La création du compte Google Workspace peut prendre quelques minutes. L'utilisateur recevra un email avec ses informations de connexion.",type:"info",style:{marginBottom:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:337,columnNumber:15},void 0),s.jsxDEV(u,{children:[s.jsxDEV(l,{type:"primary",htmlType:"submit",loading:j,icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:349,columnNumber:25},void 0),children:(null==T?void 0:T.hasGoogleAccount)?"Activer le compte":"Créer le compte"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:345,columnNumber:17},void 0),s.jsxDEV(l,{onClick:W,children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:353,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:344,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:305,columnNumber:13},void 0),(null==T?void 0:T.hasGoogleAccount)&&(null==T?void 0:T.isActivated)&&s.jsxDEV(u,{direction:"vertical",style:{width:"100%"},children:[s.jsxDEV(U,{children:"Actions disponibles"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:363,columnNumber:15},void 0),s.jsxDEV(b,{gutter:16,children:[s.jsxDEV(D,{span:8,children:s.jsxDEV(l,{block:!0,icon:s.jsxDEV(_,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:369,columnNumber:27},void 0),onClick:async()=>{if(p){R(!0);try{(await M.post(`/google-workspace/users/${p.id}/sync`)).success&&(m.success("Synchronisation réussie !"),await G())}catch{m.error("Erreur lors de la synchronisation")}finally{R(!1)}}},loading:j,children:"Synchroniser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:367,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:366,columnNumber:17},void 0),s.jsxDEV(D,{span:8,children:s.jsxDEV(l,{block:!0,danger:!0,icon:s.jsxDEV(E,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:380,columnNumber:27},void 0),onClick:async()=>{if(p){R(!0);try{(await M.post(`/google-workspace/users/${p.id}/deactivate`)).success&&(m.success("Compte Google Workspace désactivé"),await G())}catch{m.error("Erreur lors de la désactivation")}finally{R(!1)}}},loading:j,children:"Désactiver"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:377,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:376,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:365,columnNumber:15},void 0),T.services&&s.jsxDEV(x,{title:"Services Google activés",size:"small",style:{marginTop:16},children:s.jsxDEV(u,{wrap:!0,children:Object.entries(T.services).map(([e,i])=>s.jsxDEV(v,{color:i?"green":"default",icon:i?s.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:397,columnNumber:40},void 0):void 0,children:e.charAt(0).toUpperCase()+e.slice(1)},e,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:394,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:392,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:391,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:362,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:248,columnNumber:9},void 0):s.jsxDEV(g,{message:"Accès restreint",description:"Vous n'avez pas les permissions nécessaires pour gérer les comptes Google Workspace. Contactez un administrateur.",type:"warning",showIcon:!0,style:{margin:"20px 0"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:235,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserGoogleWorkspaceModal.tsx",lineNumber:220,columnNumber:5},void 0)},{Text:ws}=C,{Option:js}=d,Rs=({visible:e,onClose:i,user:c})=>{const{api:p}=t(),[h,N]=r.useState(!1),[b,D]=r.useState(null),[C,E]=r.useState([]),[k]=n.useForm(),V=r.useCallback(async()=>{var e,s,i,r,t;if(null==c?void 0:c.id){N(!0);try{const n=await p.get(`/services/telnyx/status/${c.id}`),a=await p.get("/telnyx/phone-numbers"),o={userId:c.id,isEnabled:(null==(e=n.data)?void 0:e.isEnabled)||!1,assignedNumber:null==(s=n.data)?void 0:s.assignedNumber,canMakeCalls:(null==(i=n.data)?void 0:i.canMakeCalls)||!1,canSendSms:(null==(r=n.data)?void 0:r.canSendSms)||!1,monthlyLimit:null==(t=n.data)?void 0:t.monthlyLimit};D(o),E(a.data||[]),k.setFieldsValue({isEnabled:o.isEnabled,assignedNumber:o.assignedNumber,canMakeCalls:o.canMakeCalls,canSendSms:o.canSendSms,monthlyLimit:o.monthlyLimit})}catch(n){m.error("Erreur lors du chargement de la configuration")}finally{N(!1)}}},[null==c?void 0:c.id,p,k]);r.useEffect(()=>{e&&(null==c?void 0:c.id)&&V()},[e,null==c?void 0:c.id,V]);const _=C.filter(e=>!e.assigned_user_id&&"active"===e.status),j=C.find(e=>e.assigned_user_id===(null==c?void 0:c.id));return s.jsxDEV(a,{title:s.jsxDEV(u,{children:[s.jsxDEV(w,{style:{color:"#FF6B6B"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:166,columnNumber:11},void 0),"Configuration Telnyx - ",null==c?void 0:c.firstName," ",null==c?void 0:c.lastName]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:165,columnNumber:9},void 0),open:e,onCancel:i,width:700,footer:null,children:s.jsxDEV(f,{spinning:h,children:s.jsxDEV(n,{form:k,layout:"vertical",onFinish:async e=>{if(null==c?void 0:c.id)try{N(!0),e.isEnabled?await p.post(`/services/telnyx/enable/${c.id}`):await p.post(`/services/telnyx/disable/${c.id}`),await p.post("/telnyx/user-config",{userId:c.id,assignedNumber:e.assignedNumber,canMakeCalls:e.canMakeCalls,canSendSms:e.canSendSms,monthlyLimit:e.monthlyLimit}),m.success("Configuration Telnyx mise à jour"),i()}catch(s){m.error("Erreur lors de la sauvegarde")}finally{N(!1)}},initialValues:{isEnabled:!1,canMakeCalls:!0,canSendSms:!0},children:[s.jsxDEV(x,{size:"small",style:{marginBottom:16},children:s.jsxDEV(u,{children:[s.jsxDEV(S,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:189,columnNumber:15},void 0),s.jsxDEV("div",{children:[s.jsxDEV(ws,{strong:!0,children:[null==c?void 0:c.firstName," ",null==c?void 0:c.lastName]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:191,columnNumber:17},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:192,columnNumber:17},void 0),s.jsxDEV(ws,{type:"secondary",children:null==c?void 0:c.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:193,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:190,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:188,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:187,columnNumber:11},void 0),s.jsxDEV(x,{title:"📞 Activation Telnyx",size:"small",style:{marginBottom:16},children:[s.jsxDEV(n.Item,{name:"isEnabled",valuePropName:"checked",style:{marginBottom:0},children:s.jsxDEV(A,{checkedChildren:s.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:206,columnNumber:34},void 0),unCheckedChildren:s.jsxDEV(M,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:207,columnNumber:36},void 0),style:{marginRight:8}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:205,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:200,columnNumber:13},void 0),s.jsxDEV(g,{message:"Activation du service Telnyx",description:"Active ou désactive l'accès aux fonctionnalités Telnyx pour cet utilisateur.",type:"info",showIcon:!0,style:{marginTop:12}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:212,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:199,columnNumber:11},void 0),s.jsxDEV(x,{title:"📱 Attribution de numéro",size:"small",style:{marginBottom:16},children:[s.jsxDEV(n.Item,{name:"assignedNumber",label:"Numéro assigné",help:"Sélectionnez un numéro disponible ou laissez vide pour utiliser les numéros partagés",children:s.jsxDEV(d,{placeholder:"Sélectionner un numéro (optionnel)",allowClear:!0,style:{width:"100%"},children:[j&&s.jsxDEV(js,{value:j.phone_number,disabled:!0,children:s.jsxDEV(u,{children:[s.jsxDEV(v,{color:"blue",children:"Assigné"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:236,columnNumber:23},void 0),j.phone_number]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:235,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:234,columnNumber:19},void 0),_.map(e=>s.jsxDEV(js,{value:e.phone_number,children:s.jsxDEV(u,{children:[s.jsxDEV(v,{color:"green",children:"Disponible"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:244,columnNumber:23},void 0),e.phone_number,s.jsxDEV(ws,{type:"secondary",children:["(",e.number_type,")"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:246,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:243,columnNumber:21},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:242,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:228,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:223,columnNumber:13},void 0),0===_.length&&!j&&s.jsxDEV(g,{message:"Aucun numéro disponible",description:"Tous les numéros de l'organisation sont déjà assignés. L'utilisateur utilisera les numéros partagés.",type:"warning",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:254,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:222,columnNumber:11},void 0),s.jsxDEV(x,{title:"🔐 Permissions",size:"small",style:{marginBottom:16},children:[s.jsxDEV(n.Item,{name:"canMakeCalls",valuePropName:"checked",style:{marginBottom:12},children:s.jsxDEV(u,{children:[s.jsxDEV(A,{size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:271,columnNumber:17},void 0),s.jsxDEV(ws,{children:"Autoriser les appels sortants"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:272,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:270,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:265,columnNumber:13},void 0),s.jsxDEV(n.Item,{name:"canSendSms",valuePropName:"checked",style:{marginBottom:12},children:s.jsxDEV(u,{children:[s.jsxDEV(A,{size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:282,columnNumber:17},void 0),s.jsxDEV(ws,{children:"Autoriser l'envoi de SMS"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:283,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:281,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:276,columnNumber:13},void 0),s.jsxDEV(U,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:287,columnNumber:13},void 0),s.jsxDEV(n.Item,{name:"monthlyLimit",label:"Limite mensuelle (USD)",help:"Limite de dépenses mensuelles pour cet utilisateur (optionnel)",children:s.jsxDEV(o,{type:"number",placeholder:"Ex: 50",prefix:"$",style:{width:150}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:294,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:289,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:264,columnNumber:11},void 0),(null==b?void 0:b.isEnabled)&&s.jsxDEV(g,{message:"Service activé",description:"Cet utilisateur a accès aux fonctionnalités Telnyx. Il peut maintenant utiliser les appels et SMS depuis le CRM.",type:"success",showIcon:!0,style:{marginBottom:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:305,columnNumber:13},void 0),s.jsxDEV("div",{style:{textAlign:"right"},children:s.jsxDEV(u,{children:[s.jsxDEV(l,{onClick:i,children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:317,columnNumber:15},void 0),s.jsxDEV(l,{type:"primary",htmlType:"submit",icon:s.jsxDEV(O,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:323,columnNumber:23},void 0),loading:h,children:"Sauvegarder"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:320,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:316,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:315,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:176,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:175,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/admin/UserTelnyxModal.tsx",lineNumber:163,columnNumber:5},void 0)},Ps=()=>{const{api:i}=t(),[n,a]=m.useMessage(),{permissions:d,currentOrganization:c}=e(),g=r.useCallback(e=>d.includes(e),[d]),f=j.useBreakpoint(),E=!f.md,_=!!f.md&&!f.lg,[M,O]=r.useState([]),[K,J]=r.useState([]),[H,Y]=r.useState([]),[Q,X]=r.useState([]),[ee,se]=r.useState({}),[ie,re]=r.useState(!0),[te,ne]=r.useState("users"),[ae,oe]=r.useState(""),[de,le]=r.useState(!1),[me,ce]=r.useState(!1),[ue,pe]=r.useState(!1),[ve,he]=r.useState(!1),[Ne,ge]=r.useState(!1),[fe,xe]=r.useState(null),be=r.useMemo(()=>i,[i]),De=r.useMemo(()=>ae.trim().toLowerCase(),[ae]),Ce=r.useCallback(e=>{var s,i;if(!De)return!0;return[e.email,e.firstName,e.firstname,e.lastName,e.lastname,null==(s=e.organizationRole)?void 0:s.name,null==(i=e.organizationRole)?void 0:i.label].filter(Boolean).map(e=>String(e).toLowerCase()).some(e=>e.includes(De))},[De]);r.useMemo(()=>De?M.filter(Ce):M,[M,De,Ce]),r.useMemo(()=>De?K.filter(e=>Ce(e)):K,[K,De,Ce]),r.useMemo(()=>De?H.filter(e=>e.email.toLowerCase().includes(De)):H,[H,De]);const ye=r.useCallback(async()=>{try{const e=await be.get("/api/users"),s=e=>e.map(e=>{const s=Array.isArray(e.UserOrganization)?(null==c?void 0:c.id)&&"all"!==c.id&&e.UserOrganization.find(e=>e.organizationId===c.id)||e.UserOrganization[0]:void 0;return{...e,key:e.id,organizationId:null==s?void 0:s.organizationId,organizationRole:null==s?void 0:s.Role,userOrganizationId:null==s?void 0:s.id,status:(null==s?void 0:s.status)||"INACTIVE"}});let i=[];if((null==e?void 0:e.success)&&Array.isArray(e.data)?i=s(e.data):Array.isArray(e)&&(i=s(e)),O(i),i.length>0){const e=i.map(e=>e.id),s=await be.post("/api/services/status/bulk",{userIds:e});s.success&&se(s.data)}}catch{n.error("Erreur lors de la récupération des utilisateurs.")}},[be,n,null==c?void 0:c.id]),Ee=r.useCallback(async()=>{try{const e=await be.get("/api/users/free");(null==e?void 0:e.success)&&Array.isArray(e.data)&&J(e.data)}catch{n.error("Erreur lors de la récupération des utilisateurs libres.")}},[be,n]),ke=r.useCallback(async()=>{try{const e=await be.get("/api/users/invitations");(null==e?void 0:e.success)&&Array.isArray(e.data)&&Y(e.data)}catch{n.error("Erreur lors de la récupération des invitations.")}},[be,n]),Ae=r.useCallback(async()=>{try{const e=await be.get("/api/roles?organizationId=current");(null==e?void 0:e.success)&&Array.isArray(e.data)?X(e.data):Array.isArray(e)&&X(e)}catch{n.error("Erreur lors de la récupération des rôles.")}},[be,n]),Ve=r.useCallback(async()=>{re(!0);try{await Promise.all([ye(),Ee(),ke(),Ae()])}finally{re(!1)}},[ye,Ee,ke,Ae]);r.useEffect(()=>{Ve()},[Ve]);const Ue=async(e,s,r)=>{const t=r?`/services/${s}/disable/${e}`:`/services/${s}/enable/${e}`;try{(await i.post(t)).success&&(n.success(`Service ${s} mis à jour.`),await Ve())}catch{}},_e=async(e,s)=>{if(e.userOrganizationId)try{(await i.patch(`/api/users/user-organizations/${e.userOrganizationId}`,{status:s})).success&&(n.success(`Utilisateur ${"ACTIVE"===s?"réactivé":"désactivé"}.`),await Ve())}catch{}else n.error("ID de relation manquant, impossible de changer le statut.")},Se=e=>{xe(e),ce(!0)},Me=e=>{xe(e),pe(!0)},Oe=e=>{xe(e),he(!0)},we=e=>{xe(e),ge(!0)},je=async e=>{var s,i;try{await be.delete(`/api/users/${e.id}`),n.success(`Utilisateur ${e.email} supprimé avec succès`),await Ve()}catch(r){const e=(null==(i=null==(s=r.response)?void 0:s.data)?void 0:i.message)??"Erreur lors de la suppression de l'utilisateur";n.error(e)}},Re=()=>{ce(!1),pe(!1),he(!1),xe(null),Ve()},Pe=async(e,s="super_admin")=>{try{if(!(null==c?void 0:c.id)||"all"===c.id)return void n.error("Organisation courante non définie.");const i=Q.find(e=>{var i,r,t,n;return(null==(r=null==(i=e.name)?void 0:i.toLowerCase)?void 0:r.call(i))===s.toLowerCase()||(null==(n=null==(t=e.label)?void 0:t.toLowerCase)?void 0:n.call(t))===s.toLowerCase()});if(!i)return void n.error(`Rôle ${s} introuvable pour cette organisation.`);const r={userId:e.id,organizationId:c.id,roleId:i.id},t=await be.post("/api/users/user-organizations",r);(null==t?void 0:t.success)&&(n.success(`${e.email} ajouté à l'organisation en ${s}.`),await Ve())}catch(i){n.error("Impossible d'ajouter l'utilisateur à l'organisation.")}},Ie=async e=>{try{(await be.post(`/api/users/invitations/${e.id}/force-accept`)).success&&(n.success(`Invitation acceptée automatiquement pour ${e.email}`),await Ve())}catch{}},Te=async e=>{try{(await be.delete(`/api/users/invitations/${e.id}`)).success&&(n.success(`Invitation pour ${e.email} supprimée avec succès`),await Ve())}catch{}},ze=[{title:"Nom",dataIndex:"lastName",key:"lastName",sorter:(e,s)=>e.lastName.localeCompare(s.lastName)},{title:"Prénom",dataIndex:"firstName",key:"firstName",sorter:(e,s)=>e.firstName.localeCompare(s.firstName)},{title:"Email",dataIndex:"email",key:"email"},{title:"Rôle",dataIndex:["organizationRole","name"],key:"role"},{title:"Statut",dataIndex:"status",key:"status",render:(e,i)=>{const r="ACTIVE"===e;return s.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsxDEV(v,{color:r?"green":"red",children:r?"Actif":"Inactif"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:376,columnNumber:13},void 0),s.jsxDEV(A,{checked:r,onChange:e=>_e(i,e?"ACTIVE":"INACTIVE"),disabled:!i.userOrganizationId,size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:379,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:375,columnNumber:11},void 0)}},{title:"Services",key:"services",render:(e,i)=>{const r=ee[i.id]||[],t=r.find(e=>"email"===e.serviceName),n=r.find(e=>"telnyx"===e.serviceName);return s.jsxDEV(u,{children:[s.jsxDEV(F,{title:"Email "+((null==t?void 0:t.isActive)?"activé":"désactivé"),children:s.jsxDEV(A,{checked:(null==t?void 0:t.isActive)||!1,onChange:e=>Ue(i.id,"email",!e),size:"small",checkedChildren:s.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:404,columnNumber:34},void 0),unCheckedChildren:s.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:405,columnNumber:36},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:400,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:399,columnNumber:13},void 0),s.jsxDEV(F,{title:"Telnyx "+((null==n?void 0:n.isActive)?"activé":"désactivé"),children:s.jsxDEV(A,{checked:(null==n?void 0:n.isActive)||!1,onChange:e=>Ue(i.id,"telnyx",!e),size:"small",checkedChildren:s.jsxDEV(w,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:413,columnNumber:34},void 0),unCheckedChildren:s.jsxDEV(w,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:414,columnNumber:36},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:409,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:408,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:398,columnNumber:11},void 0)}},{title:"Actions",key:"actions",render:(e,i)=>{var r,t,n;return s.jsxDEV(u,{children:[!i.userOrganizationId&&(null==c?void 0:c.id)&&"all"!==c.id&&g("super_admin")&&s.jsxDEV(F,{title:"Ajouter à l'organisation (super_admin)",children:s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(R,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:429,columnNumber:44},void 0),onClick:()=>Pe(i)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:429,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:428,columnNumber:13},void 0),(g("admin")||g("super_admin"))&&s.jsxDEV(F,{title:"Modifier",children:s.jsxDEV(l,{icon:s.jsxDEV(W,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:434,columnNumber:29},void 0),onClick:()=>Se(i)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:434,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:433,columnNumber:13},void 0),i.organizationId&&(null==(n=null==(t=null==(r=i.UserOrganization)?void 0:r[0])?void 0:t.Organization)?void 0:n.googleWorkspaceConfig)&&(g("super_admin")||g("admin"))&&s.jsxDEV(F,{title:"Google Workspace",children:s.jsxDEV(l,{icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:441,columnNumber:23},void 0),onClick:()=>Oe(i),style:{color:"#4285F4"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:440,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:439,columnNumber:13},void 0),i.organizationId&&(g("super_admin")||g("admin"))&&s.jsxDEV(F,{title:"Telnyx",children:s.jsxDEV(l,{icon:s.jsxDEV(w,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:450,columnNumber:23},void 0),onClick:()=>we(i),style:{color:"#FF6B6B"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:449,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:448,columnNumber:13},void 0),g("super_admin")&&s.jsxDEV(F,{title:"Gérer les organisations",children:s.jsxDEV(l,{icon:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:458,columnNumber:29},void 0),onClick:()=>Me(i)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:458,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:457,columnNumber:13},void 0),g("super_admin")&&s.jsxDEV(h,{title:"Supprimer l'utilisateur",description:`Êtes-vous sûr de vouloir supprimer ${i.email} ? Cette action est irréversible.`,onConfirm:()=>je(i),okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},children:s.jsxDEV(F,{title:"Supprimer l'utilisateur",children:s.jsxDEV(l,{icon:s.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:471,columnNumber:31},void 0),danger:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:471,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:470,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:462,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:425,columnNumber:9},void 0)}}],Ze=[{title:"Nom",dataIndex:"lastName",key:"lastName"},{title:"Prénom",dataIndex:"firstName",key:"firstName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Date inscription",dataIndex:"createdAt",key:"createdAt",render:e=>new Date(e).toLocaleDateString()},{title:"Actions",key:"actions",render:(e,i)=>s.jsxDEV(u,{children:[(null==c?void 0:c.id)&&"all"!==c.id&&g("super_admin")&&s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(R,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:494,columnNumber:21},void 0),onClick:()=>Pe(i),children:"Ajouter à l'organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:492,columnNumber:13},void 0),g("super_admin")&&s.jsxDEV(h,{title:"Supprimer l'utilisateur",description:`Êtes-vous sûr de vouloir supprimer ${i.email} ? Cette action est irréversible.`,onConfirm:()=>je(i),okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},children:s.jsxDEV(F,{title:"Supprimer l'utilisateur",children:s.jsxDEV(l,{icon:s.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:510,columnNumber:31},void 0),danger:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:510,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:509,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:501,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:490,columnNumber:9},void 0)}],$e=[{title:"Email",dataIndex:"email",key:"email"},{title:"Organisation",dataIndex:["organization","name"],key:"organization"},{title:"Rôle",dataIndex:["role","name"],key:"role"},{title:"Statut",dataIndex:"status",key:"status",render:e=>s.jsxDEV(v,{color:"PENDING"===e?"orange":"red",children:e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:524,columnNumber:88},void 0)},{title:"Date création",dataIndex:"createdAt",key:"createdAt",render:e=>new Date(e).toLocaleDateString()},{title:"Expire le",dataIndex:"expiresAt",key:"expiresAt",render:e=>new Date(e).toLocaleDateString()},{title:"Actions",key:"actions",render:(e,i)=>s.jsxDEV(u,{children:[s.jsxDEV(F,{title:"Accepter automatiquement",children:s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(B,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:535,columnNumber:21},void 0),onClick:()=>Ie(i),disabled:"PENDING"!==i.status,children:"Force Accept"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:533,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:532,columnNumber:11},void 0),s.jsxDEV(F,{title:"Renvoyer l'invitation",children:s.jsxDEV(l,{icon:s.jsxDEV(G,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:543,columnNumber:27},void 0),disabled:"PENDING"!==i.status,children:"Renvoyer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:543,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:542,columnNumber:11},void 0),s.jsxDEV(h,{title:"Supprimer l'invitation",description:"Êtes-vous sûr de vouloir supprimer cette invitation ?",onConfirm:()=>Te(i),okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},children:s.jsxDEV(F,{title:"Supprimer l'invitation",children:s.jsxDEV(l,{icon:s.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:556,columnNumber:29},void 0),danger:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:556,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:555,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:547,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:531,columnNumber:9},void 0)}],{Title:Ge,Text:We}=C;return s.jsxDEV("div",{style:{padding:E?"12px":"24px",display:"flex",flexDirection:"column",gap:E?16:24},children:[a,s.jsxDEV("div",{className:"mb-6",children:[s.jsxDEV("div",{style:{display:"flex",flexDirection:E?"column":"row",alignItems:E?"stretch":"center",justifyContent:"space-between",gap:E?12:16,marginBottom:16},children:[s.jsxDEV(Ge,{level:2,style:{margin:0,display:"flex",alignItems:"center"},children:[s.jsxDEV(S,{style:{marginRight:12,color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:866,columnNumber:13},void 0),"Gestion des Utilisateurs"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:865,columnNumber:11},void 0),s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(R,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:871,columnNumber:19},void 0),onClick:()=>le(!0),size:E?"middle":"large",block:E,children:"Inviter un utilisateur"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:869,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:855,columnNumber:9},void 0),s.jsxDEV(o,{allowClear:!0,value:ae,onChange:e=>oe(e.target.value),placeholder:"Rechercher un utilisateur, un email ou un rôle",prefix:s.jsxDEV(P,{style:{color:"#93a3aa"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:885,columnNumber:19},void 0),size:E?"middle":"large",style:{width:"100%",maxWidth:E?"100%":360,marginBottom:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:880,columnNumber:9},void 0),s.jsxDEV(b,{gutter:[16,16],style:{marginBottom:16},children:[s.jsxDEV(D,{xs:24,sm:12,lg:6,children:s.jsxDEV(x,{children:s.jsxDEV(I,{title:"Total Utilisateurs",value:M.length,prefix:s.jsxDEV(S,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:897,columnNumber:25},void 0),valueStyle:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:894,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:893,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:892,columnNumber:11},void 0),s.jsxDEV(D,{xs:24,sm:12,lg:6,children:s.jsxDEV(x,{children:s.jsxDEV(I,{title:"Utilisateurs Actifs",value:M.filter(e=>"ACTIVE"===e.status).length,prefix:s.jsxDEV(y,{style:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:907,columnNumber:25},void 0),valueStyle:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:904,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:903,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:902,columnNumber:11},void 0),s.jsxDEV(D,{xs:24,sm:12,lg:6,children:s.jsxDEV(x,{children:s.jsxDEV(I,{title:"Invitations En Attente",value:H.length,prefix:s.jsxDEV(T,{style:{color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:917,columnNumber:25},void 0),valueStyle:{color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:914,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:913,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:912,columnNumber:11},void 0),s.jsxDEV(D,{xs:24,sm:12,lg:6,children:s.jsxDEV(x,{children:s.jsxDEV(I,{title:"Utilisateurs Libres",value:K.length,prefix:s.jsxDEV(z,{style:{color:"#722ed1"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:927,columnNumber:25},void 0),valueStyle:{color:"#722ed1"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:924,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:923,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:922,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:891,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:854,columnNumber:7},void 0),s.jsxDEV(Z,{activeKey:te,onChange:ne,type:E?"line":"card",tabBarGutter:E?8:24,items:[{key:"users",label:s.jsxDEV("span",{children:[s.jsxDEV(z,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:945,columnNumber:17},void 0),"Utilisateurs (",M.length,")"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:944,columnNumber:15},void 0),children:E?M.length?s.jsxDEV(u,{direction:"vertical",size:12,style:{width:"100%"},children:M.map(e=>{var i,r,t,n,a;const o=ee[e.id]||[],d=o.find(e=>"email"===e.serviceName),m=o.find(e=>"telnyx"===e.serviceName),p="ACTIVE"===e.status,f=!e.userOrganizationId&&(null==c?void 0:c.id)&&"all"!==c.id&&g("super_admin"),b=g("admin")||g("super_admin"),D=g("super_admin"),C=Boolean(e.organizationId&&(null==(t=null==(r=null==(i=e.UserOrganization)?void 0:i[0])?void 0:r.Organization)?void 0:t.googleWorkspaceConfig)&&(g("super_admin")||g("admin"))),y=Boolean(e.organizationId&&(g("super_admin")||g("admin"))),E=`${e.firstName||""} ${e.lastName||""}`.trim();return s.jsxDEV(x,{size:"small",styles:{body:{padding:16}},children:s.jsxDEV(u,{direction:"vertical",size:12,style:{width:"100%"},children:[s.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsxDEV(We,{strong:!0,style:{fontSize:16},children:E||e.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:583,columnNumber:13},void 0),s.jsxDEV(We,{type:"secondary",children:e.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:584,columnNumber:13},void 0),s.jsxDEV(u,{size:[8,8],wrap:!0,children:[(null==(n=e.organizationRole)?void 0:n.name)&&s.jsxDEV(v,{color:"geekblue",children:e.organizationRole.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:587,columnNumber:17},void 0),(null==(a=e.organizationRole)?void 0:a.label)&&e.organizationRole.label!==e.organizationRole.name&&s.jsxDEV(v,{color:"blue",children:e.organizationRole.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:590,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:585,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:582,columnNumber:11},void 0),s.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[s.jsxDEV(v,{color:p?"green":"red",style:{margin:0},children:p?"Actif":"Inactif"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:596,columnNumber:13},void 0),s.jsxDEV(u,{size:8,align:"center",children:[s.jsxDEV(We,{type:"secondary",children:"Statut"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:600,columnNumber:15},void 0),s.jsxDEV(A,{size:"small",checked:p,onChange:s=>_e(e,s?"ACTIVE":"INACTIVE"),disabled:!e.userOrganizationId},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:601,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:599,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:595,columnNumber:11},void 0),s.jsxDEV(U,{style:{margin:0}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:610,columnNumber:11},void 0),s.jsxDEV(u,{direction:"vertical",size:8,style:{width:"100%"},children:[s.jsxDEV(We,{type:"secondary",children:"Services"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:613,columnNumber:13},void 0),s.jsxDEV(u,{size:[12,8],wrap:!0,style:{width:"100%"},children:[s.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsxDEV(A,{size:"small",checked:(null==d?void 0:d.isActive)||!1,onChange:()=>Ue(e.id,"email",(null==d?void 0:d.isActive)||!1),checkedChildren:s.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:620,columnNumber:36},void 0),unCheckedChildren:s.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:621,columnNumber:38},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:616,columnNumber:17},void 0),s.jsxDEV(We,{children:"Email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:623,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:615,columnNumber:15},void 0),s.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsxDEV(A,{size:"small",checked:(null==m?void 0:m.isActive)||!1,onChange:()=>Ue(e.id,"telnyx",(null==m?void 0:m.isActive)||!1),checkedChildren:s.jsxDEV(w,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:630,columnNumber:36},void 0),unCheckedChildren:s.jsxDEV(w,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:631,columnNumber:38},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:626,columnNumber:17},void 0),s.jsxDEV(We,{children:"Telnyx"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:633,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:625,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:614,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:612,columnNumber:11},void 0),s.jsxDEV(U,{style:{margin:0}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:638,columnNumber:11},void 0),s.jsxDEV(u,{direction:"vertical",size:8,style:{width:"100%"},children:[s.jsxDEV(We,{type:"secondary",children:"Actions"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:641,columnNumber:13},void 0),s.jsxDEV(u,{size:[12,12],wrap:!0,style:{width:"100%"},children:[f&&s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(R,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:647,columnNumber:25},void 0),onClick:()=>Pe(e),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Ajouter à l'organisation"},"add-org",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:644,columnNumber:17},void 0),b&&s.jsxDEV(l,{icon:s.jsxDEV(W,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:658,columnNumber:25},void 0),onClick:()=>Se(e),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Modifier"},"edit",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:656,columnNumber:17},void 0),C&&s.jsxDEV(l,{icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:669,columnNumber:25},void 0),onClick:()=>Oe(e),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8,color:"#4285F4"},children:"Google Workspace"},"google",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:667,columnNumber:17},void 0),y&&s.jsxDEV(l,{icon:s.jsxDEV(w,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:680,columnNumber:25},void 0),onClick:()=>we(e),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8,color:"#FF6B6B"},children:"Telnyx"},"telnyx",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:678,columnNumber:17},void 0),D&&s.jsxDEV(l,{icon:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:691,columnNumber:25},void 0),onClick:()=>Me(e),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Gérer les organisations"},"organizations",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:689,columnNumber:17},void 0),D&&s.jsxDEV(h,{title:"Supprimer l'utilisateur",description:`Êtes-vous sûr de vouloir supprimer ${e.email} ? Cette action est irréversible.`,onConfirm:()=>je(e),okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},children:s.jsxDEV(l,{danger:!0,icon:s.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:711,columnNumber:27},void 0),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Supprimer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:709,columnNumber:19},void 0)},"delete",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:700,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:642,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:640,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:581,columnNumber:9},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:580,columnNumber:7},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:951,columnNumber:17},void 0):s.jsxDEV(x,{children:s.jsxDEV($,{description:"Aucun utilisateur",image:$.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:956,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:955,columnNumber:17},void 0):s.jsxDEV(x,{children:s.jsxDEV(p,{columns:ze,dataSource:M,loading:ie,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,responsive:!0},size:_?"small":"middle",scroll:_?{x:1e3}:void 0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:961,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:960,columnNumber:15},void 0)},{key:"free-users",label:s.jsxDEV("span",{children:[s.jsxDEV(R,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:977,columnNumber:17},void 0),"Utilisateurs libres (",K.length,")"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:976,columnNumber:15},void 0),children:E?K.length?s.jsxDEV(u,{direction:"vertical",size:12,style:{width:"100%"},children:K.map(e=>{const i=(null==c?void 0:c.id)&&"all"!==c.id&&g("super_admin"),r=g("super_admin"),t=`${e.firstName||""} ${e.lastName||""}`.trim();return s.jsxDEV(x,{size:"small",styles:{body:{padding:16}},children:s.jsxDEV(u,{direction:"vertical",size:12,style:{width:"100%"},children:[s.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[s.jsxDEV(We,{strong:!0,children:t||e.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:735,columnNumber:13},void 0),s.jsxDEV(We,{type:"secondary",children:e.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:736,columnNumber:13},void 0),e.createdAt&&s.jsxDEV(We,{type:"secondary",children:["Inscrit le ",new Date(e.createdAt).toLocaleDateString()]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:738,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:734,columnNumber:11},void 0),s.jsxDEV(u,{direction:"vertical",size:8,style:{width:"100%"},children:[i&&s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(R,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:746,columnNumber:23},void 0),onClick:()=>Pe(e),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Ajouter à l'organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:744,columnNumber:15},void 0),r&&s.jsxDEV(h,{title:"Supprimer l'utilisateur",description:`Êtes-vous sûr de vouloir supprimer ${e.email} ? Cette action est irréversible.`,onConfirm:()=>je(e),okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},children:s.jsxDEV(l,{danger:!0,icon:s.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:765,columnNumber:25},void 0),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Supprimer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:763,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:755,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:742,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:733,columnNumber:9},void 0)},`free-${e.id}`,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:732,columnNumber:7},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:983,columnNumber:17},void 0):s.jsxDEV(x,{children:s.jsxDEV($,{description:"Aucun utilisateur libre",image:$.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:988,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:987,columnNumber:17},void 0):s.jsxDEV(x,{children:[s.jsxDEV("div",{style:{marginBottom:16},children:s.jsxDEV(v,{color:"blue",children:"Ces utilisateurs se sont inscrits librement et n'appartiennent à aucune organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:994,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:993,columnNumber:17},void 0),s.jsxDEV(p,{columns:Ze,dataSource:K,loading:ie,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,responsive:!0},size:_?"small":"middle",scroll:_?{x:900}:void 0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:998,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:992,columnNumber:15},void 0)},{key:"invitations",label:s.jsxDEV("span",{children:[s.jsxDEV(G,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1014,columnNumber:17},void 0),"Invitations (",H.length,")"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1013,columnNumber:15},void 0),children:E?H.length?s.jsxDEV(u,{direction:"vertical",size:12,style:{width:"100%"},children:H.map(e=>{var i,r;return s.jsxDEV(x,{size:"small",styles:{body:{padding:16}},children:s.jsxDEV(u,{direction:"vertical",size:12,style:{width:"100%"},children:[s.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[s.jsxDEV(We,{strong:!0,children:e.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:783,columnNumber:11},void 0),(null==(i=e.organization)?void 0:i.name)&&s.jsxDEV(We,{type:"secondary",children:["Organisation : ",e.organization.name]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:785,columnNumber:13},void 0),(null==(r=e.role)?void 0:r.name)&&s.jsxDEV(We,{type:"secondary",children:["Rôle : ",e.role.name]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:788,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:782,columnNumber:9},void 0),s.jsxDEV(u,{size:8,align:"center",wrap:!0,children:[s.jsxDEV(v,{color:"PENDING"===e.status?"orange":"red",children:e.status},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:793,columnNumber:11},void 0),s.jsxDEV(We,{type:"secondary",children:["Créée le ",new Date(e.createdAt).toLocaleDateString()]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:794,columnNumber:11},void 0),e.expiresAt&&s.jsxDEV(We,{type:"secondary",children:["Expire le ",new Date(e.expiresAt).toLocaleDateString()]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:796,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:792,columnNumber:9},void 0),s.jsxDEV(u,{direction:"vertical",size:8,style:{width:"100%"},children:[s.jsxDEV(l,{type:"primary",icon:s.jsxDEV(B,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:803,columnNumber:19},void 0),onClick:()=>Ie(e),block:!0,disabled:"PENDING"!==e.status,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Force Accept"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:801,columnNumber:11},void 0),s.jsxDEV(l,{icon:s.jsxDEV(G,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:812,columnNumber:19},void 0),disabled:"PENDING"!==e.status,block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Renvoyer l'invitation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:811,columnNumber:11},void 0),s.jsxDEV(h,{title:"Supprimer l'invitation",description:"Êtes-vous sûr de vouloir supprimer cette invitation ?",onConfirm:()=>Te(e),okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},children:s.jsxDEV(l,{danger:!0,icon:s.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:829,columnNumber:21},void 0),block:!0,style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},children:"Supprimer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:827,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:819,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:800,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:781,columnNumber:7},void 0)},`invite-${e.id}`,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:780,columnNumber:5},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1020,columnNumber:17},void 0):s.jsxDEV(x,{children:s.jsxDEV($,{description:"Aucune invitation",image:$.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1025,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1024,columnNumber:17},void 0):s.jsxDEV(x,{children:s.jsxDEV(p,{columns:$e,dataSource:H,loading:ie,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,responsive:!0},size:_?"small":"middle",scroll:_?{x:800}:void 0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1030,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1029,columnNumber:15},void 0)}]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:935,columnNumber:7},void 0),s.jsxDEV(q,{visible:de,onCancel:()=>le(!1),onSuccess:()=>{le(!1),Ve()},roles:Q.filter(e=>"SuperAdmin"!==e.name)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1046,columnNumber:7},void 0),fe&&(g("admin")||g("super_admin"))&&s.jsxDEV(_s,{open:me,user:fe,onCancel:Re,onSuccess:Re,roles:Q},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1054,columnNumber:9},void 0),fe&&g("super_admin")&&s.jsxDEV(Ss,{visible:ue,user:fe,onCancel:Re,onSuccess:Re},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1064,columnNumber:9},void 0),fe&&(g("admin")||g("super_admin"))&&s.jsxDEV(Os,{visible:ve,user:fe,onCancel:Re,onSuccess:Re},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1073,columnNumber:9},void 0),fe&&(g("admin")||g("super_admin"))&&s.jsxDEV(Rs,{visible:Ne,user:fe,onClose:()=>ge(!1)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:1082,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/UsersAdminPageNew.tsx",lineNumber:844,columnNumber:5},void 0)};export{Ps as default};
