var e=Object.defineProperty,s=(s,i,r)=>((s,i,r)=>i in s?e(s,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[i]=r)(s,"symbol"!=typeof i?i+"":i,r);import{u as i,j as r}from"./index-C0S0DpaX.js";import{r as o,R as n}from"./react-vendor-Al_k-ZB6.js";import{e as t,C as a,S as l,b as d,c as m,f as c,D as u,d as p,v as h,g as v,s as g,K as b,P as N}from"./dnd-vendor-D0spq1w0.js";import{a as D,N as C}from"./Notifications-Bhgc2wzd.js";import{u as x}from"./useAuthenticatedApi-BbQI8SDU.js";import{af as f,ag as S,a as E,f as V,ai as M,a3 as y,I as k,a7 as A,B as O,b9 as j,a8 as R,bt as U,an as w,aY as I,bF as F,a2 as P,bk as z,aM as H,bh as $,b3 as T,b5 as _,i as L,aG as W,aF as q,a0 as B,h as G,F as Y}from"./antd-vendor-zFcGztvE.js";const K=e=>{let{transform:s}=e;return{...s,x:0}};class J{constructor(e){s(this,"api"),this.api=e}async getModulesBySections(e){const s=await this.api.get(`/api/admin-modules?organizationId=${e}`);return(null==s?void 0:s.success)?s.data:null}async createCategory(e){const s=await this.api.post("/api/admin-modules/categories",e);return(null==s?void 0:s.success)?s.data:null}async updateCategory(e,s){const i={...s};if("boolean"==typeof s.active&&(i.isActive=s.active,i.enabled=s.active,i.status=s.active?"active":"inactive"),"boolean"==typeof s.superAdminOnly){const e=s.superAdminOnly;i.superAdminOnly=e,i.adminOnly=e,i.super_admin_only=e,i.visibleToSuperAdminOnly=e}const r=await this.api.put(`/api/admin-modules/categories/${e}`,i);return(null==r?void 0:r.success)?r.data:null}async deleteCategory(e){const s=await this.api.delete(`/api/admin-modules/categories/${e}`);return!!(null==s?void 0:s.success)}async reorderSections(e){const s=await this.api.put("/api/admin-modules/categories/reorder",{updates:e});return!!(null==s?void 0:s.success)}async toggleSectionActive(e,s){const i=await this.api.post("/api/admin-modules/sections/toggle",{sectionId:e,organizationId:s});return!!(null==i?void 0:i.success)}async toggleModuleForOrganization(e,s,i){const r=await this.api.post("/api/admin-modules/toggle",{moduleId:e,organizationId:s,active:i});return!!(null==r?void 0:r.success)}async saveModule(e){return e.id?this.api.put(`/api/modules/${e.id}`,e):this.api.post("/api/modules",e)}async updateModule(e,s){const i={...s};if(void 0!==s.categoryId){const e=s.categoryId,r=("string"==typeof e&&/^\d+$/.test(e)?Number(e):"number"==typeof s.categoryId?s.categoryId:void 0)??s.categoryId;i.categoryId=r,i.categoryID=String(r),i.category_id=r,i.moduleCategoryId=r,i.module_category_id=r,i.CategoryId=String(r)}if("number"==typeof s.order){const e=s.order;i.order=e,i.position=e,i.sortOrder=e,i.sort_order=e,i.index=e}return await this.api.put(`/api/modules/${e}`,i)}async deleteModule(e){const s=await this.api.delete(`/api/modules/${e}`);return!!(null==s?void 0:s.success)}}function Q(){return r.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 p-4 rounded-md mb-4 text-sm",children:[r.jsxDEV("h4",{className:"font-bold mb-2",children:"Comment fonctionnent les modules ?"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/InfoBanner.tsx",lineNumber:6,columnNumber:7},this),r.jsxDEV("p",{className:"mb-1",children:[r.jsxDEV("strong",{children:"Modules Globaux :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/InfoBanner.tsx",lineNumber:8,columnNumber:9},this)," Conçus pour être disponibles pour toutes les organisations. Un super-admin peut les créer et gérer leur statut global."]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/InfoBanner.tsx",lineNumber:7,columnNumber:7},this),r.jsxDEV("p",{children:[r.jsxDEV("strong",{children:"Modules d'Organisation :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/InfoBanner.tsx",lineNumber:11,columnNumber:9},this)," Spécifiques à une seule organisation. Seuls les administrateurs de cette organisation peuvent les créer et les gérer."]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/InfoBanner.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/InfoBanner.tsx",lineNumber:5,columnNumber:5},this)}function X(e){const{categoriesCount:s,totalModules:i,totalActiveGlobal:o,totalActiveForOrg:n,orgName:t,searchValue:a,onSearchChange:l,orderFilterValue:d,onOrderFilterChange:m,onAddCategory:c,onAddModule:u,onRefresh:p,organizationSelector:h}=e;return r.jsxDEV("div",{className:"mb-6",children:[r.jsxDEV("div",{className:"mb-6 text-center",children:[r.jsxDEV("h1",{className:"text-3xl font-extrabold text-gray-800",children:"Administration des Modules"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:42,columnNumber:5},this),r.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Gérez les modules et leurs catégories pour votre organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:43,columnNumber:5},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:41,columnNumber:4},this),r.jsxDEV(f,{gutter:[16,16],className:"mb-4",children:[r.jsxDEV(S,{xs:24,sm:12,md:6,children:r.jsxDEV(E,{className:"shadow-sm hover:shadow-md transition-shadow",children:r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm text-gray-500",children:"Total Catégories"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:52,columnNumber:9},this),r.jsxDEV("div",{className:"text-2xl font-bold",children:s},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:51,columnNumber:8},this),r.jsxDEV(V,{className:"text-[#2C5967]",style:{fontSize:26}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:55,columnNumber:8},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:50,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:49,columnNumber:6},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:48,columnNumber:5},this),r.jsxDEV(S,{xs:24,sm:12,md:6,children:r.jsxDEV(E,{className:"shadow-sm hover:shadow-md transition-shadow",children:r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm text-gray-500",children:"Modules (total)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:63,columnNumber:9},this),r.jsxDEV("div",{className:"text-2xl font-bold",children:i},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:64,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:62,columnNumber:8},this),r.jsxDEV(M,{className:"text-blue-600",style:{fontSize:26}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:66,columnNumber:8},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:60,columnNumber:6},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:59,columnNumber:5},this),r.jsxDEV(S,{xs:24,sm:12,md:6,children:r.jsxDEV(E,{className:"shadow-sm hover:shadow-md transition-shadow",children:r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm text-gray-500",children:"Modules Actifs (global)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:74,columnNumber:9},this),r.jsxDEV("div",{className:"text-2xl font-bold",children:o},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:75,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:73,columnNumber:8},this),r.jsxDEV(y,{className:"text-green-600",style:{fontSize:26}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:77,columnNumber:8},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:72,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:71,columnNumber:6},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:70,columnNumber:5},this),r.jsxDEV(S,{xs:24,sm:12,md:6,children:r.jsxDEV(E,{className:"shadow-sm hover:shadow-md transition-shadow",children:r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm text-gray-500",children:["Actifs (",t||"Orga",")"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:85,columnNumber:9},this),r.jsxDEV("div",{className:"text-2xl font-bold",children:n},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:86,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:84,columnNumber:8},this),r.jsxDEV(y,{className:"text-emerald-600",style:{fontSize:26}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:88,columnNumber:8},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:83,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:82,columnNumber:6},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:81,columnNumber:5},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:47,columnNumber:4},this),r.jsxDEV("div",{className:"bg-white border rounded px-4 py-3 shadow-sm",children:r.jsxDEV("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[r.jsxDEV("div",{className:"flex flex-1 items-center gap-3",children:[r.jsxDEV(k,{placeholder:"Rechercher un module…",value:a,onChange:e=>l(e.target.value),style:{maxWidth:320}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:98,columnNumber:7},this),r.jsxDEV(k,{placeholder:"Filtrer par ordre…",value:d,onChange:e=>m(e.target.value),style:{maxWidth:200}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:104,columnNumber:7},this),r.jsxDEV(A,{title:"Actualiser",children:r.jsxDEV(O,{icon:r.jsxDEV(j,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:111,columnNumber:22},this),onClick:p},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:111,columnNumber:8},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:110,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:97,columnNumber:6},this),r.jsxDEV("div",{className:"flex items-center gap-2",children:[h,r.jsxDEV(R,{color:"#2C5967",count:s,offset:[8,-4],children:r.jsxDEV(O,{type:"primary",onClick:c,children:"Ajouter une catégorie"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:117,columnNumber:8},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:116,columnNumber:7},this),r.jsxDEV(O,{onClick:u,children:"Ajouter un module"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:119,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:114,columnNumber:6},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:96,columnNumber:5},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:95,columnNumber:4},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/layout/ModulesHeader.tsx",lineNumber:40,columnNumber:3},this)}const Z=({name:e,color:s="#1890ff",size:i=20,className:o,style:n})=>{const t=e&&String(e)||"AppstoreOutlined",a=U[t],l={color:s,fontSize:i,lineHeight:1,display:"inline-flex",alignItems:"center",...n};if(a)return r.jsxDEV(a,{className:o,style:l},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconRenderer.tsx",lineNumber:23,columnNumber:19},void 0);const d=V;return r.jsxDEV(d,{className:o,style:l},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconRenderer.tsx",lineNumber:26,columnNumber:9},void 0)},ee=({value:e,onChange:s,withColor:i=!1})=>{const{icons:t,categories:a,loading:l,category:d,search:m,setCategory:c,setSearch:u}=(e=>{const{api:s}=x(),[i,r]=o.useState([]),[n,t]=o.useState([]),[a,l]=o.useState(!1),[d,m]=o.useState(null),[c,u]=o.useState(null==e?void 0:e.category),[p,h]=o.useState(""),v=o.useCallback(async e=>{l(!0),m(null);try{const i=new URLSearchParams,o=(null==e?void 0:e.category)??c,a=(null==e?void 0:e.search)??p;o&&"all"!==o&&i.set("category",o),a&&i.set("search",a);const l=await s.get(`/api/icons?${i.toString()}`);if(null==l?void 0:l.success){if(r(l.data.icons||[]),0===n.length){const e=await s.get("/api/icons/categories");(null==e?void 0:e.success)&&t(e.data||[])}}else m((null==l?void 0:l.error)||"Erreur inconnue")}catch(i){const e=i&&"object"==typeof i&&"message"in i?String(i.message):void 0;m(e||"Erreur lors du chargement des icônes")}finally{l(!1)}},[s,c,p,n.length]);o.useEffect(()=>{v()},[v]);const g=o.useMemo(()=>i.reduce((e,s)=>{var i;return(e[i=s.category]||(e[i]=[])).push(s),e},{}),[i]);return{icons:i,grouped:g,categories:n,loading:a,error:d,category:c,search:p,setCategory:u,setSearch:h,reload:v}})(),p=(null==e?void 0:e.name)||"AppstoreOutlined",h=(null==e?void 0:e.color)||"#1890ff",v=o.useRef(null),[g,b]=o.useState(!1),N=o.useMemo(()=>{const e={};return t.forEach(s=>{var i;(e[i=s.category]||(e[i]=[])).push(s)}),e},[t]);return o.useEffect(()=>{const e=v.current;if(!e)return;const s=e.scrollWidth>e.clientWidth+4;b(s)},[a.length]),r.jsxDEV("div",{className:"space-y-2 w-full",children:[r.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[g?r.jsxDEV("div",{className:"min-w-[200px]",children:r.jsxDEV(w,{value:d||"all",onChange:e=>c(String(e)),style:{width:240},options:[{label:"Toutes",value:"all"},...a.map(e=>({label:`${e.name} (${e.count})`,value:e.name}))],showSearch:!0,optionFilterProp:"label",size:"middle"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:38,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:37,columnNumber:11},void 0):r.jsxDEV("div",{ref:v,className:"min-w-0 max-w-full overflow-x-hidden whitespace-nowrap py-1 px-0.5 rounded bg-transparent",children:r.jsxDEV(I,{options:[{label:"Toutes",value:"all"},...a.map(e=>({label:`${e.name} (${e.count})`,value:e.name}))],value:d||"all",onChange:e=>c(String(e))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:50,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:49,columnNumber:11},void 0),r.jsxDEV("div",{className:"flex-1 min-w-[160px] max-w-[260px]",children:r.jsxDEV(k.Search,{allowClear:!0,placeholder:"Rechercher une icône…",value:m,onChange:e=>u(e.target.value)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:58,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:57,columnNumber:9},void 0),r.jsxDEV("div",{className:"ml-auto flex items-center gap-2",children:[i&&r.jsxDEV(F,{value:h,onChange:(e,i)=>null==s?void 0:s({name:p,color:i}),showText:!1,size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:67,columnNumber:13},void 0),r.jsxDEV(Z,{name:p,color:h,size:22},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:74,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:65,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:35,columnNumber:3},void 0),l?r.jsxDEV("div",{className:"py-6 text-center",children:r.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:79,columnNumber:43},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:79,columnNumber:9},void 0):r.jsxDEV("div",{className:"max-h-[46vh] overflow-auto border rounded-md p-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 w-full",children:Object.entries(N).map(([e,i])=>r.jsxDEV(n.Fragment,{children:i.filter(e=>!m||e.name.toLowerCase().includes(m.toLowerCase())).map(i=>r.jsxDEV("button",{type:"button",className:"flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-50 border w-full "+(p===i.name?"border-blue-500":"border-transparent"),onClick:()=>null==s?void 0:s({name:i.name,color:h}),title:`${i.name} • ${e}`,children:[r.jsxDEV(Z,{name:i.name,color:h},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:94,columnNumber:21},void 0),r.jsxDEV("span",{className:"text-[10px] text-gray-600 truncate w-full",children:i.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:95,columnNumber:21},void 0)]},i.id,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:87,columnNumber:19},void 0))},e,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:83,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:81,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/shared/IconPicker.tsx",lineNumber:34,columnNumber:5},void 0)};function se({initial:e,onSave:s,onCancel:n}){const{isSuperAdmin:t,currentOrganization:a}=i(),[l,d]=o.useState({key:"",label:"",feature:"",icon:"",iconColor:"#1890ff",route:"",description:"",page:"",order:0,active:!0,isGlobal:t&&!(null==a?void 0:a.id)});return o.useEffect(()=>{e&&d(e)},[e]),r.jsxDEV("div",{className:"border p-4 bg-gray-50 rounded mb-4",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-2",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Clé"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:31,columnNumber:11},this),r.jsxDEV(k,{value:l.key,onChange:e=>d(s=>({...s,key:e.target.value})),placeholder:"crm, dashboard..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:32,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:30,columnNumber:9},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Label"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:35,columnNumber:11},this),r.jsxDEV(k,{value:l.label,onChange:e=>d(s=>({...s,label:e.target.value})),placeholder:"CRM, Tableau de bord..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:36,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:34,columnNumber:9},this),r.jsxDEV("div",{className:"md:col-span-2",children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Icône du module"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:39,columnNumber:11},this),r.jsxDEV("div",{className:"flex items-center gap-3",children:[r.jsxDEV("div",{className:"flex-1",children:r.jsxDEV(ee,{value:{name:l.icon||"AppstoreOutlined",color:l.iconColor||"#1890ff"},onChange:e=>d(s=>({...s,icon:null==e?void 0:e.name,iconColor:(null==e?void 0:e.color)||s.iconColor}))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:42,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:41,columnNumber:13},this),r.jsxDEV("div",{className:"w-44",children:r.jsxDEV("div",{className:"flex items-center gap-2 border rounded px-2 py-1 bg-white",children:[r.jsxDEV(Z,{name:l.icon||"AppstoreOutlined",color:l.iconColor||"#1890ff"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:46,columnNumber:17},this),r.jsxDEV("span",{className:"text-xs text-gray-600 truncate",children:l.icon||"AppstoreOutlined"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:47,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:45,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:44,columnNumber:13},this),r.jsxDEV("div",{className:"w-40",children:r.jsxDEV(F,{value:l.iconColor||"#1890ff",onChange:(e,s)=>d(e=>({...e,iconColor:s})),showText:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:51,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:50,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:40,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:38,columnNumber:9},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Route"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:60,columnNumber:11},this),r.jsxDEV(k,{value:l.route,onChange:e=>d(s=>({...s,route:e.target.value})),placeholder:"/crm"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:61,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:59,columnNumber:9},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Feature"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:64,columnNumber:11},this),r.jsxDEV(k,{value:l.feature,onChange:e=>d(s=>({...s,feature:e.target.value})),placeholder:"crm, dashboard..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:65,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:63,columnNumber:9},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Page"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:68,columnNumber:11},this),r.jsxDEV(k,{value:l.page,onChange:e=>d(s=>({...s,page:e.target.value})),placeholder:"LeadsPage"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:67,columnNumber:9},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Ordre"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:72,columnNumber:11},this),r.jsxDEV(z,{value:l.order,onChange:e=>d(s=>({...s,order:Number(e)||0})),style:{width:"100%"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:73,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:71,columnNumber:9},this),r.jsxDEV("div",{className:"flex items-end",children:r.jsxDEV("label",{className:"flex items-center gap-2 p-2 border rounded bg-white h-full",children:[r.jsxDEV(H,{checked:!!l.active,onChange:e=>d(s=>({...s,active:e}))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:77,columnNumber:13},this),r.jsxDEV("span",{children:"Actif (global)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:76,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:75,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:29,columnNumber:7},this),l.categoryId&&r.jsxDEV("input",{type:"hidden",value:l.categoryId},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:84,columnNumber:9},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Description"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:87,columnNumber:9},this),r.jsxDEV(k.TextArea,{value:l.description,onChange:e=>d(s=>({...s,description:e.target.value})),rows:3},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:88,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:86,columnNumber:7},this),r.jsxDEV("div",{className:"flex gap-2 mt-3",children:[r.jsxDEV(O,{type:"primary",onClick:()=>{var e,i;(null==(e=l.key)?void 0:e.trim())?(null==(i=l.label)?void 0:i.trim())?s(l):alert("Le label du module est requis"):alert("La clé du module est requise")},children:"Enregistrer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:91,columnNumber:9},this),r.jsxDEV(O,{onClick:n,children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:108,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:90,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/ModuleForm.tsx",lineNumber:28,columnNumber:5},this)}const ie=e=>{const s=String(e["data-row-key"]??""),{attributes:i,listeners:o,setNodeRef:l,transform:d,transition:m,isDragging:c}=t({id:s}),u={...e.style,transform:a.Transform.toString(d),transition:m,backgroundColor:c?"#f0f8ff":"transparent",opacity:c?.8:1,border:c?"2px dashed #1890ff":void 0,cursor:c?"grabbing":"pointer"};return r.jsxDEV("tr",{ref:l,style:u,...e,className:`\n        ${e.className||""}\n        hover:bg-gray-50 transition-colors\n        ${c?"shadow-lg z-50 scale-105":""}\n      `.trim(),children:n.Children.map(e.children,(e,s)=>{if(n.isValidElement(e)){const t=e.props?{className:e.props.className,style:e.props.style,onClick:e.props.onClick,onMouseEnter:e.props.onMouseEnter,onMouseLeave:e.props.onMouseLeave,role:e.props.role,"aria-label":e.props["aria-label"]}:{},a=s;return 0===s?r.jsxDEV("td",{...t,className:`${t.className||""} cursor-grab active:cursor-grabbing text-center`,...i,...o,children:r.jsxDEV($,{className:"text-gray-400 hover:text-gray-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:80,columnNumber:17},void 0)},a,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:73,columnNumber:15},void 0):n.cloneElement(e,{key:a,...t})}return e})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:42,columnNumber:5},void 0)};function re({section:e,catId:s,onEdit:n,onDelete:d,onCreateCategoryFromSection:m,onPurgeFallbackSection:c,onEditModule:u,onDeleteModule:p,onAddModuleToCategory:h,onToggleSectionActive:v,onToggleSectionAdminOnly:g,onToggleModuleActive:b,onToggleModuleSuperAdminOnly:N,isOpen:D,onPanelChange:C}){var f,S;x();const{user:E}=i(),{attributes:V,listeners:M,setNodeRef:y,transform:j,transition:R,isDragging:U}=t({id:s}),w={transform:a.Transform.toString(j),transition:R,zIndex:U?10:"auto",boxShadow:U?"0 8px 20px rgba(0,0,0,0.15)":"none"},[I,F]=o.useState(""),P=o.useMemo(()=>{const s=e=>"string"==typeof e&&e.trim()?e.trim():void 0,i=e;return s(e.title)||s(i.name)||s(i.category)||s(i.label)||"Catégorie"},[e]),z=o.useMemo(()=>r.jsxDEV(Z,{name:e.iconName||"AppstoreOutlined",color:e.iconColor||"#1890ff",size:18},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:162,columnNumber:7},this),[e.iconName,e.iconColor]),Y=!!e.backendCategoryId,K=o.useMemo(()=>(e.modules||[]).filter(e=>{const s=I.trim().toLowerCase();return!s||((e.label||"").toLowerCase().includes(s)||(e.key||"").toLowerCase().includes(s))}).map((s,i)=>({...s,__sortableId:`mod:${String(s.id??s.key??`${e.id}-${i}`)}`})),[e.modules,I,e.id]),J=o.useMemo(()=>K.map(e=>e.__sortableId),[K]),Q=o.useMemo(()=>{var s;const i="super_admin"===(null==E?void 0:E.role),r=0===((null==(s=e.modules)?void 0:s.length)??0);return!!e.id&&(i||r)},[e.id,null==(f=e.modules)?void 0:f.length,null==E?void 0:E.role]),X=o.useMemo(()=>[{title:"",key:"drag",width:40,align:"center",render:()=>r.jsxDEV($,{className:"text-gray-400 hover:text-gray-600 cursor-grab"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:209,columnNumber:11},this)},{title:"Label",dataIndex:"label",key:"label",ellipsis:!0,width:260,render:(s,i)=>r.jsxDEV("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsxDEV(Z,{name:i.icon||"AppstoreOutlined",color:i.iconColor||e.iconColor||i.sectionColor||"#1890ff",size:18},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:220,columnNumber:13},this),r.jsxDEV("span",{className:"font-medium truncate",title:s,children:s},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:227,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:219,columnNumber:11},this)},{title:"Clé",dataIndex:"key",key:"key",ellipsis:!0,width:160,render:e=>r.jsxDEV("span",{className:"font-mono text-xs text-gray-600",title:e,children:e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:240,columnNumber:11},this)},{title:"Ordre",dataIndex:"order",key:"order",align:"center",width:70,sorter:(e,s)=>(e.order??0)-(s.order??0),render:e=>r.jsxDEV("span",{className:"font-semibold",children:e??0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:253,columnNumber:11},this)},{title:"Type",key:"type",width:120,render:(e,s)=>{const i=!s.organizationId,o=({text:e,tone:s})=>r.jsxDEV("span",{className:`text-xs px-2 py-0.5 rounded-full border ${{gold:"border-amber-300 text-amber-700 bg-amber-50",blue:"border-blue-300 text-blue-700 bg-blue-50",green:"border-green-300 text-green-700 bg-green-50"}[s]}`,children:e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:270,columnNumber:13},this);return(s.feature||"").startsWith("super_admin_")?r.jsxDEV(o,{text:"Super Admin",tone:"gold"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:282,columnNumber:36},this):i?r.jsxDEV(o,{text:"Global",tone:"blue"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:283,columnNumber:32},this):r.jsxDEV(o,{text:"Organisation",tone:"green"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:284,columnNumber:18},this)}},{title:"Actions",key:"actions",width:180,render:(e,s)=>r.jsxDEV("div",{className:"flex items-center gap-1",children:[r.jsxDEV(A,{title:"Éditer",children:r.jsxDEV(O,{size:"small",type:"text",icon:r.jsxDEV(T,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:297,columnNumber:23},this),onClick:()=>u(s)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:294,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:293,columnNumber:13},this),r.jsxDEV(A,{title:"Supprimer",children:r.jsxDEV(O,{size:"small",type:"text",danger:!0,icon:r.jsxDEV(_,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:306,columnNumber:23},this),onClick:()=>p(s)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:302,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:301,columnNumber:13},this),r.jsxDEV(A,{title:s.superAdminOnly?"Désactivé car réservé aux Super Admin uniquement":s.active?"Désactiver pour les organisations":"Activer pour les organisations",children:r.jsxDEV(H,{size:"small",checked:!!s.active,onChange:()=>b(s.id,!!s.active),disabled:!!s.superAdminOnly},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:317,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:310,columnNumber:13},this),r.jsxDEV(A,{title:"Visible uniquement pour Super Admin",children:r.jsxDEV(H,{size:"small",checked:!!s.superAdminOnly,onChange:e=>N(s.id,e)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:325,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:324,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:292,columnNumber:11},this)}],[p,u,b,N,e.iconColor]);return r.jsxDEV("div",{ref:y,style:w,className:"mb-4",children:r.jsxDEV(L,{className:`\n          shadow-sm hover:shadow-md bg-white rounded-md transition-all\n          ${U?"ring-2 ring-blue-300 bg-blue-50":""}\n        `.trim(),bordered:!1,...void 0!==D&&C?{activeKey:D?["1"]:[],onChange:e=>{const i=Array.isArray(e)&&e.length>0;C(s.replace("cat:",""),i)}}:{onChange:()=>{}},items:[{key:"1",showArrow:!1,label:r.jsxDEV("div",{className:"w-full px-4 py-3 flex items-center gap-3",children:[r.jsxDEV("div",{className:`\n                  flex items-center gap-3 select-none transition-all\n                  ${U?"cursor-grabbing opacity-60":"cursor-grab hover:bg-gray-50 rounded px-2 py-1"}\n                `.trim(),...V,...M,children:[z,r.jsxDEV("span",{className:"font-semibold text-base text-gray-800",children:P},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:372,columnNumber:17},this),r.jsxDEV("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[(null==(S=e.modules)?void 0:S.length)||0," modules"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:375,columnNumber:17},this),Y?r.jsxDEV("span",{className:"text-xs px-2 py-0.5 rounded-full border border-green-300 text-green-700 bg-green-50",children:"BDD"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:380,columnNumber:19},this):r.jsxDEV(A,{title:"Cette section est dérivée des modules (fallback). Cliquez pour créer une catégorie en base et pouvoir l'éditer.",children:r.jsxDEV("span",{className:"text-xs px-2 py-0.5 rounded-full border border-amber-300 text-amber-700 bg-amber-50",children:"Fallback"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:383,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:382,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:363,columnNumber:15},this),r.jsxDEV("div",{className:"flex-1"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:388,columnNumber:15},this),r.jsxDEV("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[!Y&&m&&r.jsxDEV(A,{title:"Créer une catégorie en base et migrer les modules de ce groupe",children:r.jsxDEV(O,{size:"small",type:"default",icon:r.jsxDEV(q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:396,columnNumber:29},this),onClick:()=>m(String(e.id)),children:"Créer catégorie"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:393,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:392,columnNumber:19},this),!Y&&c&&r.jsxDEV(A,{title:"Supprimer tous les modules de cette section fallback (action destructive)",children:r.jsxDEV(O,{size:"small",danger:!0,icon:r.jsxDEV(_,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:408,columnNumber:29},this),onClick:()=>{B.confirm({title:"Supprimer cette section fallback ? ",content:"Cela supprimera DÉFINITIVEMENT tous les modules de cette section. Cette action est irréversible.",okText:"Supprimer",cancelText:"Annuler",okType:"danger",centered:!0,onOk:()=>c(String(e.id))})},children:"Supprimer fallback"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:405,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:404,columnNumber:19},this),r.jsxDEV(A,{title:"Ajouter un module dans cette catégorie",children:r.jsxDEV(O,{size:"small",type:"primary",icon:r.jsxDEV(q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:429,columnNumber:27},this),onClick:()=>{var s;return h(String(e.id),(null==(s=e.modules)?void 0:s.length)||0)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:426,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:425,columnNumber:17},this),r.jsxDEV(A,{title:Y?"Éditer la catégorie":"Cette section est un fallback. Créez d'abord une catégorie en base pour pouvoir l'éditer.",children:r.jsxDEV(O,{size:"small",icon:r.jsxDEV(T,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:445,columnNumber:27},this),onClick:()=>Y&&n(e.id),disabled:!Y},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:443,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:438,columnNumber:17},this),r.jsxDEV(A,{title:Y?Q?"Supprimer la catégorie":"Vider la catégorie ou droits insuffisants":'Section fallback: utilisez "Supprimer fallback" pour vider les modules',children:r.jsxDEV(O,{size:"small",danger:!0,icon:r.jsxDEV(_,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:458,columnNumber:27},this),onClick:()=>{Y&&Q&&B.confirm({title:"Supprimer la catégorie",content:"Cette action supprimera définitivement la catégorie. Assurez-vous qu'elle est vide.",okText:"Supprimer",cancelText:"Annuler",okType:"danger",centered:!0,onOk:()=>d(e.id)})},disabled:!Y||!Q},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:455,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:450,columnNumber:17},this),r.jsxDEV(A,{title:Y?e.superAdminOnly?"Désactivé car réservé aux Super Admin uniquement":e.active?"Désactiver la catégorie":"Activer la catégorie":"Section fallback: active/inactive non applicable. Créez d'abord une catégorie.",children:r.jsxDEV(H,{size:"small",checked:!!e.active,onChange:()=>v(e.id),disabled:!Y||!!e.superAdminOnly},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:481,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:474,columnNumber:17},this),r.jsxDEV(A,{title:Y?"Visible uniquement pour Super Admin":"Section fallback: visibilité Super Admin non applicable",children:r.jsxDEV(H,{size:"small",checked:!!e.superAdminOnly,onChange:s=>g(e.id,s),disabled:!Y},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:493,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:488,columnNumber:17},this),r.jsxDEV(k,{allowClear:!0,size:"small",prefix:r.jsxDEV(G,{className:"text-gray-400"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:503,columnNumber:27},this),placeholder:"Rechercher...",value:I,onChange:e=>F(e.target.value),className:"w-48 md:w-64"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:500,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:390,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:361,columnNumber:13},this),children:r.jsxDEV("div",{className:"overflow-x-auto border-t border-gray-200",children:0===K.length?r.jsxDEV("div",{className:"p-8 text-center text-gray-500 bg-gray-50 border-2 border-dashed border-gray-300 rounded-md",children:[r.jsxDEV($,{className:"text-2xl mb-2 text-gray-300"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:516,columnNumber:19},this),r.jsxDEV("p",{className:"text-sm",children:'Glissez-déposez des modules ici ou cliquez sur "Ajouter un module"'},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:517,columnNumber:19},this),r.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:"Cette catégorie ne contient aucun module"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:518,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:515,columnNumber:17},this):r.jsxDEV(l,{items:J,children:r.jsxDEV(W,{bordered:!0,size:"small",sticky:!0,pagination:!1,rowKey:"__sortableId",dataSource:K,columns:X,components:{body:{row:ie}},className:"\r\n                      [&_.ant-table-thead_th]:bg-gray-50 \r\n                      [&_.ant-table-thead_th]:uppercase \r\n                      [&_.ant-table-thead_th]:text-gray-600 \r\n                      [&_.ant-table-thead_th]:text-xs \r\n                      [&_.ant-table-thead_th]:font-semibold \r\n                      [&_.ant-table-thead_th]:tracking-wide \r\n                      [&_.ant-table-thead_th]:py-2 \r\n                      [&_.ant-table-tbody_td]:py-2\r\n                      [&_.ant-table-tbody_tr:hover]:bg-blue-50\r\n                    "},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:522,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:521,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:513,columnNumber:13},this)}]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:340,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/components/SortableSection.tsx",lineNumber:339,columnNumber:5},this)}function oe(){var e;const{sections:s,modules:n,loading:t,addSection:a,updateSectionProperties:f,deleteSection:S,reorderSections:E,moveModule:V,createCategoryFromSection:M,purgeFallbackSection:y,toggleModuleForOrganization:A,loadSections:O,isDeleteModalVisible:j,moduleToDelete:R,handleConfirmDelete:U,handleCancelDelete:I,handleDeleteModule:F,toggleModuleActive:P,toggleModuleSuperAdminOnly:z}=(()=>{const{api:e}=x(),{currentOrganization:s}=i(),[r]=o.useState(()=>new J(e)),[n,t]=o.useState([]),[a,l]=o.useState([]),[d,m]=o.useState(!0),[c,u]=o.useState(null),[p,h]=o.useState(!1),[v,g]=o.useState(null),b=o.useCallback(e=>"string"==typeof e&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(e),[]),N=o.useCallback(async i=>{const o=i||(null==s?void 0:s.id);if(o&&e)try{m(!0),u(null);const e=await r.getModulesBySections(o);if(e){const s=(Array.isArray(e.sections)?e.sections:[]).map((e,s)=>{var i,r;const o=(Array.isArray(null==e?void 0:e.modules)?e.modules:[]).slice().sort((e,s)=>((null==e?void 0:e.order)??999999)-((null==s?void 0:s.order)??999999)),n=(()=>{var e;const s=o[0],i=null==(e=null==s?void 0:s.Category)?void 0:e.name;return"string"==typeof i&&i.trim()?i.trim():void 0})(),t=(null==e?void 0:e.title)||(null==e?void 0:e.name)||(null==e?void 0:e.category)||n||"Catégorie",a=(null==e?void 0:e.description)||`Catégorie ${t}`,l=o[0],d=(null==e?void 0:e.iconName)||(null==e?void 0:e.icon)||(null==e?void 0:e.categoryIcon)||(null==l?void 0:l.sectionIcon)||(null==(i=null==l?void 0:l.Category)?void 0:i.icon)||"AppstoreOutlined",m=(null==e?void 0:e.iconColor)||(null==e?void 0:e.categoryColor)||(null==l?void 0:l.sectionColor)||(null==(r=null==l?void 0:l.Category)?void 0:r.iconColor)||"#1890ff",c="number"==typeof(null==e?void 0:e.order)?e.order:0,u=(null==e?void 0:e.active)??(null==e?void 0:e.isActive)??(null==e?void 0:e.enabled)??(null==e?void 0:e.status),p="boolean"==typeof u?u:"string"!=typeof u||["active","enabled","on","true","1"].includes(u.toLowerCase()),h=o.length,v=(null==e?void 0:e.superAdminOnly)??(null==e?void 0:e.adminOnly)??(null==e?void 0:e.super_admin_only)??(null==e?void 0:e.visibleToSuperAdminOnly),g="boolean"==typeof v?v:"string"==typeof v&&["true","1","yes","on"].includes(v.toLowerCase()),N=(null==e?void 0:e.id)?String(e.id):void 0,D=null==e?void 0:e.backendCategoryId,C="string"==typeof D&&D?D:b(N)?N:void 0;var x;return{id:(null==e?void 0:e.id)?String(e.id):(null==(x=o[0])?void 0:x.categoryId)?String(o[0].categoryId):`__tmp-cat-${s}`,backendCategoryId:C,title:t,description:a,iconName:d,iconColor:m,order:c,active:p,superAdminOnly:g,modules:o,modulesCount:h,organizationId:e.organizationId}}).slice().sort((e,s)=>(e.order??0)-(s.order??0));t(s);const i=s.flatMap(e=>Array.isArray(e.modules)?e.modules:[]);l(i)}}catch(n){u("Erreur lors du chargement des sections")}finally{m(!1)}else m(!1)},[null==s?void 0:s.id,e,r,b]),C=o.useCallback(async()=>{},[]),f=o.useCallback(async e=>{try{const s=n.find(s=>s.id===e);if(!s)return;const i=s.backendCategoryId||null;if(!i)return void D.error("Cette catégorie est dérivée des modules (fallback) et n’existe pas en base. Créez d’abord une catégorie.");const o=!s.active;await r.updateCategory(i,{active:o})&&(t(s=>s.map(s=>s.id===e?{...s,active:o}:s)),D.success("Catégorie "+(o?"activée":"désactivée")))}catch(s){D.error("Erreur lors de la mise à jour de la catégorie")}},[n,r]),S=o.useCallback(async e=>{var s;try{const i=n.find(s=>s.id===e);if(!i)return;const o=i.backendCategoryId||null;if(!o)return void D.error("Impossible de supprimer une catégorie fallback (non enregistrée en base).");if((i.modulesCount??(null==(s=i.modules)?void 0:s.length)??0)>0)return void D.error("Impossible de supprimer: des modules sont encore attachés à cette catégorie. Déplacez-les d'abord.");await r.deleteCategory(o).catch(e=>{const s=e instanceof Error?e.message:String(e);return/modules attached/i.test(s)?D.error("Suppression refusée: la catégorie contient encore des modules."):D.error("Erreur lors de la suppression de la catégorie"),!1})&&(t(s=>s.filter(s=>s.id!==e)),D.success("Catégorie supprimée avec succès"))}catch(i){D.error("Erreur lors de la suppression")}},[r,n]),E=o.useCallback(async e=>{if(null==s?void 0:s.id)try{const i="string"==typeof e?{name:e,description:`Catégorie ${e}`,icon:"AppstoreOutlined",iconColor:"#1890ff"}:e;await r.createCategory({...i,order:10*(n.length+1),active:!0,organizationId:s.id,superAdminOnly:!1})&&(await N(),D.success("Catégorie ajoutée avec succès"))}catch(i){D.error("Erreur lors de l'ajout de la catégorie")}},[null==s?void 0:s.id,n.length,r,N]),V=o.useCallback(async(e,s)=>{try{const i=n.find(s=>s.id===e);if(!i)return;const o=i.backendCategoryId||null;if(!o)return void D.error("Cette catégorie est dérivée des modules (fallback) et n’existe pas en base. Créez d’abord une catégorie.");await r.updateCategory(o,s)&&(await N(),D.success("Catégorie mise à jour"))}catch(i){D.error("Erreur lors de la mise à jour de la catégorie")}},[r,N,n]),M=o.useCallback(async(e,s)=>{try{await r.updateModule(e,s)&&(await N(),D.success("Module mis à jour"))}catch(i){D.error("Erreur lors de la mise à jour du module")}},[r,N]),y=o.useCallback(async(e,s)=>{try{await M(e,{active:!s})}catch(i){D.error("Erreur lors du toggle du module")}},[M]),k=o.useCallback(async(e,s)=>{try{s?await M(e,{superAdminOnly:s,active:!1}):await M(e,{superAdminOnly:s})}catch(i){D.error("Erreur lors du toggle SuperAdmin Only")}},[M]),A=o.useCallback(async(e,s)=>{try{const i=n.find(s=>s.id===e);if(!i)return;const o=i.backendCategoryId||null;if(!o)return void D.error("Cette catégorie est dérivée des modules (fallback) et n’existe pas en base. Créez d’abord une catégorie.");await r.updateCategory(o,{name:s})&&(t(i=>i.map(i=>{if(i.id!==e)return i;const r=i.name,o=i.category,n={};return void 0!==r&&(n.name=s),void 0!==o&&(n.category=s),{...i,title:s,...n}})),D.success("Nom de catégorie mis à jour"))}catch(i){D.error("Erreur lors de la mise à jour du nom")}},[r,n]),O=o.useCallback(async e=>{const i=n.find(s=>s.id===e);if(i)if(i.backendCategoryId&&b(i.backendCategoryId))D.info("Cette catégorie existe déjà en base");else try{const e={name:i.title||"Catégorie",description:i.description||`Catégorie ${i.title}`,icon:i.iconName||"AppstoreOutlined",iconColor:i.iconColor||"#1890ff",order:i.order??0,organizationId:i.organizationId||null,active:!0,superAdminOnly:!!i.superAdminOnly},o=await r.createCategory(e);if(!o||!o.id)return void D.error("Échec de la création de la catégorie");const n=String(o.id),t=Array.isArray(i.modules)?i.modules:[];for(let s=0;s<t.length;s++){const e=t[s];await r.updateModule(String(e.id),{categoryId:n,order:10*(s+1)})}await N(null==s?void 0:s.id),D.success("Catégorie créée et modules migrés")}catch(o){D.error("Erreur lors de la création de la catégorie")}},[n,r,N,null==s?void 0:s.id,b]),j=o.useCallback(async e=>{try{t(e);const i=e.map((e,s)=>{const i=e.backendCategoryId||null;return i?{id:i,order:10*(s+1)}:null}).filter(e=>!!e);r.reorderSections&&i.length>0?await r.reorderSections(i):await Promise.all(i.map(async e=>r.updateCategory(e.id,{order:e.order}))),await N(null==s?void 0:s.id)}catch(i){D.error("Erreur lors de la réorganisation des sections"),await N(null==s?void 0:s.id)}},[r,N,null==s?void 0:s.id]),R=o.useCallback(async(e,i,o,a)=>{try{const l=n.map(e=>({...e,modules:[...e.modules]})),d=l.find(e=>String(e.id)===String(i)),m=l.find(e=>String(e.id)===String(o));if(!d||!m)return;const c=d.modules.findIndex(s=>String(s.id)===String(e));if(-1===c)return;const[u]=d.modules.splice(c,1),p=Math.max(0,Math.min(a,m.modules.length));m.modules.splice(p,0,{...u,categoryId:o}),t(l),l.forEach(e=>{});const h=(e=>{const s=l.find(s=>String(s.id)===String(e));return(null==s?void 0:s.backendCategoryId)||(null==s?void 0:s.id)})(o),v=10*(p+1);await r.updateModule(String(u.id),{categoryId:h,order:v});for(let e=0;e<m.modules.length;e++){const s=m.modules[e];if(String(s.id)!==String(u.id)){const i=10*(e+1);await r.updateModule(String(s.id),{order:i})}}for(let e=0;e<d.modules.length;e++){const s=d.modules[e],i=10*(e+1);await r.updateModule(String(s.id),{order:i})}await N(null==s?void 0:s.id)}catch(l){D.error("Erreur lors du déplacement du module"),await N()}},[n,N,r,null==s?void 0:s.id]),U=o.useCallback(async e=>{const i=n.find(s=>String(s.id)===String(e));if(!i)return;if(i.backendCategoryId&&b(i.backendCategoryId))return void D.info("Cette catégorie est une vraie catégorie BDD. Utilisez la suppression normale.");const o=Array.isArray(i.modules)?i.modules:[];if(0!==o.length)try{const e=await Promise.allSettled(o.map(e=>r.deleteModule(String(e.id)))),i=e.filter(e=>"fulfilled"===e.status&&e.value).length,n=e.length-i;await N(null==s?void 0:s.id),0===n?D.success(`Section fallback vidée: ${i} module(s) supprimé(s)`):i>0?D.warn(`Suppression partielle: ${i} supprimé(s), ${n} échec(s)`):D.error("Échec de la suppression des modules de la section")}catch(t){D.error("Erreur lors de la suppression des modules de la section")}else D.info("Cette section est déjà vide.")},[n,r,N,null==s?void 0:s.id,b]),w=o.useCallback(async(e,i,o)=>{const n=o||(null==s?void 0:s.id);if(n)try{await r.toggleModuleForOrganization(e,n,i)&&(l(s=>s.map(s=>s.id===e?{...s,isActiveForOrg:!i}:s)),t(s=>s.map(s=>({...s,modules:s.modules.map(s=>s.id===e?{...s,isActiveForOrg:!i}:s)}))),D.success("Module "+(i?"désactivé":"activé")))}catch(a){D.error("Erreur lors de la mise à jour du module")}},[null==s?void 0:s.id,r]),I=o.useCallback(e=>{},[]),F=o.useCallback(e=>{g(e),h(!0)},[]),P=o.useCallback(async()=>{if(v)try{const i=await e.delete(`/api/modules/${v.id}`);i.success?(l(e=>e.filter(e=>e.id!==v.id)),D.success("Module supprimé avec succès"),await N(null==s?void 0:s.id)):D.error(i.error||"Erreur lors de la suppression du module")}catch(i){D.error("Erreur lors de la suppression du module")}finally{h(!1),g(null)}},[v,e,N,null==s?void 0:s.id]),z=o.useCallback(()=>{h(!1),g(null)},[]);o.useEffect(()=>{(null==s?void 0:s.id)&&N(s.id)},[N,null==s?void 0:s.id]);const H=n.map(e=>({id:e.id,title:e.title,description:e.description,iconName:e.iconName,iconColor:e.iconColor,order:e.order,active:e.active,organizationId:e.organizationId}));return{sections:n,allSections:H,modules:a,loading:d,error:c,isDeleteModalVisible:p,moduleToDelete:v,loadSections:N,loadModules:C,toggleSectionActive:f,deleteSection:S,addSection:E,updateSectionName:A,updateSectionProperties:V,reorderSections:j,moveModule:R,createCategoryFromSection:O,toggleModuleForOrganization:w,handleEditModule:I,handleDeleteModule:F,handleConfirmDelete:P,handleCancelDelete:z,setModules:l,updateModuleProperties:M,toggleModuleActive:y,toggleModuleSuperAdminOnly:k,purgeFallbackSection:U}})(),{api:H}=x(),{refreshModules:$,user:T,currentOrganization:_}=i(),[L,W]=o.useState(""),[q,G]=o.useState(""),[ie,oe]=o.useState(!1),[ne,te]=o.useState(!1),[ae]=Y.useForm(),[le,de]=o.useState(!1),[me]=Y.useForm(),[ce,ue]=o.useState(null),[pe,he]=o.useState(null),[ve,ge]=o.useState([]),[be,Ne]=o.useState(""),[De,Ce]=o.useState(new Set),xe=o.useCallback((e,s)=>{Ce(i=>{const r=new Set(i);return s?r.add(e):r.delete(e),r})},[]),fe=d(m(N,{activationConstraint:{distance:2}}),m(b,{coordinateGetter:g})),[Se,Ee]=o.useState(null),[Ve,Me]=o.useState(null);o.useEffect(()=>{if("super_admin"!==(null==T?void 0:T.role))return;let e=!1;return(async()=>{try{const s=await H.get("/api/organizations");!e&&(null==s?void 0:s.success)&&ge(s.data||[])}catch{D.error("Erreur lors du chargement des organisations")}})(),()=>{e=!0}},[null==T?void 0:T.role,H]),o.useEffect(()=>{"super_admin"!==(null==T?void 0:T.role)&&(null==_?void 0:_.id)&&Ne(_.id)},[null==T?void 0:T.role,null==_?void 0:_.id]);const ye=o.useMemo(()=>{const e=L.trim().toLowerCase(),i=q.trim(),r=s=>{const r=!e||s.label.toLowerCase().includes(e)||s.key.toLowerCase().includes(e),o=!i||String(s.order??"").includes(i);return r&&o};return s.map(e=>({...e,modules:e.modules.filter(r)}))},[s,L,q]),ke=o.useCallback(e=>{s.find(s=>String(s.id)===String(e))&&(ue(String(e)),de(!0))},[s]),Ae=o.useCallback(e=>{S(e)},[S]);o.useEffect(()=>{if(!le)return;if(!ce)return;const e=s.find(e=>String(e.id)===String(ce));e&&me.setFieldsValue({name:e.title,icon:{name:e.iconName||"AppstoreOutlined",color:e.iconColor||"#1890ff"}})},[le,ce,s,me]);const Oe=o.useCallback(async e=>{try{const i=s.find(s=>String(s.id)===String(e));if(!i)return;await f(e,{active:!i.active})}catch{D.error("Erreur activation catégorie")}},[s,f]),je=o.useCallback(async(e,s)=>{try{s?await f(e,{superAdminOnly:s,active:!1}):await f(e,{superAdminOnly:s})}catch{D.error("Erreur mise à jour visibilité admin")}},[f]),Re=o.useCallback(e=>{he({id:e.id,key:e.key,label:e.label,feature:e.feature,icon:e.icon,iconColor:e.iconColor||e.sectionColor||"#1890ff",route:e.route,description:e.description,page:e.page,order:e.order??0,active:e.active,categoryId:e.categoryId}),oe(!0)},[]),Ue=o.useCallback((e,s)=>{const i=be||(null==_?void 0:_.id)||"";i?A(e,s,i):D.error("Sélectionner une organisation")},[A,be,null==_?void 0:_.id]),we=o.useCallback(async e=>{try{if(e.id){const s=await H.put(`/api/modules/${e.id}`,e);if(!(null==s?void 0:s.success))throw new Error((null==s?void 0:s.error)||"Échec de la mise à jour");D.success("Module mis à jour")}else{const s=await H.post("/api/modules",e);if(!(null==s?void 0:s.success))throw new Error((null==s?void 0:s.error)||"Échec de la création");D.success("Module créé")}oe(!1),he(null),await O(be||(null==_?void 0:_.id)||""),$&&await $()}catch(s){const e=s instanceof Error?s.message:"Erreur lors de l'enregistrement";D.error(e)}},[H,O,$,be,null==_?void 0:_.id]),Ie=o.useCallback((e,i)=>{var r;he({key:"",label:"",feature:"",icon:"",iconColor:(null==(r=s.find(s=>String(s.id)===String(e)))?void 0:r.iconColor)||"#1890ff",route:"",description:"",page:"",order:i,active:!0,categoryId:e}),oe(!0)},[s]),Fe=o.useCallback(e=>{const s=String(e.active.id);s.startsWith("cat:")?(Me("cat"),Ee(s.replace("cat:",""))):s.startsWith("mod:")?(Me("mod"),Ee(s.replace("mod:",""))):(Me(null),Ee(null))},[]),Pe=o.useCallback(e=>{const{active:i,over:r}=e;if(Ee(null),Me(null),!r)return;const o=String(i.id),n=String(r.id);if(o!==n){if(o.startsWith("cat:")&&n.startsWith("cat:")){const e=o.replace("cat:",""),i=n.replace("cat:",""),r=s.findIndex(s=>String(s.id)===e),t=s.findIndex(e=>String(e.id)===i);if(r>-1&&t>-1){const e=c(s,r,t);E(e)}return}if(o.startsWith("mod:")){const e=new Map;s.forEach(s=>{s.modules.forEach((i,r)=>{const o=i.id??i.key??`${String(s.id)}-${r}`,n=`mod:${String(o)}`;e.set(n,{sectionId:String(s.id),index:r,moduleId:i.id})})});const i=e.get(o);if(!(null==i?void 0:i.moduleId))return;let r,t=0;if(n.startsWith("mod:")){const s=e.get(n);if(!s)return;r=s.sectionId,t=s.index}else if(n.startsWith("cat:")){const e=n.replace("cat:",""),i=s.find(s=>String(s.id)===e);if(!i)return;r=String(i.id),t=i.modules.length}if(!r)return;V(i.moduleId,i.sectionId,r,t)}}},[s,E,V]),ze="super_admin"===(null==T?void 0:T.role)?r.jsxDEV("div",{className:"flex items-center gap-2",children:[r.jsxDEV("span",{className:"text-sm text-gray-600 hidden md:inline",children:"Contexte:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:349,columnNumber:9},this),r.jsxDEV(w,{allowClear:!0,value:be||void 0,onChange:e=>{Ne(e||""),O(e||"")},placeholder:"Vue Globale (modules globaux)",style:{width:240},options:ve.map(e=>({value:e.id,label:e.name}))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:350,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:348,columnNumber:7},this):null,He=n.filter(e=>!!e.active).length,$e=n.filter(e=>!!e.isActiveForOrg).length;return r.jsxDEV("div",{className:"p-6",children:[r.jsxDEV(C,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:369,columnNumber:7},this),r.jsxDEV(X,{categoriesCount:ye.length,totalModules:n.length,totalActiveGlobal:He,totalActiveForOrg:$e,orgName:null==(e=ve.find(e=>e.id===(be||(null==_?void 0:_.id))))?void 0:e.name,searchValue:L,onSearchChange:W,orderFilterValue:q,onOrderFilterChange:G,onAddCategory:()=>{te(!0)},onAddModule:()=>{he(null),oe(!0)},onRefresh:()=>O(be||(null==_?void 0:_.id)||""),organizationSelector:ze},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:370,columnNumber:7},this),r.jsxDEV(Q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:393,columnNumber:7},this),t?r.jsxDEV("div",{className:"text-center py-8",children:"Chargement…"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:396,columnNumber:9},this):r.jsxDEV(u,{sensors:fe,collisionDetection:p,onDragStart:Fe,onDragEnd:Pe,modifiers:[K],children:[r.jsxDEV(l,{items:ye.map((e,s)=>`cat:${String(e.id??`idx-${s}`)}`),strategy:h,children:ye.map((e,s)=>{const i=e.id?`cat-${e.id}-${s}`:`cat-idx-${s}`,o=`cat:${String(e.id??`idx-${s}`)}`,n=String(e.id??`idx-${s}`),t=De.has(n);return r.jsxDEV(re,{catId:o,section:e,onEdit:ke,onDelete:Ae,onCreateCategoryFromSection:M,onPurgeFallbackSection:y,onEditModule:Re,onDeleteModule:F,onToggleOrg:Ue,onAddModuleToCategory:Ie,onToggleSectionActive:Oe,onToggleSectionAdminOnly:je,onToggleModuleActive:P,onToggleModuleSuperAdminOnly:z,isOpen:t,onPanelChange:xe},i,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:414,columnNumber:17},this)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:405,columnNumber:11},this),r.jsxDEV(v,{children:[Se&&"cat"===Ve&&(()=>{const e=s.find(e=>String(e.id)===Se);return e?r.jsxDEV("div",{className:"px-4 py-3 bg-white rounded-md shadow-lg border border-gray-200 flex items-center gap-3",children:[r.jsxDEV(Z,{name:e.iconName||"AppstoreOutlined",color:e.iconColor||"#1890ff",size:18},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:442,columnNumber:19},this),r.jsxDEV("span",{className:"font-semibold text-base text-gray-800",children:e.title},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:443,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:441,columnNumber:17},this):null})(),Se&&"mod"===Ve&&(()=>{const e=s.flatMap(e=>e.modules).find(e=>String(e.id)===Se||String(e.key)===Se);return e?r.jsxDEV("div",{className:"px-3 py-2 bg-white rounded shadow-lg border border-gray-200 flex items-center gap-2",children:[r.jsxDEV(Z,{name:e.icon||"AppstoreOutlined",color:e.iconColor||"#1890ff",size:16},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:453,columnNumber:19},this),r.jsxDEV("span",{className:"text-sm font-medium",children:e.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:454,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:452,columnNumber:17},this):null})()]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:436,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:398,columnNumber:9},this),r.jsxDEV(B,{title:(null==pe?void 0:pe.id)?"Éditer le module":"Ajouter un module",open:ie,onCancel:()=>{oe(!1),he(null)},footer:null,destroyOnHidden:!0,forceRender:!0,styles:{body:{maxHeight:"72vh",overflowY:"auto"}},children:r.jsxDEV(se,{initial:pe,onSave:we,onCancel:()=>{oe(!1),he(null)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:474,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:462,columnNumber:7},this),r.jsxDEV(B,{title:"Éditer la catégorie",open:le,onCancel:()=>{de(!1),ue(null),me.resetFields()},onOk:()=>{me.validateFields().then(async({name:e,icon:s})=>{if(!ce)return;const i=(null==s?void 0:s.name)||"AppstoreOutlined",r=(null==s?void 0:s.color)||"#1890ff";await f(ce,{name:e.trim(),icon:i,iconColor:r}),de(!1),ue(null),me.resetFields()}).catch(()=>{})},okText:"Enregistrer",cancelText:"Annuler",destroyOnHidden:!0,forceRender:!0,styles:{body:{maxHeight:"70vh",overflowY:"auto"}},children:r.jsxDEV(Y,{form:me,layout:"vertical",children:[r.jsxDEV(Y.Item,{name:"name",label:"Nom de la catégorie",rules:[{required:!0,message:"Saisissez un nom"}],children:r.jsxDEV(k,{placeholder:"Ex: Google Workspace"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:523,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:518,columnNumber:11},this),r.jsxDEV(Y.Item,{name:"icon",label:"Icône et couleur",children:r.jsxDEV(ee,{withColor:!0,value:me.getFieldValue("icon"),onChange:e=>me.setFieldsValue({icon:e})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:526,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:525,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:517,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:485,columnNumber:7},this),r.jsxDEV(B,{title:"Créer une catégorie",open:ne,onCancel:()=>{te(!1),ae.resetFields()},onOk:()=>{ae.validateFields().then(async({name:e,icon:s})=>{const i=(null==s?void 0:s.name)||"AppstoreOutlined",r=(null==s?void 0:s.color)||"#1890ff";await a({name:e.trim(),icon:i,iconColor:r}),te(!1),ae.resetFields()}).catch(()=>{})},okText:"Créer",cancelText:"Annuler",destroyOnHidden:!0,forceRender:!0,styles:{body:{maxHeight:"70vh",overflowY:"auto"}},children:r.jsxDEV(Y,{form:ae,layout:"vertical",children:[r.jsxDEV(Y.Item,{name:"name",label:"Nom de la catégorie",rules:[{required:!0,message:"Saisissez un nom"}],children:r.jsxDEV(k,{placeholder:"Ex: Google Workspace"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:567,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:562,columnNumber:11},this),r.jsxDEV(Y.Item,{name:"icon",label:"Icône et couleur",children:r.jsxDEV(ee,{withColor:!0,value:ae.getFieldValue("icon"),onChange:e=>ae.setFieldsValue({icon:e})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:570,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:569,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:561,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:536,columnNumber:7},this),r.jsxDEV(B,{title:"Supprimer le module",open:j,onOk:U,onCancel:I,okText:"Supprimer",cancelText:"Annuler",okType:"danger",children:R&&r.jsxDEV("p",{children:['Êtes-vous sûr de vouloir supprimer le module "',r.jsxDEV("strong",{children:R.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:590,columnNumber:59},this),'" ?',r.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:591,columnNumber:13},this),r.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:592,columnNumber:13},this),"Cette action est irréversible et supprimera le module de la base de données."]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:589,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:579,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/admin-modules/AdminModulesPage.tsx",lineNumber:368,columnNumber:5},this)}function ne(){return r.jsxDEV(oe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/admin/ModulesAdminPage.tsx",lineNumber:5,columnNumber:10},this)}export{ne as default};
