import{j as e}from"./index-C0S0DpaX.js";import{m as t,r as n}from"./react-vendor-Al_k-ZB6.js";import"./antd-vendor-zFcGztvE.js";const i=(e,t)=>{if(document.getElementById(e))return;const n=document.createElement("script");n.id=e,n.innerHTML=t,document.head.appendChild(n)};function r(){const{slug:r}=t(),[s,a]=n.useState(null),[d,c]=n.useState(null);return n.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/landing-pages/public/${r}`),t=await e.json();if(!(null==t?void 0:t.success))throw new Error((null==t?void 0:t.message)||"Erreur");a(t.data);const n=t.data.seo||{};if(n.title&&(document.title=n.title),n.description){let e=document.querySelector('meta[name="description"]');e||(e=document.createElement("meta"),e.setAttribute("name","description"),document.head.appendChild(e)),e.setAttribute("content",n.description)}if(n.keywords&&n.keywords.length){let e=document.querySelector('meta[name="keywords"]');e||(e=document.createElement("meta"),e.setAttribute("name","keywords"),document.head.appendChild(e)),e.setAttribute("content",n.keywords.join(","))}const s=t.data.tracking||{};if(s.enable){if(s.googleTagId){const e=s.googleTagId;if(!document.getElementById("gtag-lib")){const t=document.createElement("script");t.id="gtag-lib",t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(t)}i("gtag-init",`window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '${e}');`)}if(s.metaPixelId){const e=s.metaPixelId;i("fb-pixel",`!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js'); fbq('init', '${e}'); fbq('track', 'PageView');`)}}}catch(e){e instanceof Error?c(e.message||"Erreur de chargement"):c("Erreur de chargement")}})()},[r]),d?e.jsxDEV("div",{style:{padding:24,color:"red"},children:d},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:86,columnNumber:21},this):s?e.jsxDEV("div",{style:{minHeight:"100vh"},children:[e.jsxDEV("header",{style:{padding:"48px 24px",textAlign:"center"},children:[e.jsxDEV("h1",{style:{fontSize:40,margin:0},children:s.title},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:94,columnNumber:9},this),s.subtitle&&e.jsxDEV("p",{style:{color:"#666"},children:s.subtitle},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:95,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:93,columnNumber:7},this),e.jsxDEV("main",{style:{maxWidth:900,margin:"0 auto",padding:24},children:e.jsxDEV("pre",{style:{background:"#f9f9f9",padding:16,borderRadius:8},children:JSON.stringify(s.content,null,2)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:98,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:97,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:92,columnNumber:5},this):e.jsxDEV("div",{style:{padding:24},children:"Chargementâ€¦"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/public/LandingRenderer.tsx",lineNumber:87,columnNumber:21},this)}export{r as default};
