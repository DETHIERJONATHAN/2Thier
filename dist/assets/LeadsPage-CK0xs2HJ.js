import{u as e,j as s}from"./index-C0S0DpaX.js";import{h as r,k as t,O as i,r as n,R as o,m as a,u as l,g as d,N as c,i as m,j as u}from"./react-vendor-Al_k-ZB6.js";import{af as p,ag as v,a as D,$ as h,T as N,j as b,Z as C,f as g,aI as x,l as f,u as E,R as V,ab as S,aJ as M,Q as A,c as L,w as k,aK as y,P as O,aL as R,aM as j,a8 as U,B as w,aN as I,N as P,X as T,aO as z,a2 as H,aP as $,a6 as F,I as K,a7 as _,aQ as q,aR as Y,ay as B,aS as W,ad as G,aT as J,a4 as X,aH as Q,aq as Z,b as ee,aA as se,aU as re,aV as te,F as ie,an as ne,a3 as oe,aW as ae,al as le,aX as de,s as ce,aY as me,aZ as ue,e as pe,a0 as ve,a_ as De,Y as he,a$ as Ne,ae as be,aF as Ce,x as ge,b0 as xe,aw as fe,q as Ee,h as Ve,b1 as Se,aG as Me,b2 as Ae,b3 as Le,b4 as ke,b5 as ye,H as Oe,b6 as Re,i as je,ax as Ue,b7 as we,b8 as Ie,b9 as Pe,D as Te,aC as ze,O as He,ba as $e,bb as Fe,bc as Ke,aj as _e,am as qe,a9 as Ye,bd as Be,be as We,bf as Ge,g as Je,bg as Xe,bh as Qe,o as Ze,bi as es,bj as ss,bk as rs}from"./antd-vendor-zFcGztvE.js";import{N as ts,a as is}from"./Notifications-Bhgc2wzd.js";import{u as ns}from"./useAuthenticatedApi-BbQI8SDU.js";import{L as os}from"./LeadCreatorModalAdvanced-C3Kd05xY.js";import{j as as}from"./jsx-runtime-DHbGwwJb.js";import{R as ls,P as ds,a as cs,C as ms,T as us,B as ps,b as vs,X as Ds,Y as hs,c as Ns}from"./charts-vendor-BhQc8HjP.js";import"./data-vendor-wH_FeJEU.js";const{Text:bs}=N,Cs=()=>{const{can:i}=e(),n=r(),o=i("leads_dashboard:read"),a=i("leads:read"),l=[{to:"/leads/dashboard",icon:s.jsxDEV(b,{className:"text-2xl"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:27,columnNumber:13},void 0),label:"Tableau de bord",description:"Vue d'ensemble & KPIs",color:"#1890ff",bgGradient:"from-blue-50 to-blue-100",borderColor:"border-blue-200",condition:o},{to:"/leads/list",icon:s.jsxDEV(C,{className:"text-2xl"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:37,columnNumber:13},void 0),label:"Contacts",description:"Base de donn√©es",color:"#52c41a",bgGradient:"from-green-50 to-green-100",borderColor:"border-green-200",condition:a},{to:"/leads/kanban",icon:s.jsxDEV(g,{className:"text-2xl"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:47,columnNumber:13},void 0),label:"Vue Kanban",description:"Pipeline visuel",color:"#722ed1",bgGradient:"from-purple-50 to-purple-100",borderColor:"border-purple-200",condition:a},{to:"/leads/integrations",icon:s.jsxDEV(x,{className:"text-2xl"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:58,columnNumber:13},void 0),label:"Int√©grations",description:"Connexions externes",color:"#13c2c2",bgGradient:"from-cyan-50 to-cyan-100",borderColor:"border-cyan-200",condition:!0},{to:"/leads/settings",icon:s.jsxDEV(f,{className:"text-2xl"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:68,columnNumber:13},void 0),label:"Param√®tres",description:"Configuration",color:"#8c8c8c",bgGradient:"from-gray-50 to-gray-100",borderColor:"border-gray-200",condition:!0}].filter(e=>e.condition);return s.jsxDEV("div",{className:"bg-gradient-to-r from-gray-50 to-white py-6 border-b border-gray-200",children:s.jsxDEV("div",{className:"max-w-7xl mx-auto px-6",children:s.jsxDEV(p,{gutter:[16,16],justify:"start",children:l.map(e=>{const r=n.pathname===e.to||n.pathname.startsWith(e.to+"/");return s.jsxDEV(v,{xs:24,sm:12,md:8,lg:4,xl:4,children:s.jsxDEV(t,{to:e.to,children:s.jsxDEV(D,{hoverable:!0,className:`\n                      transition-all duration-300 transform hover:scale-105 hover:shadow-lg relative\n                      ${r?`border-2 shadow-md bg-gradient-to-br ${e.bgGradient} ${e.borderColor}`:"border border-gray-200 hover:border-gray-300 bg-white"}\n                    `,styles:{body:{padding:"16px",textAlign:"center",height:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},children:s.jsxDEV(h,{direction:"vertical",size:"small",className:"w-full",children:[s.jsxDEV("div",{className:`\n                          inline-flex items-center justify-center w-12 h-12 rounded-lg mx-auto\n                          ${r?"bg-white shadow-sm":"bg-gray-50"}\n                        `,style:{color:e.color},children:e.icon},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:113,columnNumber:23},void 0),s.jsxDEV("div",{children:[s.jsxDEV(bs,{strong:!0,className:"block text-sm "+(r?"text-gray-800":"text-gray-700"),children:e.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:124,columnNumber:25},void 0),s.jsxDEV(bs,{type:"secondary",className:"text-xs "+(r?"text-gray-600":"text-gray-500"),children:e.description},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:130,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:123,columnNumber:23},void 0),r&&s.jsxDEV("div",{className:"absolute top-0 right-0 bg-blue-500 text-white text-xs px-2 py-1 rounded-bl-lg font-medium",children:"Actif"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:139,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:112,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:91,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:90,columnNumber:17},void 0)},e.to,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:89,columnNumber:15},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:84,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:83,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHorizontalNavigation.tsx",lineNumber:82,columnNumber:5},void 0)};function gs(){return s.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[s.jsxDEV(Cs,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsLayout.tsx",lineNumber:14,columnNumber:7},this),s.jsxDEV("main",{className:"max-w-7xl mx-auto",children:[s.jsxDEV(ts,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsLayout.tsx",lineNumber:18,columnNumber:9},this),s.jsxDEV(i,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsLayout.tsx",lineNumber:19,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsLayout.tsx",lineNumber:17,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsLayout.tsx",lineNumber:12,columnNumber:5},this)}function xs(){const[e,s]=n.useState([]),[r,t]=n.useState(!0),[i,o]=n.useState(null),a=ns(),l=n.useMemo(()=>a.api,[a.api]),d=n.useCallback(async()=>{try{t(!0),o(null);const e=(await l.get("/api/settings/lead-statuses")).map(e=>({...e,label:e.name,value:e.name.toLowerCase().replace(/\s+/g,"_")}));s(e)}catch(e){o(e instanceof Error?e.message:"Erreur inconnue"),s([{id:"1",name:"Nouveau",label:"Nouveau",value:"nouveau",color:"#52c41a",order:0,isDefault:!0,organizationId:"",createdAt:"",updatedAt:""},{id:"2",name:"En cours",label:"En cours",value:"en_cours",color:"#1890ff",order:1,isDefault:!1,organizationId:"",createdAt:"",updatedAt:""},{id:"3",name:"Ferm√©",label:"Ferm√©",value:"ferme",color:"#f5222d",order:2,isDefault:!1,organizationId:"",createdAt:"",updatedAt:""}])}finally{t(!1)}},[l]);return n.useEffect(()=>{d()},[d]),{leadStatuses:e,isLoading:r,error:i,refreshStatuses:d}}const fs=({open:e,onCancel:r,onSuccess:t})=>s.jsxDEV(os,{open:e,onClose:r,onLeadCreated:()=>{null==t||t(),r()},onCreateLead:async()=>{}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/components/AddLeadModal.tsx",lineNumber:12,columnNumber:5},void 0),Es=({open:e,lead:r,onCancel:t,onSuccess:i})=>s.jsxDEV(os,{open:e,onClose:t,onLeadCreated:()=>null==i?void 0:i(),onCreateLead:async()=>{},mode:"edit",initialLead:{id:r.id,firstName:r.firstName,lastName:r.lastName,email:r.email,phone:r.phone,company:r.company,source:r.source,website:r.website,notes:r.notes,nextFollowUpDate:r.nextFollowUpDate,data:r.data||null,status:r.status,assignedToId:r.assignedToId||null}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/components/EditLeadModal.tsx",lineNumber:14,columnNumber:5},void 0),Vs=(e,s="Erreur inconnue")=>e instanceof Error&&e.message||"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?e.message:s,Ss=e=>{if("object"==typeof e&&null!==e&&"response"in e&&"object"==typeof e.response){const{response:s}=e;return{status:null==s?void 0:s.status,data:null==s?void 0:s.data}}return{}},Ms=e=>{if("object"!=typeof e||null===e)return!1;return"data"in e||"success"in e||"error"in e||"message"in e},As=e=>null==e?null:Ms(e)?null!=e.data?e.data:null:e,Ls=e=>e?Array.isArray(e)?e:Ms(e)&&Array.isArray(e.data)?e.data:[]:[],{Title:ks,Text:ys}=N,Os=({lead:e,callInProgress:r,className:t})=>{var i;const o=n.useMemo(()=>{if(!(null==e?void 0:e.status))return"default";switch(e.status){case"new":return"blue";case"contacted":return"orange";case"qualified":return"green";case"converted":return"success";case"rejected":return"red";default:return"default"}},[null==e?void 0:e.status]),a=n.useMemo(()=>{var s,r,t,i,n,o,a,l;if(!e)return null;const d=(e=>{if(!e)return"Adresse non renseign√©e";if("string"==typeof e)return e.trim()||"Adresse non renseign√©e";if(Array.isArray(e)){return e.filter(Boolean).join(", ").trim()||"Adresse non renseign√©e"}if("object"==typeof e){const{street:s,city:r,zipCode:t,postalCode:i,state:n,country:o}=e;return[s,r,t||i,n,o].filter(Boolean).join(", ").trim()||"Adresse non renseign√©e"}try{return String(e)}catch{return"Adresse non renseign√©e"}})((null==(s=e.data)?void 0:s.address)??(null==(r=e.data)?void 0:r.city));return{name:e.name||(e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"")||(null==(t=e.data)?void 0:t.name)||"Nom non renseign√©",email:e.email||(null==(i=e.data)?void 0:i.email)||"Email non renseign√©",phone:e.phone||(null==(n=e.data)?void 0:n.phone)||"T√©l√©phone non renseign√©",company:e.company||(null==(o=e.data)?void 0:o.company)||"Entreprise non renseign√©e",title:(null==(a=e.data)?void 0:a.title)||"Poste non renseign√©",address:d,source:e.source||"Source inconnue",industry:(null==(l=e.data)?void 0:l.industry)||"Secteur non pr√©cis√©"}},[e]);return e&&a?s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(V,{style:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:125,columnNumber:11},void 0),s.jsxDEV("span",{children:"Informations du Lead"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:126,columnNumber:11},void 0),r&&s.jsxDEV(S,{color:"processing",children:"En appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:128,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:124,columnNumber:9},void 0),className:t,children:[s.jsxDEV("div",{style:{textAlign:"center",marginBottom:20},children:[s.jsxDEV(E,{size:64,icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:139,columnNumber:17},void 0),style:{backgroundColor:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:137,columnNumber:9},void 0),s.jsxDEV("div",{style:{marginTop:12},children:[s.jsxDEV(ks,{level:4,style:{margin:0},children:a.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:143,columnNumber:11},void 0),s.jsxDEV(ys,{type:"secondary",children:a.title},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:146,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:142,columnNumber:9},void 0),s.jsxDEV("div",{style:{marginTop:12},children:[s.jsxDEV(S,{color:o,size:"small",children:(null==(i=e.status)?void 0:i.toUpperCase())||"NOUVEAU"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:152,columnNumber:11},void 0),s.jsxDEV(S,{color:"blue",size:"small",children:a.source.toUpperCase()},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:155,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:151,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:136,columnNumber:7},void 0),s.jsxDEV(M,{column:1,size:"small",bordered:!0,children:[s.jsxDEV(M.Item,{label:s.jsxDEV(h,{children:[s.jsxDEV(A,{style:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:167,columnNumber:15},void 0),s.jsxDEV("span",{children:"T√©l√©phone"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:168,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:166,columnNumber:13},void 0),children:s.jsxDEV(ys,{copyable:!!a.phone&&"T√©l√©phone non renseign√©"!==a.phone,children:a.phone},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:172,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:164,columnNumber:9},void 0),s.jsxDEV(M.Item,{label:s.jsxDEV(h,{children:[s.jsxDEV(L,{style:{color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:180,columnNumber:15},void 0),s.jsxDEV("span",{children:"Email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:181,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:179,columnNumber:13},void 0),children:s.jsxDEV(ys,{copyable:!!a.email&&"Email non renseign√©"!==a.email,children:a.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:185,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:177,columnNumber:9},void 0),s.jsxDEV(M.Item,{label:s.jsxDEV(h,{children:[s.jsxDEV(k,{style:{color:"#722ed1"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:193,columnNumber:15},void 0),s.jsxDEV("span",{children:"Entreprise"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:194,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:192,columnNumber:13},void 0),children:a.company},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:190,columnNumber:9},void 0),s.jsxDEV(M.Item,{label:s.jsxDEV(h,{children:[s.jsxDEV(y,{style:{color:"#13c2c2"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:204,columnNumber:15},void 0),s.jsxDEV("span",{children:"Secteur"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:205,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:203,columnNumber:13},void 0),children:a.industry},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:201,columnNumber:9},void 0),s.jsxDEV(M.Item,{label:s.jsxDEV(h,{children:[s.jsxDEV(O,{style:{color:"#eb2f96"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:215,columnNumber:15},void 0),s.jsxDEV("span",{children:"Localisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:216,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:214,columnNumber:13},void 0),children:a.address},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:212,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:162,columnNumber:7},void 0),s.jsxDEV("div",{style:{marginTop:16,padding:12,backgroundColor:"#fafafa",borderRadius:6,fontSize:12},children:s.jsxDEV(h,{direction:"vertical",style:{width:"100%"},children:[s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxDEV(ys,{type:"secondary",children:"ID Lead:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:235,columnNumber:13},void 0),s.jsxDEV(ys,{code:!0,children:e.id},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:236,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:234,columnNumber:11},void 0),e.createdAt&&s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxDEV(ys,{type:"secondary",children:"Cr√©√© le:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:241,columnNumber:15},void 0),s.jsxDEV(ys,{type:"secondary",children:new Date(e.createdAt).toLocaleDateString("fr-FR")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:242,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:240,columnNumber:13},void 0),e.updatedAt&&s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxDEV(ys,{type:"secondary",children:"Mis √† jour:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:250,columnNumber:15},void 0),s.jsxDEV(ys,{type:"secondary",children:new Date(e.updatedAt).toLocaleDateString("fr-FR")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:251,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:249,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:233,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:226,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:122,columnNumber:5},void 0):s.jsxDEV(D,{title:"üë§ Informations du Lead",className:t,children:s.jsxDEV("div",{style:{textAlign:"center",padding:20},children:s.jsxDEV(ys,{type:"secondary",children:"Aucune information disponible"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:115,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:114,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/LeadInfoPanel.tsx",lineNumber:110,columnNumber:7},void 0)},Rs=[{pattern:/^\/google-gmail(\/|$)/i,page:"pages/GoogleMailPageFixed_New.tsx",module:"mail"},{pattern:/^\/(mail|gmail)(\/|$)/i,page:"pages/GoogleMailPageFixed_New.tsx",module:"mail"},{pattern:/^\/leads(\/|$)/i,page:"pages/Leads/LeadsPage.tsx",module:"leads"},{pattern:/^\/(agenda|calendar|google-agenda)(\/|$)/i,page:"pages/CalendarPage.tsx",module:"agenda"},{pattern:/^\/(admin|settings|config)(\/|$)/i,page:"pages/admin/UsersAdminPage.tsx",module:"admin"}];const js=e=>{const{api:s}=ns(),r=n.useRef({});if("undefined"!=typeof window)try{const e=function(e){for(const r of Rs)if(r.pattern.test(e))return{page:r.page,module:r.module};const s="undefined"!=typeof window?window:{};return{page:s.__APP_DEFAULT_PAGE,module:s.__APP_DEFAULT_MODULE}}(window.location.pathname);r.current={currentModule:e.module,currentPage:e.page}}catch{}const[t,i]=n.useState([]),[o,a]=n.useState(null),[l,d]=n.useState(!1),[c,m]=n.useState(!1),[u,p]=n.useState(!1),[v,D]=n.useState(null),[h,N]=n.useState(null),b=n.useRef(null);n.useEffect(()=>{let r=!1;return async function(){if(null==e?void 0:e.id)try{const t=await s.get(`/api/ai/context/lead/${e.id}`),i=(null==t?void 0:t.data)||t,n=(null==i?void 0:i.data)??i;r||(b.current=n)}catch(t){r||(b.current=null)}else b.current=null}(),()=>{r=!0}},[s,null==e?void 0:e.id]);const C=n.useCallback(async n=>{var l,c,u;try{d(!0),m(!0);const v=await s.post("/api/ai/chat",{message:n,context:{userRole:"commercial",currentModule:r.current.currentModule||"calls",currentPage:r.current.currentPage,lead:e,leadContext:b.current},conversationHistory:t.slice(-5),analysis:o||void 0}),h=v.data||v,N=h.data||h;let C=N.response||(null==(l=N.data)?void 0:l.response)||N.text||N.message;const g=N.metadata||(null==(c=N.data)?void 0:c.metadata)||{};if(C&&C.includes("```json"))try{const e=C.match(/```json\s*([\s\S]*?)\s*```/);if(e){const s=JSON.parse(e[1]);if(C=s.response||s.text||C,s.suggestions&&Array.isArray(s.suggestions)&&(N.suggestions=s.suggestions),s.analysis&&"object"==typeof s.analysis)try{D(e=>({...e||{},...s.analysis}))}catch{}}}catch(p){}if(C&&C.trim()){if(N.analysis)try{D(N.analysis)}catch{}if(N.analysis)try{a(N.analysis)}catch{}const e={id:`ai-${Date.now()}`,type:"ai",message:C,timestamp:new Date,suggestions:N.suggestions||(null==(u=N.data)?void 0:u.suggestions)||[],context:{relatedToCall:!0,priority:"high",category:"mock"===g.mode?"ai-mock":"ai-live",source:"mock"===g.mode?"mock-fallback":g.model||"gemini",processingTime:g.latencyMs||0,fallback:!!g.fallbackError,endpoint:g.endpoint}};return i(s=>[...s,e]),{aiResponse:C,meta:g,raw:N}}throw new Error("Aucune r√©ponse valide de l'API Gemini")}catch(v){const e={id:`error-${Date.now()}`,type:"ai",message:"D√©sol√©, je ne peux pas r√©pondre pour le moment. L'API Gemini n'est pas disponible.",timestamp:new Date,suggestions:["R√©essayer","Continuer sans IA"],context:{relatedToCall:!1,priority:"low",category:"error"}};return i(s=>[...s,e]),null}d(!1),m(!1)},[s,e,t,o]),g=n.useCallback(async e=>{if(!e.trim())return;const s={id:`user-${Date.now()}`,type:"user",message:e,timestamp:new Date};i(e=>[...e,s]),await C(e)},[C]),x=n.useCallback(()=>{i([]),a(null)},[]),f=n.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){const e={id:`error-${Date.now()}`,type:"ai",message:"D√©sol√©, la reconnaissance vocale n'est pas support√©e par ton navigateur. Utilise Chrome ou Edge pour cette fonctionnalit√©.",timestamp:new Date,suggestions:["Utiliser le clavier","Changer de navigateur"],context:{relatedToCall:!1,priority:"low",category:"voice-error"}};return void i(s=>[...s,e])}try{const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.lang="fr-FR",e.continuous=!1,e.interimResults=!1,e.maxAlternatives=1,p(!0),e.start(),e.onresult=e=>{const s=e.results[0][0].transcript;s.trim()&&g(s),p(!1)},e.onerror=e=>{p(!1);let s="Erreur de reconnaissance vocale.";switch(e.error){case"no-speech":s="Aucune parole d√©tect√©e. R√©essaie en parlant plus fort.";break;case"network":s="Probl√®me de connexion r√©seau.";break;case"not-allowed":s="Microphone bloqu√©. Autorise l'acc√®s au micro dans ton navigateur."}const r={id:`voice-error-${Date.now()}`,type:"ai",message:s,timestamp:new Date,suggestions:["R√©essayer","Utiliser le clavier"],context:{relatedToCall:!1,priority:"medium",category:"voice-error"}};i(e=>[...e,r])},e.onend=()=>{p(!1)}}catch(e){p(!1);const s={id:`init-error-${Date.now()}`,type:"ai",message:"Impossible d'initialiser la reconnaissance vocale. Utilise le clavier.",timestamp:new Date,suggestions:["Utiliser le clavier","R√©essayer plus tard"],context:{relatedToCall:!1,priority:"low",category:"init-error"}};i(e=>[...e,s])}},[g,i]),E=n.useCallback(async i=>{var n;try{const a=await s.post("/api/ai/chat",{message:`G√©n√®re 4 suggestions contextuelles pour l'appel commercial avec ${(null==(n=null==e?void 0:e.data)?void 0:n.name)||"ce prospect"}`,context:{userRole:"commercial",currentModule:r.current.currentModule||"calls",currentPage:r.current.currentPage,suggestionRequest:!0,callContext:i,lead:e,leadContext:b.current,currentAnalysis:o},conversationHistory:t.slice(-5)}),l=a.data||a,d=l.data||l;return(null==d?void 0:d.suggestions)?d.suggestions:["Approfondir les besoins du prospect","Pr√©senter une solution adapt√©e","G√©rer les objections avec empathie","Proposer un prochain rendez-vous"]}catch(a){return["√âcouter activement le prospect","Poser des questions ouvertes","Pr√©senter les b√©n√©fices cl√©s","Planifier le suivi commercial"]}},[s,e,o,t]),V=n.useCallback(async()=>{var e;const t=r.current.currentPage;if(!t)return;m(!0);const i=`src/${t}`;let n=!0;try{await s.get("/api/ai/code/analyze",{params:{path:i}})}catch(o){n=!1}try{let t=null;if(!n)try{const r=await s.get("/api/ai/context/summary");t=(null==(e=(null==r?void 0:r.data)||r)?void 0:e.data)||null}catch{}const o='R√®gles strictes: 1) N\'√©cris jamais "Impossible √† √©valuer" ni "sans acc√®s au code". 2) Ne propose pas de "contacter un d√©veloppeur". 3) Donne 6 actions concr√®tes, cibl√©es, faisables en <2h chacune. 4) Concentre-toi sur UX, accessibilit√© (WCAG), i18n, performance, stabilit√© hooks, Ant Design et Tailwind. 5) Pas de g√©n√©ration de code. 6) Termine par un bloc JSON (entre ```json et ```) avec { "analysis": { "page"?: {"path": string, "lines"?: number, "hooks"?: {"total"?: number, "useEffect"?: number, "custom"?: string[]}, "antd"?: string[], "i18n"?: boolean, "tailwind"?: boolean, "complexity"?: string[], "suggestions"?: string[], "score"?: number }, "feature"?: {"feature": string, "fileCount"?: number, "totalLines"?: number, "avgLines"?: number, "totalHooks"?: number, "i18nCoverage"?: number, "antdUsageRate"?: number, "tailwindUsageRate"?: number }, "excerpt"?: string } }.',a=`Page: ${i}. Module: ${r.current.currentModule||"inconnu"}.`,l=t?`Contexte: ${JSON.stringify(t).slice(0,1200)}.`:"",d=n?`${a} Consolide l'analyse existante de la page. ${o} Donne: R√©sum√© (2 phrases), Score (0-100), Hooks cl√©s (liste), Usage i18n/AntD/Tailwind, et 6 suggestions prioris√©es.`:`${a} L'analyse directe a √©chou√© (403). Fais une analyse heuristique bas√©e sur la connaissance du CRM. ${o} ${l} Donne: R√©sum√© (2 phrases), Score estim√© (0-100), Hooks cl√©s probables, Usage i18n/AntD/Tailwind attendu, et 6 suggestions prioris√©es et actionnables.`,c=await C(d);c&&c.aiResponse&&D(e=>({...e||{},excerpt:c.aiResponse}))}finally{m(!1)}},[s,C]),S=n.useCallback(async()=>{var e;const t=r.current.currentModule;if(!t)return;m(!0);let i=!0;try{await s.get("/api/ai/code/feature/analyze",{params:{feature:t}})}catch(n){i=!1}try{let r=null;if(!i)try{const t=await s.get("/api/ai/context/summary");r=(null==(e=(null==t?void 0:t.data)||t)?void 0:e.data)||null}catch{}const n='R√®gles strictes: 1) N\'√©cris jamais "Impossible √† √©valuer" ni "sans acc√®s au code". 2) Ne propose pas de "contacter un d√©veloppeur". 3) Donne 6 actions concr√®tes (<2h), prioris√©es. 4) Couvre performance, dette technique, UX/i18n/a11y, hooks, AntD/Tailwind. 5) Pas de g√©n√©ration de code. 6) Termine par un bloc JSON (entre ```json et ```) avec { "analysis": { "page"?: {"path": string, "lines"?: number, "hooks"?: {"total"?: number, "useEffect"?: number, "custom"?: string[]}, "antd"?: string[], "i18n"?: boolean, "tailwind"?: boolean, "complexity"?: string[], "suggestions"?: string[], "score"?: number }, "feature"?: {"feature": string, "fileCount"?: number, "totalLines"?: number, "avgLines"?: number, "totalHooks"?: number, "i18nCoverage"?: number, "antdUsageRate"?: number, "tailwindUsageRate"?: number }, "excerpt"?: string } }.',o=r?`Contexte: ${JSON.stringify(r).slice(0,1200)}.`:"",a=i?`Module: "${t}". Consolide l'analyse existante. ${n} Donne: principaux fichiers, volume de lignes, hooks totaux, usages i18n/AntD/Tailwind, et 6 priorit√©s d'am√©lioration.`:`Module: "${t}". L'analyse directe a √©chou√© (403). Fais une analyse heuristique du module bas√©e sur le contexte CRM. ${n} ${o} Donne: principaux fichiers attendus, zones risqu√©es, m√©triques estim√©es (qualitatives) et 6 priorit√©s d'am√©lioration.`,l=await C(a);l&&l.aiResponse&&D(e=>({...e||{},excerpt:l.aiResponse}))}finally{m(!1)}},[s,C]),M=n.useCallback(async()=>{try{m(!0);const e=["src/pages/GoogleMailPageFixed_New.tsx","src/routes/ai.ts","src/routes/ai-code.ts","src/hooks/useAuthenticatedApi.ts","src/route-map.ts"],r=await s.post("/api/ai/code/analyze/batch",{paths:e}),t=(r.data||r).data,i=(null==t?void 0:t.analyses)||[];if(!i.length)return void N(null);const n=i.length,o=i.reduce((e,s)=>e+(s.lines||0),0),a=Math.round(o/n),l=i.reduce((e,s)=>{var r;return e+((null==(r=s.hooks)?void 0:r.total)||0)},0),d=i.filter(e=>e.i18n).length/n,c=i.filter(e=>(e.antdComponents||[]).length>0).length/n,u=i.slice().sort((e,s)=>(s.lines||0)-(e.lines||0)).slice(0,5).map(e=>({path:e.path,lines:e.lines})),p=[];a>400&&p.push("taille moyenne √©lev√©e"),l/Math.max(1,n)>15&&p.push("beaucoup de hooks"),N({fileCount:n,totalLines:o,avgLines:a,totalHooks:l,i18nCoverage:d,antdUsageRate:c,topComplexitySignals:p,topFiles:u})}catch(e){N(null);try{const e=await C('R√©sum√© global CRM (fallback, pas de code): R√®gles strictes: ne dis jamais "impossible √† √©valuer" ni de contacter un d√©veloppeur. Donne 6 actions concr√®tes (<2h), orient√©es dettes techniques, UX/i18n/a11y, perf, hooks et s√©curit√©. Termine par un bloc JSON entre ```json et ``` avec { "analysis": { "excerpt": string } }.');e&&e.aiResponse&&D(s=>({...s||{},excerpt:e.aiResponse}))}catch{}}finally{m(!1)}},[s,C]);return n.useMemo(()=>({messages:t,sendMessage:g,currentAnalysis:o,isAnalyzing:l,isLoading:l,analysisLoading:c,isListening:u,clearChat:x,generateResponse:C,startListening:f,getSuggestions:E,codeAnalysis:v,analyzeCurrentPage:V,analyzeCurrentFeature:S,analyzeWorkspaceQuick:M,globalAnalysis:h}),[t,g,o,l,u,x,C,f,E,c,v,V,S,M,h])},{TextArea:Us}=K,{Text:ws}=N,Is=({lead:e,callState:r,callNotes:t,onSuggestionSelect:i})=>{const{messages:o,sendMessage:a,getSuggestions:l,isLoading:d,isListening:c,startListening:m}=js(e),[u,p]=n.useState(""),[v,N]=n.useState(!1),[b,C]=n.useState([]),[g,x]=n.useState({enabled:!0,autoSpeak:!0,volume:.8,rate:1,voice:"fr-FR"}),[f,M]=n.useState(!1),A=n.useRef(null),L=n.useRef(null),k=n.useRef(null),y=n.useCallback(e=>{if(!g.enabled||!g.autoSpeak||!L.current)return;L.current.cancel();const s=new SpeechSynthesisUtterance(e);s.volume=g.volume,s.rate=g.rate,s.lang="fr-FR",s.onstart=()=>{M(!0)},s.onend=()=>{M(!1)},s.onerror=e=>{M(!1)};const r=L.current.getVoices().find(e=>e.lang.startsWith("fr")||e.name.toLowerCase().includes("french"));r&&(s.voice=r),L.current.speak(s)},[g]),O=n.useCallback(()=>{L.current&&(L.current.cancel(),M(!1))},[]);n.useEffect(()=>{if("speechSynthesis"in window){L.current=window.speechSynthesis;const e=()=>{L.current.getVoices()};e(),L.current.onvoiceschanged=e}return()=>{L.current&&L.current.cancel()}},[]),n.useEffect(()=>{A.current&&(A.current.scrollTop=A.current.scrollHeight)},[o]);const K=n.useCallback(async()=>{try{const s=await l({callDuration:r.duration,callNotes:t,leadData:e.data,conversationContext:o.slice(-3)});C(s.slice(0,4))}catch(s){}},[r.duration,t,e.data,o,l]);n.useEffect(()=>{r.isInProgress&&r.duration>30&&K()},[r.isInProgress,r.duration,K]),n.useEffect(()=>{const e=o.filter(e=>"ai"===e.type);if(e.length>0&&g.autoSpeak){const s=e[e.length-1];Date.now()-s.timestamp.getTime()<5e3&&y(s.message)}},[o,g.autoSpeak,y]);const B=n.useCallback(async e=>{if(e.trim()){p(""),N(!0);try{await a(e),K()}catch(s){}finally{N(!1)}}},[a,K]),W=n.useCallback(()=>{c||m()},[c,m]),G=n.useCallback(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B(u))},[u,B]),J=n.useCallback(e=>{i(e),B(`Utilise cette suggestion: ${e}`)},[i,B]),X=o.map(e=>({id:e.id,type:e.type,content:e.message,timestamp:e.timestamp,isVoice:!1}));return s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(P,{style:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:295,columnNumber:11},void 0),s.jsxDEV("span",{children:"Assistant IA Vocal"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:296,columnNumber:11},void 0),s.jsxDEV(U,{status:r.isInProgress?"processing":"default",text:r.isInProgress?"Actif":"Veille"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:297,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:294,columnNumber:9},void 0),extra:s.jsxDEV(h,{children:s.jsxDEV(_,{title:g.enabled?"D√©sactiver voix":"Activer voix",children:s.jsxDEV(j,{checked:g.enabled,onChange:e=>x(s=>({...s,enabled:e})),checkedChildren:s.jsxDEV(Y,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:309,columnNumber:32},void 0),unCheckedChildren:s.jsxDEV(I,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:310,columnNumber:34},void 0),size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:306,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:305,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:304,columnNumber:9},void 0),style:{height:"100%",display:"flex",flexDirection:"column"},styles:{body:{flex:1,display:"flex",flexDirection:"column",padding:16}},children:[g.enabled&&s.jsxDEV("div",{style:{marginBottom:16,padding:12,backgroundColor:"#fafafa",borderRadius:6},children:s.jsxDEV(h,{direction:"vertical",style:{width:"100%"},size:"small",children:[s.jsxDEV(h,{children:[s.jsxDEV(ws,{type:"secondary",style:{fontSize:12},children:"Volume:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:330,columnNumber:15},void 0),s.jsxDEV(R,{min:0,max:1,step:.1,value:g.volume,onChange:e=>x(s=>({...s,volume:e})),style:{width:80},size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:331,columnNumber:15},void 0),s.jsxDEV(ws,{type:"secondary",style:{fontSize:12},children:"Vitesse:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:340,columnNumber:15},void 0),s.jsxDEV(R,{min:.5,max:2,step:.1,value:g.rate,onChange:e=>x(s=>({...s,rate:e})),style:{width:80},size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:341,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:329,columnNumber:13},void 0),s.jsxDEV(h,{children:[s.jsxDEV(j,{checked:g.autoSpeak,onChange:e=>x(s=>({...s,autoSpeak:e})),size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:353,columnNumber:15},void 0),s.jsxDEV(ws,{type:"secondary",style:{fontSize:12},children:"Lecture automatique"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:358,columnNumber:15},void 0),f&&s.jsxDEV(U,{status:"processing",text:"Parle..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:361,columnNumber:17},void 0),f&&s.jsxDEV(w,{size:"small",type:"text",danger:!0,onClick:O,icon:s.jsxDEV(I,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:371,columnNumber:25},void 0),children:"Stop"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:366,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:352,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:328,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:322,columnNumber:9},void 0),s.jsxDEV("div",{ref:A,style:{flex:1,overflowY:"auto",marginBottom:16,maxHeight:300},children:[0===X.length?s.jsxDEV("div",{style:{textAlign:"center",padding:20,color:"#666"},children:[s.jsxDEV(P,{style:{fontSize:24,marginBottom:8}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:396,columnNumber:13},void 0),s.jsxDEV("div",{children:"Aucun message pour le moment"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:397,columnNumber:13},void 0),s.jsxDEV("div",{style:{fontSize:12},children:"Tapez votre message ou utilisez la voix"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:398,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:395,columnNumber:11},void 0):s.jsxDEV("div",{children:X.map(e=>s.jsxDEV("div",{style:{marginBottom:16},children:s.jsxDEV("div",{style:{display:"flex",alignItems:"flex-start",gap:8},children:[s.jsxDEV("div",{children:"ai"===e.type?s.jsxDEV(E,{icon:s.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:408,columnNumber:37},void 0),style:{backgroundColor:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:408,columnNumber:23},void 0):"user"===e.type?s.jsxDEV(E,{icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:410,columnNumber:39},void 0),style:{backgroundColor:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:410,columnNumber:25},void 0):s.jsxDEV(E,{icon:s.jsxDEV(T,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:411,columnNumber:39},void 0),style:{backgroundColor:"#faad14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:411,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:406,columnNumber:19},void 0),s.jsxDEV("div",{style:{flex:1},children:[s.jsxDEV("div",{style:{marginBottom:4},children:[s.jsxDEV(ws,{strong:!0,style:{marginRight:8},children:"ai"===e.type?"Assistant IA":"user"===e.type?"Vous":"Syst√®me"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:419,columnNumber:23},void 0),e.isVoice&&s.jsxDEV(S,{color:"blue",size:"small",style:{marginRight:4},children:[s.jsxDEV(z,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:425,columnNumber:27},void 0)," Vocal"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:424,columnNumber:25},void 0),s.jsxDEV(ws,{type:"secondary",style:{fontSize:11},children:e.timestamp.toLocaleTimeString()},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:428,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:418,columnNumber:21},void 0),s.jsxDEV("div",{style:{backgroundColor:"ai"===e.type?"#f0f8ff":"user"===e.type?"#f6ffed":"#fffbf0",padding:8,borderRadius:6,border:"1px solid "+("ai"===e.type?"#d9f0ff":"user"===e.type?"#d9f7be":"#fff1b8")},children:s.jsxDEV(ws,{children:e.content},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:442,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:434,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:416,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:404,columnNumber:17},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:403,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:401,columnNumber:11},void 0),v&&s.jsxDEV("div",{style:{textAlign:"center",padding:8},children:[s.jsxDEV(H,{size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:453,columnNumber:13},void 0),s.jsxDEV(ws,{type:"secondary",style:{marginLeft:8},children:"L'IA r√©fl√©chit..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:454,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:452,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:384,columnNumber:7},void 0),b.length>0&&s.jsxDEV("div",{style:{marginBottom:12},children:[s.jsxDEV(ws,{type:"secondary",style:{fontSize:12,marginBottom:8},children:[s.jsxDEV($,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:467,columnNumber:13},void 0)," Suggestions:"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:466,columnNumber:11},void 0),s.jsxDEV(h,{wrap:!0,style:{marginTop:4},children:b.map((e,r)=>s.jsxDEV(S,{color:"blue",style:{cursor:"pointer",fontSize:11},onClick:()=>J(e),children:[s.jsxDEV(F,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:477,columnNumber:17},void 0)," ",e]},r,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:471,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:469,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:465,columnNumber:9},void 0),s.jsxDEV("div",{children:[s.jsxDEV(h.Compact,{style:{width:"100%"},children:s.jsxDEV(Us,{ref:k,value:u,onChange:e=>p(e.target.value),onKeyPress:G,placeholder:c?"üéôÔ∏è En √©coute... Parlez maintenant !":"Tapez votre message ou utilisez la voix...",rows:2,style:{resize:"none"},disabled:d},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:487,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:486,columnNumber:9},void 0),s.jsxDEV(h,{style:{marginTop:8,width:"100%",justifyContent:"space-between"},children:[s.jsxDEV(h,{children:[s.jsxDEV(_,{title:c?"Arr√™ter l'√©coute":"Parler √† l'IA",children:s.jsxDEV(w,{icon:s.jsxDEV(z,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:507,columnNumber:23},void 0),onClick:W,type:c?"primary":"default",danger:c,loading:c,disabled:!g.enabled,size:"small",children:c?"Stop":"Parler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:506,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:505,columnNumber:13},void 0),c&&s.jsxDEV(S,{color:"blue",size:"small",children:"üé§ √âcoute..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:521,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:503,columnNumber:11},void 0),s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:530,columnNumber:19},void 0),onClick:()=>B(u),disabled:!u.trim()||d,loading:d,size:"small",children:"Envoyer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:528,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:502,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:485,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/AIAssistantChat.tsx",lineNumber:292,columnNumber:5},void 0)},{Title:Ps,Text:Ts}=N,zs=({lead:e,callState:r,onStartCall:t,onEndCall:i,isLoading:o,error:a})=>{var l,d,c,m,u,p;const v=n.useMemo(()=>{var s;const t=e.phone||(null==(s=e.data)?void 0:s.phone),i=!r.isInProgress&&!o&&t,n=Math.floor(r.duration/60),a=r.duration%60;return{canCall:i,phoneNumber:t,callDurationText:`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`,callQuality:r.duration>0?Math.min(100,70+r.duration/10):0,phoneDisplay:t?t.replace(/(\+\d{2})(\d{1})(\d{8})/,"$1 $2 $3"):"Aucun num√©ro"}},[r,o,e.phone,null==(l=e.data)?void 0:l.phone,e.id]),N=n.useMemo(()=>r.isInProgress?{background:"linear-gradient(135deg, #ff4d4f 0%, #ff7875 100%)",borderColor:"#ff4d4f",boxShadow:"0 0 20px rgba(255, 77, 79, 0.3)",animation:"pulse 2s infinite"}:v.canCall?{background:"linear-gradient(135deg, #52c41a 0%, #95de64 100%)",borderColor:"#52c41a",boxShadow:"0 0 15px rgba(82, 196, 26, 0.2)"}:{background:"#d9d9d9",borderColor:"#d9d9d9"},[r.isInProgress,v.canCall]);return s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(A,{style:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:98,columnNumber:11},void 0),s.jsxDEV("span",{children:"Interface d'Appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:99,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:97,columnNumber:9},void 0),style:{height:"100%"},children:[s.jsxDEV("div",{style:{textAlign:"center",marginBottom:24},children:[s.jsxDEV(Ps,{level:4,style:{margin:0,color:"#1890ff"},children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.firstName||e.lastName||(null==(d=e.data)?void 0:d.name)||e.name||`Lead ${null==(c=e.id)?void 0:c.slice(0,8)}`},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:107,columnNumber:9},void 0),s.jsxDEV(Ts,{type:"secondary",style:{fontSize:16},children:v.phoneDisplay},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:111,columnNumber:9},void 0),(e.company||(null==(m=e.data)?void 0:m.company))&&s.jsxDEV("div",{style:{marginTop:4},children:s.jsxDEV(Ts,{type:"secondary",children:e.company||(null==(u=e.data)?void 0:u.company)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:116,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:115,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:106,columnNumber:7},void 0),s.jsxDEV("div",{style:{textAlign:"center",marginBottom:24},children:r.isInProgress?s.jsxDEV(w,{type:"primary",danger:!0,size:"large",icon:o?s.jsxDEV(B,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:130,columnNumber:31},void 0):s.jsxDEV(W,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:130,columnNumber:53},void 0),onClick:i,loading:o,style:{height:80,width:200,fontSize:18,borderRadius:40,...N},children:o?"Finalisation...":"Raccrocher"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:126,columnNumber:11},void 0):s.jsxDEV(w,{type:"primary",size:"large",icon:o?s.jsxDEV(B,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:147,columnNumber:31},void 0):s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:147,columnNumber:53},void 0),onClick:t,loading:o,disabled:!v.canCall,style:{height:80,width:200,fontSize:18,borderRadius:40,...N},children:o?"Connexion...":"Appeler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:144,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:124,columnNumber:7},void 0),r.isInProgress&&s.jsxDEV("div",{style:{marginBottom:20},children:[s.jsxDEV("div",{style:{textAlign:"center",marginBottom:16},children:s.jsxDEV(U,{status:"processing",text:s.jsxDEV(Ts,{style:{fontSize:20,fontWeight:"bold",color:"#1890ff"},children:v.callDurationText},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:173,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:170,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:169,columnNumber:11},void 0),s.jsxDEV("div",{style:{marginBottom:12},children:[s.jsxDEV(Ts,{type:"secondary",style:{fontSize:12},children:"Qualit√© d'appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:182,columnNumber:13},void 0),s.jsxDEV(G,{percent:v.callQuality,size:"small",strokeColor:{"0%":"#ff4d4f","50%":"#fadb14","100%":"#52c41a"},showInfo:!1},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:185,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:181,columnNumber:11},void 0),s.jsxDEV("div",{style:{textAlign:"center"},children:s.jsxDEV(h,{children:[s.jsxDEV(_,{title:"Couper le micro",children:s.jsxDEV(w,{icon:s.jsxDEV(J,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:202,columnNumber:25},void 0),size:"small",type:"text"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:201,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:200,columnNumber:15},void 0),s.jsxDEV(_,{title:"R√©gler le volume",children:s.jsxDEV(w,{icon:s.jsxDEV(Y,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:209,columnNumber:25},void 0),size:"small",type:"text"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:208,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:207,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:199,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:198,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:166,columnNumber:9},void 0),a&&s.jsxDEV("div",{style:{padding:12,backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:6,marginTop:16},children:s.jsxDEV(h,{children:[s.jsxDEV(X,{style:{color:"#ff4d4f"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:230,columnNumber:13},void 0),s.jsxDEV(Ts,{type:"danger",style:{fontSize:13},children:a},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:231,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:229,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:222,columnNumber:9},void 0),s.jsxDEV("div",{style:{marginTop:20,padding:12,backgroundColor:"#fafafa",borderRadius:6,fontSize:12},children:[s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[s.jsxDEV(Ts,{type:"secondary",children:"Statut:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:247,columnNumber:11},void 0),s.jsxDEV(Ts,{strong:!0,children:r.isInProgress?"En cours":o?"Connexion...":"Pr√™t"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:248,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:246,columnNumber:9},void 0),r.isInProgress&&s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxDEV(Ts,{type:"secondary",children:"D√©marr√©:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:257,columnNumber:13},void 0),s.jsxDEV(Ts,{children:(null==(p=r.startTime)?void 0:p.toLocaleTimeString())||"--:--"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:258,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:256,columnNumber:11},void 0),!v.canCall&&!r.isInProgress&&s.jsxDEV("div",{style:{textAlign:"center",color:"#faad14"},children:s.jsxDEV(Ts,{type:"warning",style:{fontSize:11},children:v.phoneNumber?"Non disponible":"Num√©ro manquant"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:266,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:265,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:239,columnNumber:7},void 0),s.jsxDEV("style",{children:"\n        @keyframes pulse {\n          0% { transform: scale(1); }\n          50% { transform: scale(1.05); }\n          100% { transform: scale(1); }\n        }\n      "},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:274,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/TelnyxInterface.tsx",lineNumber:95,columnNumber:5},void 0)},{Title:Hs,Text:$s}=N,Fs=({lead:e,callInProgress:r,transcriptionState:t,voiceAnalysis:i,keywordDetections:o,transcriptionStats:a,onStartTranscription:l,onStopTranscription:d,isLoading:c,className:m,onSuggestionApply:u})=>{const[p,v]=n.useState(!1),N=((e,s,r=!1,t)=>{const{api:i}=ns(),o=n.useRef(null),a=n.useRef(null),[l,d]=n.useState({isActive:!1,isListening:!1,currentText:"",transcriptionHistory:[],currentSpeaker:null,confidence:0,wordCount:0,duration:0}),[c,m]=n.useState(null),[u,p]=n.useState([]),[v,D]=n.useState(!1),[h,N]=n.useState(),b=n.useCallback(e=>{const s=e.toLowerCase(),r=["bonjour","madame","monsieur","soci√©t√©","proposition","offre","rendez-vous","rdv","pr√©senter","expliquer","service","solution"].filter(e=>s.includes(e)).length,t=["int√©ress√©","prix","tarif","budget","r√©fl√©chir","coll√®gues","d√©cision","patron","d√©j√†","actuellement","satisfait"].filter(e=>s.includes(e)).length;return r>t?{type:"agent",confidence:Math.min(.9,.5+.1*r)}:t>r?{type:"prospect",confidence:Math.min(.9,.5+.1*t)}:{type:"unknown",confidence:.3}},[]),C=n.useCallback(async r=>{try{const t=await i.post("/api/ai/analyze-voice-content",{transcription:r,leadId:e,leadData:null==s?void 0:s.data,conversationContext:l.transcriptionHistory.slice(-5)});t.analysis&&(m(t.analysis),t.keywords&&p(e=>[...e,...t.keywords]))}catch(t){}},[i,e,s,l.transcriptionHistory]),g=n.useCallback(async(e,s)=>{if(e.trim().length<3)return;const r={id:`transcription_${Date.now()}`,text:e.trim(),timestamp:new Date,speaker:b(e),confidence:s||.8,duration:0,language:"fr-FR"};d(s=>({...s,transcriptionHistory:[...s.transcriptionHistory,r],currentText:"",wordCount:s.wordCount+e.split(" ").length})),null==t||t(r);try{await C(r)}catch(i){}},[t,C,b]),x=n.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return N("Reconnaissance vocale non support√©e par ce navigateur"),is.error("Reconnaissance vocale non support√©e"),!1;try{const e=new(window.webkitSpeechRecognition||window.SpeechRecognition);return e.continuous=!0,e.interimResults=!0,e.lang="fr-FR",e.maxAlternatives=3,e.onstart=()=>{d(e=>({...e,isListening:!0}))},e.onresult=e=>{let s="";for(let r=e.resultIndex;r<e.results.length;r++){const t=e.results[r][0].transcript,i=e.results[r][0].confidence;e.results[r].isFinal?g(t,i):s+=t}d(r=>{var t,i;return{...r,currentText:s,confidence:(null==(i=null==(t=e.results[e.results.length-1])?void 0:t[0])?void 0:i.confidence)||0}})},e.onerror=e=>{"no-speech"!==e.error&&N(`Erreur reconnaissance vocale: ${e.error}`)},e.onend=()=>{d(e=>({...e,isListening:!1})),l.isActive&&r&&setTimeout(()=>{e.start()},100)},a.current=e,!0}catch(e){return N("Impossible d'initialiser la reconnaissance vocale"),!1}},[l.isActive,r,g]),f=n.useCallback(async()=>{var e;if(r){D(!0),N(void 0);try{const s=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});if(o.current=s,x()){null==(e=a.current)||e.start(),d(e=>({...e,isActive:!0,transcriptionHistory:[],wordCount:0,duration:0}));const s=Date.now(),r=setInterval(()=>{d(e=>({...e,duration:Math.floor((Date.now()-s)/1e3)}))},1e3);o.current&&(o.current.timer=r),is.success("üé§ Transcription vocale activ√©e")}}catch(s){const e=s instanceof Error?s.message:"Erreur d'acc√®s au microphone";N(e),is.error("Impossible d'acc√©der au microphone")}finally{D(!1)}}else is.warning("D√©marrez un appel pour activer la transcription")},[r,x]),E=n.useCallback(()=>{var e;try{a.current&&(a.current.stop(),a.current=null),o.current&&(o.current.getTracks().forEach(e=>e.stop()),(null==(e=o.current)?void 0:e.timer)&&clearInterval(o.current.timer),o.current=null),d(e=>({...e,isActive:!1,isListening:!1,currentText:""})),is.info("Transcription vocale arr√™t√©e")}catch(s){}},[]),V=n.useCallback(()=>{l.isActive?E():f()},[l.isActive,E,f]),S=n.useMemo(()=>{const e=l.transcriptionHistory.length,s=l.transcriptionHistory.filter(e=>{var s;return"agent"===(null==(s=e.speaker)?void 0:s.type)}).length,r=l.transcriptionHistory.filter(e=>{var s;return"prospect"===(null==(s=e.speaker)?void 0:s.type)}).length,t=l.transcriptionHistory.length>0?l.transcriptionHistory.reduce((e,s)=>e+s.confidence,0)/e:0;return{totalTranscriptions:e,agentMessages:s,prospectMessages:r,avgConfidence:Math.round(100*t),wordCount:l.wordCount,duration:l.duration,keywordsDetected:u.length}},[l,u]);return n.useEffect(()=>()=>{l.isActive&&E()},[l.isActive,E]),n.useEffect(()=>{!r&&l.isActive&&E()},[r,l.isActive,E]),n.useMemo(()=>({transcriptionState:l,voiceAnalysis:c,keywordDetections:u,startTranscription:f,stopTranscription:E,toggleTranscription:V,transcriptionStats:S,isLoading:v,error:h}),[l,c,u,f,E,V,S,v,h])})((null==e?void 0:e.id)||"",e||null,r,e=>{}),b=t||N.transcriptionState,C=i||N.voiceAnalysis,g=o||N.keywordDetections,x=a||N.transcriptionStats,f=l||N.startTranscription,E=d||N.stopTranscription,V=void 0!==c?c:N.isLoading,M=N.error,A=n.useCallback(()=>{(null==b?void 0:b.isActive)?null==E||E():null==f||f()},[null==b?void 0:b.isActive,f,E]),L=n.useCallback(e=>{switch(e){case"positive":return"#52c41a";case"negative":return"#ff4d4f";case"neutral":return"#fadb14";default:return"#d9d9d9"}},[]),k=n.useCallback(e=>{switch(e){case"positive":return s.jsxDEV(Z,{style:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:108,columnNumber:31},void 0);case"negative":return s.jsxDEV(F,{style:{color:"#ff4d4f"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:109,columnNumber:31},void 0);case"neutral":return s.jsxDEV(Q,{style:{color:"#fadb14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:110,columnNumber:30},void 0);default:return s.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:111,columnNumber:23},void 0)}},[]),y=n.useMemo(()=>C?{sentiment:{value:C.sentiment,confidence:Math.round(100*C.confidence),color:L(C.sentiment),icon:k(C.sentiment)},tone:{level:C.tone,description:"professional"===C.tone?"Professionnel":"friendly"===C.tone?"Amical":"assertive"===C.tone?"Assertif":"Neutre"},energy:{level:C.energyLevel||.5,description:(C.energyLevel||.5)>.7?"√ânergique":(C.energyLevel||.5)>.4?"Mod√©r√©":"Calme"},engagement:{score:C.engagementScore||.6,level:(C.engagementScore||.6)>.7?"√âlev√©":(C.engagementScore||.6)>.4?"Moyen":"Faible"}}:null,[C,L,k]),O=n.useMemo(()=>{if(!C||!b.currentText)return[];const e=[];"negative"===C.sentiment?(e.push("Le prospect semble r√©ticent. Posez une question ouverte pour comprendre ses pr√©occupations."),e.push("R√©orientez vers les b√©n√©fices qui correspondent √† ses besoins exprim√©s.")):"positive"===C.sentiment&&(e.push("Le prospect est engag√© ! C'est le moment parfait pour proposer une d√©mo."),e.push("Profitez de cet √©lan positif pour aborder les aspects commerciaux."));return["budget","prix","co√ªt","tarif"].some(e=>b.currentText.toLowerCase().includes(e))&&e.push("Budget √©voqu√© - Pr√©sentez la valeur ROI avant les tarifs."),["urgent","rapidement","d√©lai","planning"].some(e=>b.currentText.toLowerCase().includes(e))&&e.push("Urgence d√©tect√©e - Proposez un planning d'impl√©mentation rapide."),["concurrent","alternative","comparaison"].some(e=>b.currentText.toLowerCase().includes(e))&&e.push("Concurrence mentionn√©e - Mettez en avant vos avantages diff√©renciants."),e.slice(0,3)},[C,b.currentText]),R=n.useMemo(()=>b.transcriptionHistory.slice(-5).reverse().map((e,s)=>{var r,t;return{...e,id:`trans_${s}`,timeAgo:`Il y a ${Math.round((Date.now()-e.timestamp)/1e3)}s`,speakerLabel:"agent"===(null==(r=e.speaker)?void 0:r.type)?"Vous":"Prospect",speakerColor:"agent"===(null==(t=e.speaker)?void 0:t.type)?"#1890ff":"#52c41a"}}),[b.transcriptionHistory]);return s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(z,{style:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:198,columnNumber:11},void 0),s.jsxDEV("span",{children:"Analyse Vocale IA"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:199,columnNumber:11},void 0),b.isActive&&s.jsxDEV(U,{status:"processing",text:"En cours"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:201,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:197,columnNumber:9},void 0),className:m,extra:s.jsxDEV(h,{children:[s.jsxDEV(w,{type:b.isActive?"default":"primary",icon:b.isActive?s.jsxDEV(re,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:210,columnNumber:49},void 0):s.jsxDEV(te,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:210,columnNumber:75},void 0),onClick:A,loading:V,disabled:!r,size:"small",children:b.isActive?"Pause":"D√©marrer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:208,columnNumber:11},void 0),s.jsxDEV(w,{type:"link",size:"small",onClick:()=>v(!p),children:p?"Masquer":"D√©tails"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:219,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:207,columnNumber:9},void 0),children:[M&&s.jsxDEV(ee,{message:"Erreur d'analyse vocale",description:M,type:"error",closable:!0,style:{marginBottom:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:232,columnNumber:9},void 0),V&&s.jsxDEV("div",{style:{textAlign:"center",padding:20},children:[s.jsxDEV(H,{size:"large"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:244,columnNumber:11},void 0),s.jsxDEV("div",{style:{marginTop:12},children:s.jsxDEV($s,{type:"secondary",children:"Initialisation de l'analyse vocale..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:246,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:245,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:243,columnNumber:9},void 0),y&&s.jsxDEV("div",{style:{marginBottom:20},children:s.jsxDEV(h,{direction:"vertical",style:{width:"100%"},size:"middle",children:[s.jsxDEV("div",{children:[s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsxDEV(h,{children:[y.sentiment.icon,s.jsxDEV($s,{strong:!0,children:"Sentiment"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:261,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:259,columnNumber:17},void 0),s.jsxDEV(S,{color:y.sentiment.color,children:[y.sentiment.confidence,"% confiance"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:263,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:258,columnNumber:15},void 0),s.jsxDEV(G,{percent:y.sentiment.confidence,strokeColor:y.sentiment.color,showInfo:!1,size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:267,columnNumber:15},void 0),s.jsxDEV($s,{type:"secondary",style:{fontSize:12},children:y.sentiment.value.toUpperCase()},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:273,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:257,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsxDEV(h,{children:[s.jsxDEV(P,{style:{color:"#722ed1"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:282,columnNumber:19},void 0),s.jsxDEV($s,{strong:!0,children:"Engagement"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:283,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:281,columnNumber:17},void 0),s.jsxDEV($s,{type:"secondary",children:y.engagement.level},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:285,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:280,columnNumber:15},void 0),s.jsxDEV(G,{percent:Math.round(100*y.engagement.score),strokeColor:"#722ed1",showInfo:!1,size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:287,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:279,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:254,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:253,columnNumber:9},void 0),O.length>0&&s.jsxDEV("div",{style:{marginBottom:20},children:[s.jsxDEV(Hs,{level:5,style:{marginBottom:12},children:[s.jsxDEV($,{style:{color:"#fadb14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:303,columnNumber:13},void 0),s.jsxDEV("span",{style:{marginLeft:8},children:"Suggestions IA"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:304,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:302,columnNumber:11},void 0),s.jsxDEV(h,{direction:"vertical",style:{width:"100%"},children:O.map((e,r)=>s.jsxDEV(D,{size:"small",style:{backgroundColor:"#fffbe6",border:"1px solid #fadb14",borderRadius:6},bodyStyle:{padding:12},children:s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsxDEV($s,{style:{flex:1,fontSize:13},children:e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:320,columnNumber:19},void 0),u&&s.jsxDEV(w,{type:"link",size:"small",onClick:()=>u(e),style:{padding:0,marginLeft:8},children:"Appliquer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:324,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:319,columnNumber:17},void 0)},r,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:309,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:307,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:301,columnNumber:9},void 0),g.length>0&&s.jsxDEV("div",{style:{marginBottom:20},children:[s.jsxDEV(Hs,{level:5,style:{marginBottom:12},children:[s.jsxDEV(F,{style:{color:"#ff7a45"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:344,columnNumber:13},void 0),s.jsxDEV("span",{style:{marginLeft:8},children:"Mots-cl√©s d√©tect√©s"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:345,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:343,columnNumber:11},void 0),s.jsxDEV(h,{wrap:!0,children:g.slice(0,8).map((e,r)=>s.jsxDEV(S,{color:"orange",style:{marginBottom:4},children:[e.keyword," (",e.count,")"]},r,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:350,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:348,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:342,columnNumber:9},void 0),R.length>0&&s.jsxDEV("div",{style:{marginBottom:20},children:[s.jsxDEV(Hs,{level:5,style:{marginBottom:12},children:[s.jsxDEV(Y,{style:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:366,columnNumber:13},void 0),s.jsxDEV("span",{style:{marginLeft:8},children:"Transcription Live"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:367,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:365,columnNumber:11},void 0),s.jsxDEV(se,{size:"small",dataSource:R,renderItem:e=>s.jsxDEV(se.Item,{style:{padding:"8px 0",borderBottom:"1px solid #f0f0f0"},children:s.jsxDEV("div",{style:{width:"100%"},children:[s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[s.jsxDEV(S,{color:e.speakerColor,size:"small",children:e.speakerLabel},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:377,columnNumber:21},void 0),s.jsxDEV($s,{type:"secondary",style:{fontSize:11},children:e.timeAgo},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:380,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:376,columnNumber:19},void 0),s.jsxDEV($s,{style:{fontSize:13},children:e.text},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:385,columnNumber:19},void 0),e.confidence&&s.jsxDEV("div",{style:{marginTop:4},children:s.jsxDEV(G,{percent:Math.round(100*e.confidence),size:"small",showInfo:!1,strokeColor:"#d9d9d9"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:391,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:390,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:375,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:374,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:370,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:364,columnNumber:9},void 0),p&&x&&s.jsxDEV("div",{style:{marginTop:20,padding:16,backgroundColor:"#fafafa",borderRadius:8,border:"1px solid #e8e8e8"},children:[s.jsxDEV(Hs,{level:5,style:{marginBottom:16},children:"üìä Statistiques de l'appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:415,columnNumber:11},void 0),s.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:16},children:[s.jsxDEV("div",{style:{textAlign:"center"},children:[s.jsxDEV($s,{type:"secondary",children:"Transcriptions"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:425,columnNumber:15},void 0),s.jsxDEV("div",{children:s.jsxDEV($s,{strong:!0,style:{fontSize:18,color:"#1890ff"},children:x.totalTranscriptions},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:427,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:426,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:424,columnNumber:13},void 0),s.jsxDEV("div",{style:{textAlign:"center"},children:[s.jsxDEV($s,{type:"secondary",children:"Agent"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:434,columnNumber:15},void 0),s.jsxDEV("div",{children:s.jsxDEV($s,{strong:!0,style:{fontSize:18,color:"#1890ff"},children:x.agentMessages},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:436,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:435,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:433,columnNumber:13},void 0),s.jsxDEV("div",{style:{textAlign:"center"},children:[s.jsxDEV($s,{type:"secondary",children:"Prospect"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:443,columnNumber:15},void 0),s.jsxDEV("div",{children:s.jsxDEV($s,{strong:!0,style:{fontSize:18,color:"#52c41a"},children:x.prospectMessages},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:445,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:444,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:442,columnNumber:13},void 0),s.jsxDEV("div",{style:{textAlign:"center"},children:[s.jsxDEV($s,{type:"secondary",children:"Mots"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:452,columnNumber:15},void 0),s.jsxDEV("div",{children:s.jsxDEV($s,{strong:!0,style:{fontSize:18,color:"#722ed1"},children:x.wordCount},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:454,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:453,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:451,columnNumber:13},void 0),s.jsxDEV("div",{style:{textAlign:"center"},children:[s.jsxDEV($s,{type:"secondary",children:"Pr√©cision"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:461,columnNumber:15},void 0),s.jsxDEV("div",{children:s.jsxDEV($s,{strong:!0,style:{fontSize:18,color:"#fadb14"},children:[x.avgConfidence,"%"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:463,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:462,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:460,columnNumber:13},void 0),s.jsxDEV("div",{style:{textAlign:"center"},children:[s.jsxDEV($s,{type:"secondary",children:"Mots-cl√©s"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:470,columnNumber:15},void 0),s.jsxDEV("div",{children:s.jsxDEV($s,{strong:!0,style:{fontSize:18,color:"#ff7a45"},children:x.keywordsDetected},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:472,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:471,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:469,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:419,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:408,columnNumber:9},void 0),s.jsxDEV("div",{style:{marginTop:16,textAlign:"center",padding:12,backgroundColor:b.isActive?"#f6ffed":"#fff2e8",borderRadius:6,border:"1px solid "+(b.isActive?"#b7eb8f":"#ffd591")},children:s.jsxDEV(h,{children:[b.isActive?s.jsxDEV(Y,{style:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:492,columnNumber:13},void 0):s.jsxDEV(J,{style:{color:"#faad14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:494,columnNumber:13},void 0),s.jsxDEV($s,{style:{color:b.isActive?"#52c41a":"#faad14",fontWeight:500},children:b.isActive?"Analyse vocale active":"Analyse vocale en pause"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:497,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:490,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:482,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/VoiceAnalysisPanel.tsx",lineNumber:195,columnNumber:5},void 0)},Ks={"Appel planifi√©":"üìÖ","Appel en cours":"üìû","Appel termin√©":"‚úÖ","Pas de r√©ponse":"‚ùå","R√©pondeur":"üìß","Occup√©":"‚è≥","Appel annul√©":"üö´","RDV fix√©":"üìÜ","Pas int√©ress√©":"üëé"},_s="meeting_scheduled",qs="answered",Ys="callback",Bs="refused",Ws="no_answer",Gs="busy",Js="voicemail",{TextArea:Xs}=K,{Option:Qs}=ne,{Text:Zs,Title:er}=N,sr=({callState:e,onUpdateNotes:r,onUpdateStatus:t,onEndCall:i,isLoading:o,canSave:a,className:l})=>{const{callStatuses:d,loading:c,error:m,hasStatuses:u}=(()=>{const{api:e}=ns(),[s,r]=n.useState([]),[t,i]=n.useState(!0),[o,a]=n.useState(null),l=n.useCallback(async()=>{try{i(!0),a(null);const s=await e.get("/api/settings/call-statuses");if(s&&Array.isArray(s)){const e=s.map((e,s)=>({...e,value:e.id||`status_${s}`,label:`${e.icon||"üìû"} ${e.name}`}));r(e)}else r([]),a("Aucun statut d'appel configur√©. Veuillez configurer les statuts dans les param√®tres.")}catch(s){r([]),a("Impossible de charger les statuts d'appels. V√©rifiez votre connexion et les param√®tres.")}finally{i(!1)}},[e]),d=n.useCallback(e=>s.find(s=>s.value===e),[s]),c=n.useCallback(e=>{const s=d(e);return(null==s?void 0:s.mappedToLeadStatus)||"nouveau"},[d]),m=n.useCallback(()=>s.map(e=>({value:e.value,label:e.label,color:e.color,icon:e.icon})),[s]);return n.useEffect(()=>{l()},[l]),{callStatuses:s,loading:t,error:o,refetch:l,getStatusByValue:d,getMappedLeadStatus:c,getSelectOptions:m,hasStatuses:s.length>0}})(),p=n.useCallback(e=>{r(e.target.value)},[r]),v=n.useCallback(e=>{const s=d.find(s=>s.value===e),r=e=>e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().replace(/[^a-z0-9]/g,"");if(s){const e=r(s.name);if(e===r("rdv fix√©")||e.includes("rdvfixe"))return void t(_s)}t(e)},[t,d]),N=n.useCallback(async()=>{a&&await i()},[i,a]),b=d.find(s=>s.value===e.status);return s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(le,{style:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:98,columnNumber:11},void 0),s.jsxDEV("span",{children:"Notes d'Appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:99,columnNumber:11},void 0),e.isInProgress&&s.jsxDEV(Zs,{type:"secondary",children:"(En cours...)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:101,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:97,columnNumber:9},void 0),className:l,extra:e.isInProgress&&s.jsxDEV(Zs,{type:"secondary",style:{fontSize:12},children:["Dur√©e: ",Math.floor(e.duration/60),":",(e.duration%60).toString().padStart(2,"0")]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:108,columnNumber:11},void 0),children:[!u&&!c&&s.jsxDEV(ee,{message:"Aucun statut d'appel configur√©",description:s.jsxDEV("div",{children:[s.jsxDEV("p",{children:"Vous devez configurer les statuts d'appel dans les param√®tres avant de pouvoir finaliser cet appel."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:121,columnNumber:15},void 0),s.jsxDEV("p",{children:["Allez dans ",s.jsxDEV("strong",{children:"Param√®tres ‚Üí Mapping Statuts"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:122,columnNumber:29},void 0)," pour cr√©er vos statuts d'appel."]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:122,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:120,columnNumber:13},void 0),type:"error",showIcon:!0,style:{marginBottom:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:117,columnNumber:9},void 0),m&&s.jsxDEV(ee,{message:"Erreur de chargement des statuts",description:m,type:"warning",showIcon:!0,style:{marginBottom:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:133,columnNumber:9},void 0),!e.isFormValid&&e.status&&s.jsxDEV(ee,{message:"Formulaire incomplet",description:"Veuillez remplir au moins les notes ou s√©lectionner un statut pour terminer l'appel.",type:"warning",closable:!0,style:{marginBottom:16}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:144,columnNumber:9},void 0),s.jsxDEV(ie,{layout:"vertical",style:{height:"100%"},children:[s.jsxDEV(ie.Item,{label:s.jsxDEV(h,{children:[s.jsxDEV(oe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:159,columnNumber:15},void 0),s.jsxDEV("span",{children:"Statut de l'appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:160,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:158,columnNumber:13},void 0),children:s.jsxDEV(ne,{placeholder:c?"Chargement des statuts...":u?"S√©lectionner le r√©sultat de l'appel":"Aucun statut configur√© - Voir param√®tres",value:e.status||void 0,onChange:v,size:"large",style:{width:"100%"},optionLabelProp:"label",loading:c,disabled:!u,notFoundContent:u?"Aucun statut trouv√©":"Aucun statut configur√©",children:d.map(e=>{var r,t;return s.jsxDEV(Qs,{value:e.value,label:s.jsxDEV(h,{children:[Ks[e.name]||"üìû",e.name]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:188,columnNumber:19},void 0),children:s.jsxDEV(_,{title:s.jsxDEV("div",{children:[s.jsxDEV("div",{children:null==(r=e.data)?void 0:r.description},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:197,columnNumber:23},void 0),(null==(t=e.data)?void 0:t.tooltip)&&s.jsxDEV("div",{style:{marginTop:4,fontSize:"12px",color:"#8c8c8c"},children:e.data.tooltip},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:199,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:196,columnNumber:21},void 0),children:s.jsxDEV(h,{children:[s.jsxDEV("span",{style:{fontSize:"18px"},children:Ks[e.name]||"üìû"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:207,columnNumber:21},void 0),s.jsxDEV("span",{children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:210,columnNumber:21},void 0),s.jsxDEV("div",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:e.color,marginLeft:4}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:211,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:206,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:194,columnNumber:17},void 0)},e.value,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:184,columnNumber:15},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:164,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:156,columnNumber:9},void 0),s.jsxDEV(ie.Item,{label:s.jsxDEV(h,{children:[s.jsxDEV(X,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:231,columnNumber:15},void 0),s.jsxDEV("span",{children:"Notes de l'appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:232,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:230,columnNumber:13},void 0),children:s.jsxDEV(Xs,{placeholder:"Saisissez vos notes sur cet appel...",value:e.notes,onChange:p,rows:6,maxLength:1e3,showCount:!0,style:{resize:"none",fontSize:14}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:236,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:228,columnNumber:9},void 0),s.jsxDEV(ie.Item,{style:{marginBottom:0},children:s.jsxDEV(h,{style:{width:"100%",justifyContent:"space-between"},children:[s.jsxDEV("div",{children:a?s.jsxDEV(Zs,{type:"success",style:{fontSize:12},children:"‚úÖ Pr√™t √† sauvegarder"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:257,columnNumber:17},void 0):s.jsxDEV(Zs,{type:"secondary",style:{fontSize:12},children:"‚è≥ Saisie en cours..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:261,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:255,columnNumber:13},void 0),s.jsxDEV(w,{type:"primary",size:"large",icon:s.jsxDEV(ae,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:271,columnNumber:21},void 0),onClick:N,loading:o,disabled:!a,style:{backgroundColor:a?"#52c41a":void 0,borderColor:a?"#52c41a":void 0},children:e.isInProgress?"Terminer l'appel":"Sauvegarder"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:268,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:252,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:251,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:153,columnNumber:7},void 0),(e.notes||e.status)&&s.jsxDEV("div",{style:{marginTop:20,padding:12,backgroundColor:"#f6ffed",borderRadius:6,border:"1px solid #b7eb8f"},children:[s.jsxDEV(er,{level:5,style:{margin:0,marginBottom:8,color:"#389e0d"},children:"üìã R√©sum√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:297,columnNumber:11},void 0),s.jsxDEV(h,{direction:"vertical",style:{width:"100%"},children:[e.status&&s.jsxDEV("div",{children:[s.jsxDEV(Zs,{strong:!0,children:"Statut: "},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:304,columnNumber:17},void 0),s.jsxDEV(h,{children:[s.jsxDEV("span",{style:{fontSize:"16px"},children:(null==b?void 0:b.name)&&Ks[b.name]||"üìû"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:306,columnNumber:19},void 0),s.jsxDEV(Zs,{style:{color:null==b?void 0:b.color},children:(null==b?void 0:b.name)||e.status},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:309,columnNumber:19},void 0),s.jsxDEV("div",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:null==b?void 0:b.color,display:"inline-block",marginLeft:4}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:312,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:305,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:303,columnNumber:15},void 0),e.notes&&s.jsxDEV("div",{children:[s.jsxDEV(Zs,{strong:!0,children:"Notes: "},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:328,columnNumber:17},void 0),s.jsxDEV(Zs,{type:"secondary",children:e.notes.length>50?`${e.notes.substring(0,50)}...`:e.notes},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:329,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:327,columnNumber:15},void 0),e.duration>0&&s.jsxDEV("div",{children:[s.jsxDEV(Zs,{strong:!0,children:"Dur√©e: "},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:340,columnNumber:17},void 0),s.jsxDEV(Zs,{type:"secondary",children:[Math.floor(e.duration/60)," min ",e.duration%60," sec"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:341,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:339,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:301,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:290,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/CallNotesForm.tsx",lineNumber:95,columnNumber:5},void 0)},{Text:rr}=N,tr=({lead:e,onSelectSlot:r})=>{const{api:t}=ns(),[i,a]=n.useState(!0),[l,d]=n.useState(null),[c,m]=n.useState([]),[u,p]=n.useState(de()),[v,N]=n.useState("day"),[b,C]=n.useState(!0),[g,x]=n.useState([]),[f,E]=n.useState(30),[V,M]=n.useState(null),[A,L]=n.useState(30),[k,y]=n.useState(null);n.useEffect(()=>{(async()=>{var s;if(e.id){a(!0),d(null);try{const r=await t.get(`/api/calendar/ai-suggestions?leadId=${e.id}`),i=(null==(s=r.data)?void 0:s.data)||r.data;m(Array.isArray(i)?i:[])}catch(r){d(r.message||"Chargement impossible")}finally{a(!1)}}})()},[t,e.id]),n.useEffect(()=>{try{const e=localStorage.getItem("smartCal_prefs");if(e){const s=JSON.parse(e);s.viewMode&&N(s.viewMode),s.granularity&&L(s.granularity),"boolean"==typeof s.highlightMain&&C(s.highlightMain)}}catch{}},[]),n.useEffect(()=>{try{localStorage.setItem("smartCal_prefs",JSON.stringify({viewMode:v,granularity:A,highlightMain:b}))}catch{}},[v,A,b]);const O=n.useMemo(()=>c.find(e=>"best"===e.type)||c[0],[c]),R=n.useMemo(()=>{const e=u,s=e.day();return 0===s?e.subtract(6,"day"):1===s?e.clone():e.subtract(s-1,"day")},[u]),U=n.useMemo(()=>Array.from({length:7}).map((e,s)=>R.add(s,"day")),[R]),I=n.useMemo(()=>({start:R.startOf("day"),end:R.add(6,"day").endOf("day")}),[R]);n.useEffect(()=>{(async()=>{try{const e=await t.get("/api/calendar/events",{params:{startDate:I.start.toISOString(),endDate:I.end.toISOString()}});x(e.data||[])}catch{}})()},[t,I.start,I.end]);const P=n.useMemo(()=>{const e=[];for(let s=8;s<19;s++)for(let r=0;r<60;r+=A)e.push({label:de().hour(s).minute(r).format("HH:mm"),minutes:60*s+r});return e},[8,19,A]),T=n.useMemo(()=>{const e={};return g.forEach(s=>{const r=de(s.startDate),t=de(s.endDate||s.startDate).add(1,"minute");for(let l=r.startOf("day");l.isBefore(t);l=l.add(1,"day")){const s=l.format("YYYY-MM-DD");e[s]||(e[s]={})}const i=r.format("YYYY-MM-DD");if(i!==t.format("YYYY-MM-DD"))return;const n=e[i]||(e[i]={}),o=60*r.hour()+r.minute(),a=60*t.hour()+t.minute();P.forEach(e=>{var r;const t=e.minutes;t>=o&&t<a&&(n[t]={title:(null==(r=n[t])?void 0:r.title)||(t===o?s.title:void 0),start:t===o})})}),e},[g,P]),z=o.useCallback((e,s,r)=>{const t=s+r,i=T[e]||{};for(let n=s;n<t;n+=A)if(i[n])return!0;return!1},[T,A]),F=o.useCallback(e=>{const{dayKey:s,startMinute:t,currentMinute:i}=e,n=Math.min(t,i),o=Math.max(t,i)+A;if(n===o-A)return z(s,n,A)?void ce.warning("Conflit"):(E(A),M({dayKey:s,minute:n}),void r(de(`${s}T00:00:00`).add(n,"minute")));const a=o-n,l=Math.min(a,120),d=Math.ceil(l/A)*A;z(s,n,d)?ce.warning("Conflit"):(E(d),M({dayKey:s,minute:n}),r(de(`${s}T00:00:00`).add(n,"minute")))},[A,z,r]),K=(e,s)=>{F({dayKey:e,startMinute:s,currentMinute:s})},q=(e,s)=>{s%A===0&&y({dayKey:e,startMinute:s,currentMinute:s})},Y=(e,s)=>{y(r=>r&&r.dayKey===e?{...r,currentMinute:s}:r)};n.useEffect(()=>{if(!k)return;const e=()=>{F(k),y(null)},s=e=>{"Escape"===e.key&&y(null)};return window.addEventListener("mouseup",e),window.addEventListener("keydown",s),()=>{window.removeEventListener("mouseup",e),window.removeEventListener("keydown",s)}},[k,F]),n.useEffect(()=>{V&&V.minute%A!==0&&M(null)},[A,V]),n.useEffect(()=>{V&&z(V.dayKey,V.minute,f)&&M(null)},[f,V,z]);const B=n.useMemo(()=>{const e={};return c.forEach(s=>{const r=de(s.date),t=r.format("YYYY-MM-DD"),i=60*r.hour()+r.minute();e[t]||(e[t]={}),e[t][i]=s}),e},[c]),[W,G]=n.useState("");return n.useEffect(()=>{const e=V?`slot-${V.dayKey}-${V.minute}`:O?`slot-${de(O.date).format("YYYY-MM-DD")}-${60*de(O.date).hour()+de(O.date).minute()}`:null;if(!e)return;const s=`${v}-${R.format("YYYY-MM-DD")}-${e}`;if(s===W)return;const r=setTimeout(()=>{const r=document.getElementById(e);r&&(r.scrollIntoView({block:"center",behavior:"smooth"}),G(s))},80);return()=>clearTimeout(r)},[V,O,v,R,W]),i?s.jsxDEV(H,{tip:"üß† Analyse des cr√©neaux...",size:"large",children:s.jsxDEV("div",{style:{height:260}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:314,columnNumber:75},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:314,columnNumber:23},void 0):l?s.jsxDEV(ee,{message:"Erreur IA",description:l,type:"error",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:315,columnNumber:21},void 0):s.jsxDEV("div",{className:"space-y-3 my-4",children:[s.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 text-xs bg-white/40 p-2 rounded border",children:[s.jsxDEV(h,{size:4,align:"center",wrap:!0,children:[s.jsxDEV(me,{options:[{label:"Jour",value:"day"},{label:"Semaine",value:"week"}],value:v,onChange:e=>N(e),size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:323,columnNumber:11},void 0),s.jsxDEV(me,{size:"small",value:A,onChange:e=>L(Number(e)),options:[{label:"30m",value:30},{label:"1h",value:60}]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:329,columnNumber:11},void 0),s.jsxDEV(h,{size:2,children:[s.jsxDEV(j,{size:"small",checked:b,onChange:C},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:332,columnNumber:13},void 0),s.jsxDEV(rr,{type:"secondary",children:"Reco"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:333,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:331,columnNumber:11},void 0),k&&s.jsxDEV(S,{color:"blue",style:{marginLeft:4},children:["S√©lection: ",Math.min(k.startMinute,k.currentMinute)/60|0,"h",(Math.min(k.startMinute,k.currentMinute)%60).toString().padStart(2,"0")," ‚Üí ",(Math.max(k.startMinute,k.currentMinute)+A)/60|0,"h",((Math.max(k.startMinute,k.currentMinute)+A)%60).toString().padStart(2,"0")]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:336,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:322,columnNumber:9},void 0),s.jsxDEV("div",{className:"ml-auto flex items-center gap-2",children:[V&&s.jsxDEV(S,{color:"geekblue",className:"m-0",children:[de(`${V.dayKey}T00:00:00`).add(V.minute,"minute").format("ddd D MMM HH:mm")," ¬∑ ",f,"m"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:343,columnNumber:13},void 0),V&&s.jsxDEV(w,{size:"small",type:"primary",onClick:async()=>{if(!V)return;const{dayKey:s,minute:r}=V,i=de(`${s}T00:00:00`).add(r,"minute"),n=i.add(f,"minute");if(z(s,r,f))ce.error("Conflit d√©tect√©");else try{const s=`RDV ${e.firstName||""} ${e.lastName||""}`.trim()||"Rendez-vous";await t.post("/api/calendar/events",{title:s,start:i.toISOString(),end:n.toISOString(),type:"rendez-vous",status:"planifie",description:`Cr√©√© via SmartCalendar (${f}m)`}),ce.success("Rendez-vous cr√©√©"),await(async()=>{try{const e=await t.get("/api/calendar/events",{params:{startDate:I.start.toISOString(),endDate:I.end.toISOString()}});x(e.data||[])}catch{}})()}catch{ce.error("Erreur cr√©ation")}},children:"Planifier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:347,columnNumber:28},void 0),V&&s.jsxDEV(w,{size:"small",onClick:()=>M(null),children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:348,columnNumber:28},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:341,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:321,columnNumber:7},void 0),b&&O&&s.jsxDEV(D,{size:"small",className:"border-green-300",children:s.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxDEV("span",{className:"flex items-center gap-1 font-medium text-green-700",children:[s.jsxDEV($,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:357,columnNumber:82},void 0)," Recommandation"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:357,columnNumber:13},void 0),s.jsxDEV(S,{color:"green",className:"m-0",children:de(O.date).format("ddd D MMM HH:mm")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:358,columnNumber:13},void 0),s.jsxDEV(w,{size:"small",type:"primary",icon:s.jsxDEV(oe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:359,columnNumber:55},void 0),onClick:()=>r(de(O.date)),children:"Choisir"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:359,columnNumber:13},void 0),s.jsxDEV(_,{title:O.reason,children:s.jsxDEV(rr,{type:"secondary",className:"truncate max-w-[320px]",children:O.reason},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:360,columnNumber:52},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:360,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:356,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:355,columnNumber:9},void 0),"day"===v&&s.jsxDEV(D,{size:"small",title:`Agenda du ${u.format("dddd D MMMM")}`,extra:s.jsxDEV("div",{style:{display:"flex",gap:4},children:[s.jsxDEV(w,{size:"small",onClick:()=>p(e=>e.subtract(1,"day")),children:["<"," J"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:369,columnNumber:13},void 0),s.jsxDEV(w,{size:"small",onClick:()=>p(e=>e.add(1,"day")),children:["J ",">"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:370,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:368,columnNumber:11},void 0),children:s.jsxDEV("div",{className:"overflow-x-auto",children:s.jsxDEV("table",{className:"w-full border-collapse text-xs",children:[s.jsxDEV("thead",{children:s.jsxDEV("tr",{children:[s.jsxDEV("th",{className:"w-14"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:377,columnNumber:19},void 0),s.jsxDEV("th",{className:"text-left p-1",children:u.format("dddd D MMM")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:378,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:376,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:375,columnNumber:15},void 0),s.jsxDEV("tbody",{children:P.map(e=>{var r,t;const i=u.format("YYYY-MM-DD"),n=null==(r=T[i])?void 0:r[e.minutes],o=null==(t=B[i])?void 0:t[e.minutes],a=b&&o&&o.date===(null==O?void 0:O.date),l=V&&V.dayKey===i&&e.minutes>=V.minute&&e.minutes<V.minute+f,d=o?"best"===o.type?"bg-green-500":"good"===o.type?"bg-amber-500":"bg-red-500":"",c=["h-6 align-top relative cursor-pointer transition-colors border-b border-gray-50 px-1",n?"bg-gray-200 text-gray-500":"hover:bg-gray-50",a?"ring-2 ring-green-400":""].join(" ");return s.jsxDEV("tr",{children:[s.jsxDEV("td",{className:"text-right pr-2 text-[10px] text-gray-500 align-top",children:e.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:397,columnNumber:23},void 0),s.jsxDEV("td",{id:`slot-${i}-${e.minutes}`,className:c,onMouseDown:()=>{n||q(i,e.minutes)},onMouseEnter:()=>{k&&!n&&k.dayKey===i&&Y(i,e.minutes)},onClick:()=>{n||k||K(i,e.minutes)},children:[n&&n.start&&s.jsxDEV("div",{className:"font-medium truncate text-[10px]",children:n.title},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:405,columnNumber:48},void 0),!n&&l&&s.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:407,columnNumber:27},void 0),!n&&!l&&o&&s.jsxDEV(_,{title:s.jsxDEV("div",{style:{maxWidth:220},children:[s.jsxDEV("strong",{children:[de(o.date).format("HH:mm")," (Score ",Math.round(o.score),")"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:410,columnNumber:73},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:410,columnNumber:157},void 0),o.reason]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:410,columnNumber:43},void 0),children:s.jsxDEV("div",{className:`w-3 h-3 rounded-full ${d} flex items-center justify-center text-[9px] text-white`,children:Math.round(o.score)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:411,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:410,columnNumber:27},void 0),!n&&!l&&!o&&s.jsxDEV(_,{title:`Libre ${de(`${i}T00:00:00`).add(e.minutes,"minute").format("ddd HH:mm")}`,children:s.jsxDEV("div",{className:"w-3 h-3 rounded-full border border-gray-300"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:416,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:415,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:398,columnNumber:23},void 0)]},e.minutes,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:396,columnNumber:21},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:381,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:374,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:373,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:367,columnNumber:9},void 0),"week"===v&&s.jsxDEV(D,{size:"small",title:`Semaine du ${R.format("D MMM")}`,extra:s.jsxDEV("div",{style:{display:"flex",gap:4},children:[s.jsxDEV(w,{size:"small",onClick:()=>p(e=>e.subtract(1,"week")),children:["<"," S"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:433,columnNumber:13},void 0),s.jsxDEV(w,{size:"small",onClick:()=>p(e=>e.add(1,"week")),children:["S ",">"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:434,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:432,columnNumber:11},void 0),children:s.jsxDEV("div",{className:"overflow-x-auto",children:s.jsxDEV("table",{className:"w-full border-collapse text-[11px]",children:[s.jsxDEV("thead",{children:s.jsxDEV("tr",{children:[s.jsxDEV("th",{className:"w-14"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:441,columnNumber:19},void 0),U.map(e=>s.jsxDEV("th",{className:"p-1 text-left",children:e.format("ddd D")},e.toString(),!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:443,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:440,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:439,columnNumber:15},void 0),s.jsxDEV("tbody",{children:P.map(e=>s.jsxDEV("tr",{children:[s.jsxDEV("td",{className:"text-right pr-2 text-[10px] text-gray-500 align-top",children:e.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:450,columnNumber:21},void 0),U.map(r=>{var t,i;const n=r.format("YYYY-MM-DD"),o=null==(t=T[n])?void 0:t[e.minutes],a=null==(i=B[n])?void 0:i[e.minutes],l=b&&a&&a.date===(null==O?void 0:O.date),d=V&&V.dayKey===n&&e.minutes>=V.minute&&e.minutes<V.minute+f,c=a?"best"===a.type?"bg-green-500":"good"===a.type?"bg-amber-500":"bg-red-500":"",m=["h-6 align-top relative cursor-pointer transition-colors border-b border-gray-50 px-1",o?"bg-gray-200 text-gray-500":"hover:bg-gray-50",l?"ring-2 ring-green-400":""].join(" ");return s.jsxDEV("td",{id:`slot-${n}-${e.minutes}`,className:m,onMouseDown:()=>{o||q(n,e.minutes)},onMouseEnter:()=>{k&&!o&&k.dayKey===n&&Y(n,e.minutes)},onClick:()=>{o||k||K(n,e.minutes)},children:[o&&o.start&&s.jsxDEV("div",{className:"font-medium truncate text-[10px]",children:o.title},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:473,columnNumber:50},void 0),!o&&d&&s.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:475,columnNumber:29},void 0),!o&&!d&&a&&s.jsxDEV(_,{title:s.jsxDEV("div",{style:{maxWidth:220},children:[s.jsxDEV("strong",{children:[de(a.date).format("HH:mm")," (Score ",Math.round(a.score),")"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:478,columnNumber:75},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:478,columnNumber:159},void 0),a.reason]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:478,columnNumber:45},void 0),children:s.jsxDEV("div",{className:`w-3 h-3 rounded-full ${c} flex items-center justify-center text-[9px] text-white`,children:Math.round(a.score)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:479,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:478,columnNumber:29},void 0),!o&&!d&&!a&&s.jsxDEV(_,{title:`Libre ${de(`${n}T00:00:00`).add(e.minutes,"minute").format("ddd HH:mm")}`,children:s.jsxDEV("div",{className:"w-3 h-3 rounded-full border border-gray-300"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:484,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:483,columnNumber:29},void 0)]},n+e.minutes,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:465,columnNumber:25},void 0)})]},e.minutes,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:449,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:447,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:438,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:437,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:431,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex gap-4 text-[11px] text-gray-600 flex-wrap",children:[s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("span",{className:"w-3 h-3 rounded-full bg-green-500 inline-block"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:499,columnNumber:50},void 0)," Best"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:499,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("span",{className:"w-3 h-3 rounded-full bg-amber-500 inline-block"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:500,columnNumber:50},void 0)," Bon"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:500,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("span",{className:"w-3 h-3 rounded-full bg-red-500 inline-block"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:501,columnNumber:50},void 0)," OK"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:501,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("span",{className:"w-3 h-3 rounded-full bg-gray-300 inline-block"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:502,columnNumber:50},void 0)," Occup√©"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:502,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("span",{className:"w-3 h-3 rounded-full border border-blue-400 inline-block"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:503,columnNumber:50},void 0)," S√©lection"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:503,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:498,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/CallModule/components/SmartCalendar.tsx",lineNumber:320,columnNumber:5},void 0)};var ir={};function nr(e){const s={lastContact:(new Date).toISOString(),lastContactType:"call"};switch(e){case _s:return{...s,status:"rdv_scheduled",priority:"high"};case qs:return{...s,status:"contacted",priority:"medium"};case Ys:return{...s,status:"callback_requested",priority:"medium",nextFollowUp:new Date(Date.now()+864e5).toISOString()};case Bs:return{...s,status:"not_interested",priority:"low"};case Ws:case Gs:case Js:return{...s,status:"to_callback",priority:"medium",nextFollowUp:new Date(Date.now()+2592e5).toISOString()};default:return s}}const{Title:or}=N,{useBreakpoint:ar}=ue;function lr({leadId:e,onClose:r}={}){var t;const{leadId:i}=a(),o=l(),d=!ar().lg,c=e||i,{api:m}=ns(),[u,D]=n.useState(null),[N,b]=n.useState(!0),{callState:C,startCall:g,endCall:x,updateNotes:f,updateStatus:E,isLoading:V}=((e,s,r)=>{const{api:t}=ns(),[i,o]=n.useState({isInProgress:!1,startTime:null,duration:0,status:"",notes:"",isFormValid:!1}),[a,l]=n.useState(!1),[d,c]=n.useState();n.useEffect(()=>{let e;return i.isInProgress&&i.startTime&&(e=setInterval(()=>{o(e=>({...e,duration:Math.floor((Date.now()-e.startTime.getTime())/1e3)}))},1e3)),()=>{e&&clearInterval(e)}},[i.isInProgress,i.startTime]),n.useEffect(()=>{const e=("string"==typeof i.notes?i.notes:null==i.notes?"":String(i.notes)).trim().length>0,s=(i.status||"").length>0,r=e||s;o(e=>e.isFormValid===r?e:{...e,isFormValid:r})},[i.notes,i.status]);const m=n.useCallback(e=>{const s=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},[]),u=n.useCallback(async()=>{var r;if(!(null==(r=null==s?void 0:s.data)?void 0:r.phone))return c("Num√©ro de t√©l√©phone manquant"),void is.error("Num√©ro de t√©l√©phone manquant");l(!0),c(void 0);try{const r=await t.post("/api/telnyx/calls",{to:s.data.phone,from:ir.REACT_APP_TELNYX_PHONE_NUMBER||"+3228086660",leadId:e,metadata:{leadName:s.data.name,company:s.data.company,source:s.source}});if(!r.success)throw new Error(r.error||"Erreur lors du d√©marrage de l'appel");o(e=>({...e,isInProgress:!0,startTime:new Date,duration:0})),is.success("Appel en cours..."),t.post("/api/ai/start-call-analysis",{callId:r.callId,leadId:e,prospectProfile:{name:s.data.name,company:s.data.company,industry:s.data.industry,previousInteractions:s.notes}}).catch(e=>{})}catch(i){const e=Vs(i,"Erreur lors du d√©marrage de l'appel");Ss(i),c(e),is.error(e),o(e=>({...e,isInProgress:!1,startTime:null,duration:0}))}finally{l(!1)}},[s,e,t]),p=n.useCallback(async()=>{var s;if(i.isFormValid){l(!0);try{const n={leadId:e,status:i.status,notes:i.notes,duration:i.duration,timestamp:(new Date).toISOString(),startTime:null==(s=i.startTime)?void 0:s.toISOString(),endTime:(new Date).toISOString()},a=await t.post(`/api/leads/${e}/calls`,n);if(!a.success)throw new Error("Erreur lors de la sauvegarde de l'appel");{const s=nr(i.status);s&&await t.put(`/api/leads/${e}`,s);const n=function(e,s){switch(e){case"meeting_scheduled":return s.calendarEventId&&s.emailSent?"üéâ Appel termin√© ! RDV programm√© avec confirmation email envoy√©e":"‚úÖ Appel termin√© et RDV programm√©";case"answered":return"‚úÖ Appel termin√© avec contact √©tabli";case"callback":return"üîÑ Appel termin√© - Rappel programm√©";case"refused":return"üìù Appel termin√© - Refus not√©";default:return"‚úÖ Appel termin√© et sauvegard√©"}}(i.status,a);is.success(n),o({isInProgress:!1,startTime:null,duration:0,status:"",notes:"",isFormValid:!1}),null==r||r()}}catch(n){const e=Vs(n,"Erreur lors de la sauvegarde de l'appel");Ss(n),c(e),is.error(e)}finally{l(!1)}}else is.warning("Veuillez choisir un statut d'appel OU r√©diger une note avant de terminer")},[i,e,t,r]),v=n.useCallback(e=>{o(s=>{const r="string"==typeof s.notes?s.notes:"",t="function"==typeof e?e(r):e;return{...s,notes:t}})},[]),D=n.useCallback(s=>{if(o(e=>({...e,status:s})),e&&s){const r=nr(s);r&&t.put(`/api/leads/${e}`,r).catch(e=>{const s=Vs(e,"Erreur mise √† jour statut lead");Ss(e),is.error(s)})}},[t,e]);return n.useMemo(()=>({callState:i,startCall:u,endCall:p,updateNotes:v,updateStatus:D,formatDuration:m,isLoading:a,error:d}),[i,u,p,v,D,m,a,d])})(c,u,r),S=n.useCallback(()=>{r?r():o(`/leads/details/${c}`)},[r,o,c]),M=n.useCallback(async()=>{if(c)try{const e=await m.get(`/api/leads/${c}`);D(As(e))}catch(e){const s=Vs(e,"Erreur lors du chargement du lead");Ss(e);is.error(s),o("/leads/home")}finally{b(!1)}},[c,m,o]);if(n.useEffect(()=>{M()},[M]),N)return s.jsxDEV("div",{className:"p-8 text-center",children:"Chargement..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:119,columnNumber:23},this);if(!u)return s.jsxDEV(ee,{message:"Lead non trouv√©",type:"error"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:120,columnNumber:21},this);const A=u.name||(u.firstName&&u.lastName?`${u.firstName} ${u.lastName}`:"")||(null==(t=u.data)?void 0:t.name)||"Nom non renseign√©";return s.jsxDEV("div",{className:"min-h-screen bg-gray-50",style:{padding:d?"16px":"24px"},children:[s.jsxDEV("div",{className:"bg-white mb-6 rounded-lg shadow",style:{padding:d?"16px":"24px"},children:s.jsxDEV("div",{style:{display:"flex",flexDirection:d?"column":"row",alignItems:d?"flex-start":"center",justifyContent:"space-between",gap:d?12:24},children:s.jsxDEV(h,{wrap:!0,size:d?12:16,children:[s.jsxDEV(w,{icon:s.jsxDEV(pe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:149,columnNumber:27},this),onClick:S,children:"Retour"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:149,columnNumber:13},this),s.jsxDEV(or,{level:3,className:"mb-0",children:["üìû Module d'Appel - ",A]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:152,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:148,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:139,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:135,columnNumber:7},this),s.jsxDEV(p,{gutter:[16,16],align:"stretch",children:[s.jsxDEV(v,{xs:24,md:12,xl:8,style:{order:d?1:0},children:s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV(Os,{lead:u,callInProgress:C.isInProgress},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:165,columnNumber:13},this),s.jsxDEV(Is,{lead:u,callState:C,callNotes:C.notes,onNotesUpdate:f,onSuggestionSelect:e=>f(s=>`${s}\n[IA] ${e}`)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:169,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:164,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:163,columnNumber:9},this),s.jsxDEV(v,{xs:24,md:12,xl:8,style:{order:0},children:s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV(zs,{lead:u,callState:C,onStartCall:g,onEndCall:x,isLoading:V},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:184,columnNumber:13},this),s.jsxDEV(Fs,{lead:u,callInProgress:C.isInProgress},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:191,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:183,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:182,columnNumber:9},this),s.jsxDEV(v,{xs:24,md:12,xl:8,style:{order:d?2:0},children:s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV(sr,{callState:C,onUpdateNotes:f,onUpdateStatus:E,onEndCall:x,isLoading:V,canSave:C.isFormValid},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:201,columnNumber:13},this),"meeting_scheduled"===C.status&&s.jsxDEV(tr,{lead:u,onSlotSelected:e=>{}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:210,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:200,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:199,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:160,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/CallModule.tsx",lineNumber:129,columnNumber:5},this)}const{Title:dr,Text:cr}=N,{TextArea:mr}=K,{Option:ur}=ne,{useBreakpoint:pr}=ue;function vr({leadId:e,onClose:t,autoFillType:i}={}){var o,d,c,m;const{leadId:u}=a(),N=l(),b=r(),{api:C}=ns(),g=!pr().md,x=e||u,[f,E]=n.useState(null),[V,S]=n.useState(!0),[M,A]=n.useState(!1),[k]=ie.useForm(),[y,O]=n.useState({to:"",subject:"",body:"",tone:"cordial"}),[R,j]=n.useState(!1),[I,T]=n.useState(null),z=n.useMemo(()=>[{id:"first_contact",name:"Premier contact",subject:"Suite √† votre demande",body:"Bonjour,\n\nJe vous remercie pour votre int√©r√™t concernant nos services...",type:"first_contact"},{id:"rdv_confirmation",name:"Confirmation RDV",subject:"Confirmation de votre rendez-vous",body:"Bonjour,\n\nJe vous confirme notre rendez-vous...",type:"rdv_confirmation"},{id:"relance",name:"Relance commerciale",subject:"Relance - Votre projet",body:"Bonjour,\n\nJe me permets de revenir vers vous concernant votre projet...",type:"relance"}],[]),H=n.useCallback(()=>{t?t():N("/leads/home")},[t,N]),$=n.useCallback(async()=>{var e,s;if(x)try{const r=await C.get(`/api/leads/${x}`);E(r);const t={to:(null==(e=r.data)?void 0:e.email)||"",subject:`Suite √† votre demande - ${(null==(s=r.data)?void 0:s.company)||"2Thier SRL"}`,body:"",tone:"cordial"};if(i){const e=z.find(e=>e.type===i);e&&(t.subject=e.subject,t.body=e.body,T(e))}b.state&&Object.assign(t,b.state),O(t),k.setFieldsValue(t)}catch(r){const e=Vs(r,"Erreur lors du chargement du lead");is.error(e),H()}finally{S(!1)}},[x,C,H,b.state,k,i,z]);n.useEffect(()=>{$()},[$]);const F=n.useCallback(async e=>{var s,r;if(f){j(!0);try{const t=`G√©n√®re un email ${y.tone} pour un lead CRM.\n      \n      Contexte:\n      - Nom: ${null==(s=f.data)?void 0:s.name}\n      - Soci√©t√©: ${(null==(r=f.data)?void 0:r.company)||"Particulier"}\n      - Source: ${f.source}\n      - Action: ${e}\n      \n      G√©n√®re un objet et un corps d'email professionnel en fran√ßais.`,i=await C.post("/api/gemini/generate-email",{prompt:t,context:f,action:e,tone:y.tone,language:"fr"});if((null==i?void 0:i.subject)&&(null==i?void 0:i.body)){const e={...y,subject:i.subject,body:i.body};O(e),k.setFieldsValue(e),is.success("Email g√©n√©r√© par l'IA !")}}catch(t){const e=Vs(t,"Erreur lors de la g√©n√©ration IA");is.error(e)}finally{j(!1)}}},[f,y,C,k]),_=n.useCallback(async()=>{if(f){A(!0);try{await C.post("/api/gmail/send",{to:y.to,subject:y.subject,body:y.body,leadId:x,htmlContent:y.body.replace(/\n/g,"<br>"),trackOpening:!0,trackClicks:!0}),await C.post(`/api/leads/${x}/history`,{type:"email",data:{to:y.to,subject:y.subject,template:null==I?void 0:I.name,sentAt:new Date}}),is.success("Email envoy√© avec succ√®s !"),t?t():N(`/leads/details/${x}`)}catch(e){const s=Vs(e,"Erreur lors de l'envoi de l'email");is.error(s)}finally{A(!1)}}},[f,y,x,C,I,t,N]),Y=n.useCallback(e=>{T(e);const s={...y,subject:e.subject,body:e.body};O(s),k.setFieldsValue(s)},[y,k]);return V?s.jsxDEV("div",{className:"flex justify-center items-center p-8",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:279,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:278,columnNumber:7},this):f?s.jsxDEV("div",{className:"mx-auto w-full",style:{maxWidth:960,padding:g?"16px":"24px"},children:[s.jsxDEV(p,{justify:"space-between",align:"middle",className:"mb-6",gutter:[16,16],children:[s.jsxDEV(v,{xs:24,md:16,children:s.jsxDEV(h,{wrap:!0,size:g?12:16,children:[s.jsxDEV(w,{icon:s.jsxDEV(pe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:314,columnNumber:21},this),onClick:H,children:"Retour"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:313,columnNumber:13},this),s.jsxDEV(dr,{level:2,className:"mb-0",children:"‚úâÔ∏è Module Email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:319,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:312,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:311,columnNumber:9},this),s.jsxDEV(v,{xs:24,md:8,children:s.jsxDEV(U,{status:"processing",text:`Pour: ${(null==(o=f.data)?void 0:o.name)||"Lead"}`,style:{width:"100%",display:"flex",justifyContent:g?"flex-start":"flex-end"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:325,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:324,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:310,columnNumber:7},this),s.jsxDEV(D,{className:"mb-6",size:"small",bodyStyle:{padding:g?"16px":"24px"},children:s.jsxDEV(p,{gutter:[16,12],children:[s.jsxDEV(v,{xs:24,md:12,children:[s.jsxDEV(cr,{strong:!0,children:"Nom:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:337,columnNumber:13},this)," ",null==(d=f.data)?void 0:d.name,s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:337,columnNumber:55},this),s.jsxDEV(cr,{strong:!0,children:"Email:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:338,columnNumber:13},this)," ",null==(c=f.data)?void 0:c.email]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:336,columnNumber:11},this),s.jsxDEV(v,{xs:24,md:12,children:[s.jsxDEV(cr,{strong:!0,children:"Soci√©t√©:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:341,columnNumber:13},this)," ",(null==(m=f.data)?void 0:m.company)||"Particulier",s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:341,columnNumber:79},this),s.jsxDEV(cr,{strong:!0,children:"Source:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:342,columnNumber:13},this)," ",f.source]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:340,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:335,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:334,columnNumber:7},this),s.jsxDEV(D,{title:"üìù Templates d'email",className:"mb-6",size:"small",bodyStyle:{padding:g?"16px":"24px"},children:s.jsxDEV(p,{gutter:[8,8],children:z.map(e=>s.jsxDEV(v,{xs:12,sm:8,md:6,lg:6,children:s.jsxDEV(w,{size:"small",type:(null==I?void 0:I.id)===e.id?"primary":"default",onClick:()=>Y(e),block:!0,children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:352,columnNumber:15},this)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:351,columnNumber:13},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:349,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:348,columnNumber:7},this),s.jsxDEV(D,{title:"ü§ñ G√©n√©ration IA",className:"mb-6",size:"small",bodyStyle:{padding:g?"16px":"24px"},children:s.jsxDEV(h,{wrap:!0,size:g?12:16,children:[s.jsxDEV(w,{icon:s.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:369,columnNumber:19},this),loading:R,onClick:()=>F("premier_contact"),block:g,children:"G√©n√©rer premier contact"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:368,columnNumber:11},this),s.jsxDEV(w,{icon:s.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:377,columnNumber:19},this),loading:R,onClick:()=>F("suivi_commercial"),block:g,children:"G√©n√©rer suivi"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:376,columnNumber:11},this),s.jsxDEV(w,{icon:s.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:385,columnNumber:19},this),loading:R,onClick:()=>F("relance"),block:g,children:"G√©n√©rer relance"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:384,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:367,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:366,columnNumber:7},this),s.jsxDEV(D,{title:"‚úâÔ∏è Composer l'email",bodyStyle:{padding:g?"16px":"24px"},children:s.jsxDEV(ie,{form:k,layout:"vertical",onValuesChange:(e,s)=>O(s),children:[s.jsxDEV(p,{gutter:[16,16],children:[s.jsxDEV(v,{xs:24,md:16,children:s.jsxDEV(ie.Item,{label:"Destinataire",name:"to",rules:[{required:!0,message:"Email destinataire requis"}],children:s.jsxDEV(K,{prefix:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:410,columnNumber:27},this),placeholder:"email@example.com",size:g?"large":void 0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:409,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:404,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:403,columnNumber:13},this),s.jsxDEV(v,{xs:24,md:8,children:s.jsxDEV(ie.Item,{label:"Ton",name:"tone",children:s.jsxDEV(ne,{size:g?"large":void 0,children:[s.jsxDEV(ur,{value:"cordial",children:"Cordial"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:419,columnNumber:19},this),s.jsxDEV(ur,{value:"formel",children:"Formel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:420,columnNumber:19},this),s.jsxDEV(ur,{value:"amical",children:"Amical"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:421,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:418,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:417,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:416,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:402,columnNumber:11},this),s.jsxDEV(ie.Item,{label:"Objet",name:"subject",rules:[{required:!0,message:"Objet requis"}],children:s.jsxDEV(K,{placeholder:"Objet de l'email",size:g?"large":void 0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:432,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:427,columnNumber:11},this),s.jsxDEV(ie.Item,{label:"Corps de l'email",name:"body",rules:[{required:!0,message:"Corps de l'email requis"}],children:s.jsxDEV(mr,{rows:12,placeholder:"Tapez votre message ici...",showCount:!0,maxLength:2e3,style:{fontSize:g?"16px":void 0}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:443,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:438,columnNumber:11},this),s.jsxDEV(ie.Item,{children:s.jsxDEV(h,{wrap:!0,size:g?12:16,children:[s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:456,columnNumber:23},this),loading:M,onClick:_,size:"large",block:g,children:"Envoyer l'email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:454,columnNumber:15},this),s.jsxDEV(w,{onClick:H,block:g,children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:464,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:453,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:452,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:397,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:396,columnNumber:7},this),s.jsxDEV(D,{title:"üìä Suivi et analytics",size:"small",bodyStyle:{padding:g?"16px":"24px"},children:s.jsxDEV(cr,{type:"secondary",children:["‚úÖ Suivi d'ouverture activ√©",s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:475,columnNumber:37},this),"‚úÖ Suivi des clics activ√©",s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:476,columnNumber:35},this),"‚úÖ Historique automatique dans le lead"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:474,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:473,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:302,columnNumber:5},this):s.jsxDEV("div",{className:"p-6",children:s.jsxDEV(ee,{message:"Lead non trouv√©",type:"error",showIcon:!0,action:s.jsxDEV(w,{size:"small",onClick:H,children:"Retour √† la liste"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:292,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:287,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/EmailModule.tsx",lineNumber:286,columnNumber:7},this)}const{Title:Dr,Text:hr}=N,{TextArea:Nr}=K,{useBreakpoint:br}=ue;function Cr({leadId:r,onClose:t}={}){var i,o,d,c,m,u,N,b,C,g,x,f,k,y,O,R,j,I,P,T,z,H,$,F,K,q,Y,B,W,G;const{leadId:J}=a(),X=l(),{api:Q}=ns(),{user:Z}=e(),ee=!br().lg,se=r||J,[re,te]=n.useState(null),[ie,ne]=n.useState(!0),[oe,ae]=n.useState(!1),[ce,me]=n.useState(""),[ue,Ve]=n.useState([]),[Se,Me]=n.useState([]),Ae=n.useCallback(async()=>{if(se){ne(!0);try{const e=await Q.get(`/api/leads/${se}`),s=As(e);te(s??null);try{const e=await Q.get(`/api/leads/${se}/history`,{suppressErrorLogForStatuses:[404],showErrors:!1});Ve(Ls(e))}catch{Ve([])}try{const e=await Q.get(`/api/leads/${se}/documents`,{suppressErrorLogForStatuses:[404],showErrors:!1});Me(Ls(e))}catch{Me([])}}catch(e){const s=Vs(e,"Erreur lors du chargement du lead");Ss(e);is.error(s)}finally{ne(!1)}}},[se,Q]);n.useEffect(()=>{Ae()},[Ae]);const Le=e=>null==e?"":String(e),ke=(e,s)=>[e,s].filter(Boolean).map(Le).join(" ").trim(),ye=(...e)=>{for(const s of e)if(Array.isArray(s)){if(s.length>0&&s[0]){const e=s[0];if("string"==typeof e)return e.trim();if("object"==typeof e)return JSON.stringify(e)}}else if("string"==typeof s){const e=s.trim();if(e)return e}else if(null!=s){const e=String(s).trim();if(e)return e}return""},Oe=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"";let Re=ye(...[ke(null==re?void 0:re.firstName,null==re?void 0:re.lastName),null==re?void 0:re.name,ke(null==(i=null==re?void 0:re.data)?void 0:i.firstName,null==(o=null==re?void 0:re.data)?void 0:o.lastName),null==(d=null==re?void 0:re.data)?void 0:d.name,null==re?void 0:re.fullName,null==(c=null==re?void 0:re.contact)?void 0:c.name,ke(null==(m=null==re?void 0:re.contact)?void 0:m.firstName,null==(u=null==re?void 0:re.contact)?void 0:u.lastName),null==(N=null==re?void 0:re.customer)?void 0:N.name,null==(b=null==re?void 0:re.companyContact)?void 0:b.name]);if(!Re){const e=ye(null==re?void 0:re.email,null==(C=null==re?void 0:re.data)?void 0:C.email),s=ye(null==re?void 0:re.phone,null==(g=null==re?void 0:re.data)?void 0:g.phone),r=(e=>{if(!e)return"";const s=(e.split("@")[0]||"").split(/[._-]+/).filter(Boolean).map(Oe);return s.length>=2?`${s[0]} ${s[1]}`:s.join(" ")})(e);Re=r||s||"Lead sans nom"}const je=ye(null==re?void 0:re.email,null==re?void 0:re.contactEmail,null==(x=null==re?void 0:re.contact)?void 0:x.email,null==re?void 0:re.emails,null==(f=null==re?void 0:re.contact)?void 0:f.emails,null==(k=null==re?void 0:re.data)?void 0:k.email),Ue=ye(null==re?void 0:re.phone,null==re?void 0:re.mobile,null==re?void 0:re.telephone,null==(y=null==re?void 0:re.contact)?void 0:y.phone,null==(O=null==re?void 0:re.contact)?void 0:O.mobile,null==re?void 0:re.phones,null==(R=null==re?void 0:re.contact)?void 0:R.phones,null==(j=null==re?void 0:re.data)?void 0:j.phone),we=ye(null==re?void 0:re.company,null==re?void 0:re.companyName,null==(I=null==re?void 0:re.organization)?void 0:I.name,null==(P=null==re?void 0:re.contact)?void 0:P.company,null==(T=null==re?void 0:re.customer)?void 0:T.company,(null==re?void 0:re.isCompany)?null==re?void 0:re.name:"",null==(z=null==re?void 0:re.data)?void 0:z.company),Ie=(e=>{if(!e)return"";if("string"==typeof e)return e;return[e.street??e.line1,e.postalCode??e.zip,e.city,e.country].map(e=>e?String(e):"").filter(Boolean).join(" ")})((e=>{for(const s of e)if(s)return s;return null})([null==re?void 0:re.address,Array.isArray(null==re?void 0:re.addresses)?null==(H=null==re?void 0:re.addresses)?void 0:H[0]:void 0,null==($=null==re?void 0:re.contact)?void 0:$.address,Array.isArray(null==(F=null==re?void 0:re.contact)?void 0:F.addresses)?null==(q=null==(K=null==re?void 0:re.contact)?void 0:K.addresses)?void 0:q[0]:void 0,null==(Y=null==re?void 0:re.data)?void 0:Y.address,Array.isArray(null==(B=null==re?void 0:re.data)?void 0:B.addresses)?null==(G=null==(W=null==re?void 0:re.data)?void 0:W.addresses)?void 0:G[0]:void 0])),Pe=n.useCallback(()=>{re&&ve.info({title:"ü§ñ Script d'appel sugg√©r√© par l'IA",content:s.jsxDEV("div",{children:[s.jsxDEV("p",{children:[s.jsxDEV("strong",{children:"Contexte :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:295,columnNumber:14},this)," ",we?"Prospect B2B":"Prospect B2C"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:295,columnNumber:11},this),s.jsxDEV("p",{children:[s.jsxDEV("strong",{children:"Dernier contact :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:296,columnNumber:14},this)," ",(null==re?void 0:re.lastContactDate)?de(re.lastContactDate).format("DD/MM/YYYY"):"Premier contact"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:296,columnNumber:11},this),s.jsxDEV("p",{children:s.jsxDEV("strong",{children:"Script sugg√©r√© :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:297,columnNumber:14},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:297,columnNumber:11},this),s.jsxDEV("div",{className:"bg-blue-50 p-3 rounded mt-2",children:['\\"Bonjour ',Re,", je suis ",null==Z?void 0:Z.firstName,' de 2Thier SRL. Je vous contacte concernant votre demande sur notre site web...\\"']},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:298,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:294,columnNumber:9},this),onOk(){X(`/leads/call/${se}`)}})},[re,Z,se,X,we,Re]),Te=n.useCallback(()=>{re&&ve.info({title:"ü§ñ Cr√©neaux optimis√©s par l'IA",content:s.jsxDEV("div",{children:[s.jsxDEV("p",{children:s.jsxDEV("strong",{children:"Meilleurs cr√©neaux sugg√©r√©s :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:321,columnNumber:14},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:321,columnNumber:11},this),s.jsxDEV("ul",{className:"mt-2",children:[s.jsxDEV("li",{children:"Demain 14h00 - 15h00 (Disponibilit√© √©lev√©e)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:323,columnNumber:13},this),s.jsxDEV("li",{children:"Jeudi 10h00 - 11h00 (Optimis√© pour ce profil client)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:324,columnNumber:13},this),s.jsxDEV("li",{children:"Vendredi 16h00 - 17h00 (Cr√©neau pr√©f√©r√© client)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:325,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:322,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:320,columnNumber:9},this),onOk(){X(`/leads/agenda/${se}`)}})},[re,se,X]),ze=n.useCallback(()=>{if(!re)return;const e={to:je,subject:`Suivi de votre demande - ${we||Re}`,body:`Bonjour ${Re},\n\nJe fais suite √† notre √©change concernant...\n\nCordialement,\n${null==Z?void 0:Z.firstName} ${null==Z?void 0:Z.lastName}\n2Thier SRL`};X(`/leads/email/${se}`,{state:e})},[re,Z,se,X,je,we,Re]),He=n.useCallback(async()=>{if(ce.trim()&&se)try{await Q.post(`/api/leads/${se}/notes`,{content:ce,author:(null==Z?void 0:Z.firstName)+" "+(null==Z?void 0:Z.lastName),type:"internal"}),me(""),ae(!1),is.success("Note ajout√©e avec succ√®s"),Ae()}catch(e){const s=Vs(e,"Erreur lors de l'ajout de la note");Ss(e);is.error(s)}},[ce,se,Q,Z,Ae]),$e=n.useCallback(async e=>{try{const s=new FormData;s.append("file",e),s.append("leadId",se),s.append("type","document"),await Q.post(`/api/leads/${se}/documents`,s,{headers:{"Content-Type":"multipart/form-data"}}),is.success("Document upload√© avec succ√®s"),Ae()}catch(s){const e=Vs(s,"Erreur lors de l'upload du document");Ss(s);is.error(e)}return!1},[se,Q,Ae]),Fe=n.useCallback(()=>{t?t():X("/leads/home")},[t,X]);return ie?s.jsxDEV("div",{className:"flex justify-center items-center h-64",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:425,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:424,columnNumber:7},this):re?s.jsxDEV("div",{className:"mx-auto w-full",style:{maxWidth:1200,padding:ee?"16px":"24px"},children:[s.jsxDEV(p,{justify:"space-between",align:"middle",className:"mb-6",gutter:[16,16],children:[s.jsxDEV(v,{xs:24,lg:16,children:s.jsxDEV(h,{wrap:!0,size:ee?12:16,children:[s.jsxDEV(w,{icon:s.jsxDEV(pe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:453,columnNumber:21},this),onClick:Fe,block:ee,children:"Retour √† la liste"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:452,columnNumber:13},this),s.jsxDEV(Dr,{level:2,className:"mb-0",children:[s.jsxDEV(E,{icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:460,columnNumber:29},this),className:"mr-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:460,columnNumber:15},this),Re]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:459,columnNumber:13},this),we&&s.jsxDEV(S,{color:"blue",className:"ml-2",children:we},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:464,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:451,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:450,columnNumber:9},this),s.jsxDEV(v,{xs:24,lg:8,children:s.jsxDEV(h,{size:ee?12:16,wrap:!0,style:{width:"100%",justifyContent:ee?"flex-start":"flex-end"},children:[s.jsxDEV(_,{title:"Ouvrir TreeBranchLeaf pour ce lead",children:s.jsxDEV(w,{icon:s.jsxDEV(De,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:472,columnNumber:23},this),onClick:()=>X(`/tbl/${re.id}`),size:ee?"middle":"large",block:ee,children:"Ouvrir TBL"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:471,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:470,columnNumber:13},this),s.jsxDEV(_,{title:"Script IA sugg√©r√© avant l'appel",children:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:483,columnNumber:23},this),onClick:Pe,size:ee?"middle":"large",block:ee,children:"üìû Appeler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:481,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:480,columnNumber:13},this),s.jsxDEV(_,{title:"Cr√©neaux optimis√©s par IA",children:s.jsxDEV(w,{icon:s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:493,columnNumber:23},this),onClick:Te,size:ee?"middle":"large",block:ee,children:"üìÖ Agenda"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:492,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:491,columnNumber:13},this),s.jsxDEV(_,{title:"Email pr√©-rempli par IA",children:s.jsxDEV(w,{icon:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:503,columnNumber:23},this),onClick:ze,size:ee?"middle":"large",block:ee,children:"‚úâÔ∏è Email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:502,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:501,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:469,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:468,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:449,columnNumber:7},this),s.jsxDEV(Ne,{defaultActiveKey:"infos",size:"large",items:[{key:"infos",label:s.jsxDEV("span",{children:[s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:524,columnNumber:17},this),"Informations"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:523,columnNumber:15},this),children:s.jsxDEV(p,{gutter:[16,16],children:[s.jsxDEV(v,{xs:24,lg:12,children:s.jsxDEV(D,{title:"üë§ Coordonn√©es",className:"mb-4",bodyStyle:{padding:ee?"16px":"24px"},children:s.jsxDEV(M,{column:1,bordered:!0,size:ee?"middle":"small",children:[s.jsxDEV(M.Item,{label:"Nom",children:Re||"N/A"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:537,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Email",children:je||"N/A"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:538,columnNumber:23},this),s.jsxDEV(M.Item,{label:"T√©l√©phone",children:Ue||"N/A"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:539,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Soci√©t√©",children:we||"Particulier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:540,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Adresse",children:Ie||"N/A"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:541,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Source",children:s.jsxDEV(S,{color:"blue",children:re.source},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:543,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:542,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:536,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:531,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:530,columnNumber:17},this),s.jsxDEV(v,{xs:24,lg:12,children:s.jsxDEV(D,{title:"üìä Statut & Suivi",className:"mb-4",bodyStyle:{padding:ee?"16px":"24px"},children:s.jsxDEV(M,{column:1,bordered:!0,size:ee?"middle":"small",children:[s.jsxDEV(M.Item,{label:"Statut actuel",children:s.jsxDEV(U,{status:"processing",text:re.status},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:556,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:555,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Commercial assign√©",children:re.assignedTo?`${re.assignedTo.firstName||""} ${re.assignedTo.lastName||""}`.trim()||re.assignedTo.email:"Non assign√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:558,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Date d'entr√©e",children:de(re.createdAt).format("DD/MM/YYYY HH:mm")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:563,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Derni√®re action",children:(null==re?void 0:re.lastContactDate)?de(re.lastContactDate).format("DD/MM/YYYY HH:mm"):"Aucune"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:566,columnNumber:23},this),s.jsxDEV(M.Item,{label:"Prochain suivi",children:(null==re?void 0:re.nextFollowUpDate)?de(re.nextFollowUpDate).format("DD/MM/YYYY"):"√Ä d√©finir"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:569,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:554,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:549,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:548,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:529,columnNumber:15},this)},{key:"history",label:s.jsxDEV("span",{children:[s.jsxDEV(le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:582,columnNumber:17},this),"Historique"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:581,columnNumber:15},this),children:s.jsxDEV(D,{title:"üìû Historique des interactions",bodyStyle:{padding:ee?"16px":"24px"},extra:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:593,columnNumber:27},this),onClick:()=>ae(!0),size:ee?"middle":"large",style:{width:ee?"100%":"auto"},children:"Ajouter une note"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:591,columnNumber:19},this),children:s.jsxDEV(be,{items:ue.length>0?ue.map(e=>({color:"call"===e.type?"blue":"green",children:s.jsxDEV("div",{className:"flex justify-between",children:s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"call"===e.type?"üìû Appel":"üìß Email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:610,columnNumber:33},this),s.jsxDEV("p",{className:"mb-1",children:e.content},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:611,columnNumber:33},this),s.jsxDEV(hr,{type:"secondary",children:[e.author," - ",de(e.createdAt).format("DD/MM/YYYY HH:mm")]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:612,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:609,columnNumber:31},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:608,columnNumber:29},this)})):[{color:"gray",children:s.jsxDEV(hr,{type:"secondary",children:"Aucun historique pour ce lead"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:620,columnNumber:39},this)}]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:602,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:587,columnNumber:15},this)},{key:"documents",label:s.jsxDEV("span",{children:[s.jsxDEV(xe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:632,columnNumber:17},this),"Documents"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:631,columnNumber:15},this),children:s.jsxDEV(D,{title:"üìÑ Documents attach√©s",bodyStyle:{padding:ee?"16px":"24px"},extra:s.jsxDEV(fe,{beforeUpload:$e,showUploadList:!1,children:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:645,columnNumber:50},this),children:"Uploader un document"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:645,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:641,columnNumber:19},this),children:Se.length>0?s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Se.map((e,r)=>s.jsxDEV(D,{size:"small",className:"cursor-pointer hover:shadow-md",children:s.jsxDEV("div",{className:"flex items-center space-x-3",children:[s.jsxDEV(ge,{className:"text-blue-500 text-xl"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:656,columnNumber:27},this),s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:658,columnNumber:29},this),s.jsxDEV("div",{className:"text-sm text-gray-500",children:e.type},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:659,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:657,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:655,columnNumber:25},this)},r,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:654,columnNumber:23},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:652,columnNumber:19},this):s.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:[s.jsxDEV(xe,{className:"text-4xl mb-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:667,columnNumber:21},this),s.jsxDEV("p",{children:"Aucun document attach√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:668,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:666,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:637,columnNumber:15},this)},{key:"ai",label:s.jsxDEV("span",{children:[s.jsxDEV(Ee,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:678,columnNumber:17},this),"IA & Suggestions"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:677,columnNumber:15},this),children:s.jsxDEV(p,{gutter:[16,16],children:[s.jsxDEV(v,{xs:24,lg:12,children:s.jsxDEV(D,{title:"ü§ñ Analyse IA du Lead",className:"mb-4",bodyStyle:{padding:ee?"16px":"24px"},children:s.jsxDEV("div",{className:"space-y-3",children:[s.jsxDEV("div",{className:"bg-blue-50 p-3 rounded",children:[s.jsxDEV("strong",{children:"üí° Opportunit√© d√©tect√©e :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:688,columnNumber:25},this),s.jsxDEV("p",{className:"mb-0 mt-1",children:"Ce prospect montre des signaux d'achat √©lev√©s. Recommandation : Planifier un RDV dans les 24h."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:689,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:687,columnNumber:23},this),s.jsxDEV("div",{className:"bg-green-50 p-3 rounded",children:[s.jsxDEV("strong",{children:"üìà Score de qualification :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:692,columnNumber:25},this),s.jsxDEV("p",{className:"mb-0 mt-1",children:"85/100 - Lead tr√®s qualifi√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:693,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:691,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:686,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:685,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:684,columnNumber:17},this),s.jsxDEV(v,{xs:24,lg:12,children:s.jsxDEV(D,{title:"üéØ Prochaines actions sugg√©r√©es",className:"mb-4",bodyStyle:{padding:ee?"16px":"24px"},children:s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV(w,{block:!0,type:"dashed",icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:701,columnNumber:57},this),size:ee?"large":"middle",children:"Appeler avant 18h aujourd'hui"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:701,columnNumber:23},this),s.jsxDEV(w,{block:!0,type:"dashed",icon:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:704,columnNumber:57},this),size:ee?"large":"middle",children:"Envoyer documentation produit"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:704,columnNumber:23},this),s.jsxDEV(w,{block:!0,type:"dashed",icon:s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:707,columnNumber:57},this),size:ee?"large":"middle",children:"Proposer RDV d√©monstration"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:707,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:700,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:699,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:698,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:683,columnNumber:15},this)}]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:516,columnNumber:7},this),s.jsxDEV(ve,{title:"üìù Ajouter une note interne",open:oe,onOk:He,onCancel:()=>ae(!1),okText:"Enregistrer",cancelText:"Annuler",width:ee?"100%":520,style:ee?{top:12,padding:"0 12px"}:void 0,children:[s.jsxDEV(Nr,{rows:4,placeholder:"Saisir votre note ici... (obligatoire apr√®s un appel)",value:ce,onChange:e=>me(e.target.value)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:730,columnNumber:9},this),s.jsxDEV("div",{className:"mt-2 text-sm text-gray-500",children:"üí° L'IA analysera cette note pour d√©tecter des opportunit√©s et sugg√©rer les prochaines actions."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:736,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:720,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:441,columnNumber:5},this):s.jsxDEV("div",{className:"p-6",children:s.jsxDEV("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:s.jsxDEV("p",{className:"text-red-700",children:"Lead non trouv√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:434,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:433,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadDetailModule.tsx",lineNumber:432,columnNumber:7},this)}const gr={bobex:{hours:24,name:"Bobex",priority:"high"},solvary:{hours:48,name:"Solvary",priority:"high"},website:{hours:72,name:"Site Web",priority:"medium"},facebook:{hours:48,name:"Facebook Ads",priority:"medium"},google:{hours:24,name:"Google Ads",priority:"high"},salon:{hours:168,name:"Salon",priority:"low"},referral:{hours:96,name:"Parrainage",priority:"medium"},cold_call:{hours:24,name:"Appel froid",priority:"high"},linkedin:{hours:72,name:"LinkedIn",priority:"medium"},email:{hours:48,name:"Email entrant",priority:"medium"},manual:{hours:24,name:"Saisie manuelle",priority:"medium"},direct:{hours:24,name:"Contact direct",priority:"high"}};function xr(e,s="manual",r){const t=new Date,i=new Date(e),n=gr[s]||gr.manual,o=r?new Date(r):null,a=o?Math.floor((t.getTime()-o.getTime())/36e5):null,l=new Date(i);l.setHours(l.getHours()+n.hours);const d=l.getTime()-t.getTime(),c=Math.floor(d/36e5),m=c<0,u=Math.abs(c);let p,v,D,h;const N=e=>null===a?e:a<=12?Math.max(0,e-20):a>=72?Math.min(100,e+15):e;if(m)u>72?(p="critical",v="purple",D=100,h=`Critique: ${Math.floor(u/24)} jours de retard`):(p="overdue",v="red",D=N(90+Math.min(10,u/24*10)),h=`En retard: ${u}h`);else{const e=n.hours,s=(e-c)/e*100;s<50?(p="on_time",v="green",D=N(Math.max(0,s/2)),h=`Dans les temps: ${c}h restantes`):s<80?(p="warning",v="orange",D=N(50+.8*(s-50)),h=`Attention: ${c}h restantes`):(p="warning",v="orange",D=N(s-80+70),h=`Urgent: ${c}h restantes`)}return null!==a&&(h+=` | Dernier contact: ${a}h`),{status:p,color:v,urgencyLevel:D,remainingHours:c,deadlineDate:l,isOverdue:m,description:h,lastContactHoursAgo:a}}function fr(e){const s=xr(e.createdAt,e.source,e.lastContactDate),r=function(e){const s=xr(e.createdAt,e.source,e.lastContactDate),r=["contacted","meeting","proposal","won","lost"].includes(e.status),t=["won"].includes(e.status),i=["lost","unqualified","not_interested"].includes(e.status);let n,o,a;return t?(n="positive",o=100,a="Client gagn√©"):s.isOverdue&&!r?"critical"===s.status?(n="critical",o=-100,a=`Non trait√© depuis ${Math.floor(Math.abs(s.remainingHours)/24)} jours`):(n="negative",o=-50-Math.min(50,Math.abs(s.remainingHours)/24*10),a=`Non trait√© depuis ${Math.abs(s.remainingHours)}h`):i&&!s.isOverdue?(n="neutral",o=0,a="Refus√© mais trait√© dans les d√©lais"):r?(n="neutral",o=20,a="Trait√© dans les d√©lais"):"warning"===s.status?(n="neutral",o=-s.urgencyLevel/2,a="N√©cessite un suivi rapide"):(n="neutral",o=10,a="En cours de traitement"),{impactType:n,score:o,reason:a}}(e);let t;const i=[];let n,o;switch("critical"===s.status?(t="critical",i.push("Appeler imm√©diatement"),i.push("Envoyer email de relance"),i.push("Programmer suivi quotidien"),n="Lead critique avec retard important",o="üö® URGENT: Ce lead n√©cessite une action imm√©diate. Le retard risque d'impacter n√©gativement vos KPIs."):"overdue"===s.status?(t="high",i.push("Contacter prioritairement"),i.push("V√©rifier les coordonn√©es"),n="Lead en retard, impact commercial n√©gatif",o="‚ö†Ô∏è Lead en retard: Contactez rapidement pour limiter l'impact sur vos objectifs."):"warning"===s.status?(t="high",i.push("Planifier contact aujourd'hui"),i.push("Pr√©parer argumentaire adapt√©"),n="D√©lai serr√©, action requise",o="üéØ Fen√™tre d'opportunit√©: Contactez ce lead aujourd'hui pour maximiser vos chances."):(t="medium",i.push("Suivre le processus standard"),n="Lead dans les d√©lais",o="‚úÖ Lead sous contr√¥le: Suivez votre processus habituel."),r.impactType){case"positive":o+=` üéâ Impact positif (+${r.score}).`;break;case"negative":i.push("Planifier une revue commerciale"),o+=` üìâ Impact n√©gatif (${r.score}).`;break;case"critical":t="critical",i.unshift("Analyser les pertes potentielles"),n+=" Impact commercial critique.",o=`üö® Impact critique (${r.score}). Mobilisez l'√©quipe commerciale imm√©diatement.`;break;default:o+=` ‚ÑπÔ∏è Impact neutre (${r.score}).`}const a=e.source,l=gr[a];return"high"===(null==l?void 0:l.priority)&&("medium"===t&&(t="high"),o+=` Source ${l.name} √† haute priorit√©.`),{priority:t,actions:i,reasoning:n,aiSuggestion:o}}function Er(e,s="manual"){return xr(e,s)}function Vr(e,s="manual",r){const t=xr(e,s,r);return"critical"===t.status?"critical":"overdue"===t.status||"warning"===t.status?"high":"medium"}const{Title:Sr}=N,{Option:Mr}=ne,{RangePicker:Ar}=Se,{useBreakpoint:Lr}=ue;function kr({onViewLead:r,onCallLead:t,onEmailLead:i,onScheduleLead:o,refreshTrigger:a=0,openInline:d=!0}){const c=!Lr().md,m=l(),{api:u}=ns(),{leadStatuses:N}=xs(),[b]=n.useState(0),{currentOrganization:C,isSuperAdmin:g,user:x}=e(),[E,M]=n.useState([]),[k,y]=n.useState(!1),[O,R]=n.useState(""),[j,I]=n.useState([]),[P,T]=n.useState(""),[z,H]=n.useState(""),[$,F]=n.useState([null,null]),[_,q]=n.useState("priorityIA"),[Y,B]=n.useState(!1),[W,G]=n.useState(!1),[J,Z]=n.useState(null),[ee,se]=n.useState(!1),[re,te]=n.useState(!1),[ie,oe]=n.useState(!1),[ae,me]=n.useState(!1),[ue,pe]=n.useState(null),De=n.useCallback(e=>{const s=de(),r=e.nextFollowUp?de(e.nextFollowUp):null;return r&&r.isBefore(s.subtract(2,"day"))?"red":r&&r.isBefore(s.subtract(1,"day"))?"orange":"green"},[]),Ne=n.useMemo(()=>{if(!O)return E;const e=O.toLowerCase();return E.filter(s=>{var r,t,i,n,o;const a=null==(r=s.name)?void 0:r.toLowerCase().includes(e),l=null==(t=s.email)?void 0:t.toLowerCase().includes(e),d=null==(i=s.phone)?void 0:i.includes(e),c=null==(n=s.company)?void 0:n.toLowerCase().includes(e),m=null==(o=s.source)?void 0:o.toLowerCase().includes(e);return a||l||d||c||m})},[E,O]),be=n.useMemo(()=>{let e=Ne;if(j.length>0){e.length;e=e.filter(e=>j.includes(e.status))}if(P){e.length;e=e.filter(e=>e.source===P)}if(z){e.length;e=e.filter(e=>e.assignedTo===z)}if(2===$.length&&$[0]&&$[1]){e.length;e=e.filter(e=>{const s=de(e.createdAt);return s.isAfter($[0])&&s.isBefore($[1])})}return e},[Ne,j,P,z,$]),ge=n.useMemo(()=>{if(0===E.length)return{alerts:[],criticalCount:0,overdueCount:0,uncompletedCalls:0,emailTracking:[]};const e=[];let r=0,t=0,i=0;const n=[];if(E.forEach(o=>{const a=xr(o.createdAt,o.source||"manual"),l=fr(o);"critical"===a.status&&(r++,e.push({id:`critical-${o.id}`,type:"critical",color:"red",icon:s.jsxDEV(X,{className:"text-red-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:248,columnNumber:17},this),message:`${o.name||"Lead"} (${o.source||"direct"}) - ${Math.floor(Math.abs(a.remainingHours)/24)} jours de retard`,action:"Appeler imm√©diatement",leadId:o.id})),"overdue"===a.status&&"critical"!==a.status&&(t++,e.push({id:`overdue-${o.id}`,type:"warning",color:"orange",icon:s.jsxDEV(Ae,{className:"text-orange-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:262,columnNumber:17},this),message:`${o.name||"Lead"} d√©passe le d√©lai de ${a.deadlineDate.toLocaleDateString()}`,action:"Contacter aujourd'hui",leadId:o.id})),"warning"===a.status&&"high"===l.priority&&e.push({id:`urgent-${o.id}`,type:"warning",color:"orange",icon:s.jsxDEV(le,{className:"text-orange-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:275,columnNumber:17},this),message:`${o.name||"Lead"} - ${a.description}`,action:l.actions[0]||"Traiter rapidement",leadId:o.id}),"contacted"!==o.status||o.notes||i++,"contacted"!==o.status&&"meeting"!==o.status||n.push({leadName:o.name||"Lead",opens:Math.floor(5*Math.random())+1})}),r>0&&e.unshift({id:"system-critical",type:"critical",color:"red",icon:s.jsxDEV(X,{className:"text-red-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:302,columnNumber:15},this),message:`${r} leads d√©passent gravement le d√©lai de traitement`,action:"Action imm√©diate requise"}),i>0&&e.push({id:"system-calls",type:"warning",color:"orange",icon:s.jsxDEV(A,{className:"text-orange-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:313,columnNumber:15},this),message:`${i} appels termin√©s sans statut √† compl√©ter`,action:"Mettre √† jour les statuts"}),n.length>0){const r=n.sort((e,s)=>s.opens-e.opens)[0];e.push({id:"system-email",type:"info",color:"blue",icon:s.jsxDEV(L,{className:"text-blue-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:325,columnNumber:15},this),message:`${r.leadName} a ouvert vos emails ${r.opens} fois`,action:"Lead tr√®s int√©ress√© - Relancer"})}const o=r+t;return o>0&&e.push({id:"ai-recommendation",type:"info",color:"blue",icon:s.jsxDEV("div",{className:"text-blue-600",children:"ü§ñ"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:338,columnNumber:15},this),message:`IA sugg√®re: Prioriser les ${o} leads en retard pour am√©liorer le taux de conversion`,action:"Voir d√©tails IA"}),{alerts:e.slice(0,6),criticalCount:r,overdueCount:t,uncompletedCalls:i,emailTracking:n}},[E]),xe=n.useCallback(e=>{if(d)return Z(e),void se(!0);"function"==typeof t?t(e.id):ce.error("Erreur : fonction d'appel non disponible")},[t,d]),fe=n.useCallback(e=>{if(d)return Z(e),void te(!0);"function"==typeof i?i(e.id):ce.error("Erreur : fonction d'email non disponible")},[i,d]),Se=n.useCallback(e=>{if(d)return Z(e),void me(!0);"function"==typeof o?o(e.id):ce.error("Erreur : fonction de planification non disponible")},[o,d]),Oe=n.useCallback(e=>{if(d)return Z(e),void oe(!0);"function"==typeof r?r(e.id):ce.error("Erreur : fonction de visualisation non disponible")},[r,d]),Re=n.useCallback(e=>{Z(e),G(!0)},[]),je=n.useCallback(async()=>{if(C||g){y(!0);try{const e=await u.get("/api/leads");let s=[];s=(null==e?void 0:e.success)&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:[];const r=s.map(e=>{var s,r,t,i,n,o,a;return{...e,name:e.name||`${e.firstName||""} ${e.lastName||""}`.trim()||`Lead ${e.id.slice(0,8)}`,email:e.email||(null==(s=e.data)?void 0:s.email)||"",phone:e.phone||(null==(r=e.data)?void 0:r.phone)||"",company:e.company||(null==(t=e.data)?void 0:t.company)||"",notes:(null==(i=e.data)?void 0:i.notes)||"",website:(null==(n=e.data)?void 0:n.website)||"",linkedin:(null==(o=e.data)?void 0:o.linkedin)||"",lastContact:(null==(a=e.data)?void 0:a.lastContactDate)||e.createdAt,priorityIA:100*Math.random(),notificationColor:De(e)}});M(r)}catch(e){const s=Vs(e,"Erreur lors du chargement des leads");is.error(s)}finally{y(!1)}}},[u,C,g,De]);n.useEffect(()=>{x&&(C||g)&&je()},[x,C,g,je,a,b]);const Ue=n.useCallback(async e=>{pe(e.id);try{await u.delete(`/api/leads/${e.id}`),ce.success("Lead supprim√© avec succ√®s"),await je()}catch(s){const e=Vs(s,"Erreur lors de la suppression");throw ce.error(e),s}finally{pe(null)}},[u,je]),we=[{title:"üîî",key:"notification",width:50,render:(e,r)=>s.jsxDEV(U,{color:r.notificationColor,title:"red"===r.notificationColor?"Urgent - Retard de traitement":"orange"===r.notificationColor?"√Ä suivre - Relance n√©cessaire":"En r√®gle"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:548,columnNumber:9},this)},{title:"Nom / Pr√©nom",dataIndex:"name",key:"name",sorter:!0,render:(e,r)=>s.jsxDEV(w,{type:"link",icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:566,columnNumber:17},this),onClick:()=>Oe(r),children:e||"N/A"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:564,columnNumber:9},this)},{title:"Soci√©t√©",dataIndex:"company",key:"company",sorter:!0},{title:"Source",dataIndex:"source",key:"source",render:e=>s.jsxDEV(S,{color:"blue",children:e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:583,columnNumber:35},this)},{title:"Statut",dataIndex:"status",key:"status",render:e=>{const r=N.find(s=>s.id===e);return s.jsxDEV(S,{color:(null==r?void 0:r.color)||"default",children:(null==r?void 0:r.name)||e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:592,columnNumber:11},this)}},{title:"Date d'entr√©e",dataIndex:"createdAt",key:"createdAt",sorter:!0,render:e=>de(e).format("DD/MM/YYYY")},{title:"Commercial",key:"assignedTo",render:(e,s)=>s.assignedTo?`${s.assignedTo.firstName||""} ${s.assignedTo.lastName||""}`.trim()||s.assignedTo.email:"Non assign√©"},{title:"Derni√®re action",dataIndex:"lastContact",key:"lastContact",render:e=>e?de(e).format("DD/MM HH:mm"):"Aucune"},{title:"Prochain suivi",dataIndex:"nextFollowUp",key:"nextFollowUp",render:e=>e?de(e).format("DD/MM/YYYY"):"√Ä d√©finir"},{title:"Actions",key:"actions",width:200,render:(e,r)=>s.jsxDEV(h,{children:[s.jsxDEV(w,{size:"small",icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:635,columnNumber:19},this),onClick:()=>{xe(r)},title:"Appeler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:633,columnNumber:11},this),s.jsxDEV(w,{size:"small",icon:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:646,columnNumber:19},this),onClick:()=>{fe(r)},title:"Envoyer un email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:644,columnNumber:11},this),s.jsxDEV(w,{size:"small",icon:s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:657,columnNumber:19},this),onClick:()=>{Se(r)},title:"Planifier RDV"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:655,columnNumber:11},this),s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:668,columnNumber:19},this),onClick:()=>Re(r),title:"Modifier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:666,columnNumber:11},this),s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:674,columnNumber:19},this),onClick:()=>{Oe(r)},title:"Voir d√©tails"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:672,columnNumber:11},this),s.jsxDEV(ke,{title:"Supprimer le lead",description:"Cette action est irr√©versible. Confirmez la suppression ?",okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},onConfirm:()=>Ue(r),children:s.jsxDEV(w,{size:"small",danger:!0,loading:ue===r.id,icon:s.jsxDEV(ye,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:695,columnNumber:21},this),title:"Supprimer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:691,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:683,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:632,columnNumber:9},this)}];return s.jsxDEV("div",{className:"h-full",children:[s.jsxDEV("div",{className:"mb-4 w-full",style:{display:"flex",flexDirection:c?"column":"row",alignItems:c?"flex-start":"center",justifyContent:c?"flex-start":"space-between",gap:c?16:24,padding:c?"16px 16px 0":"24px 24px 0"},children:[s.jsxDEV("div",{style:{minWidth:0},children:[s.jsxDEV(Sr,{level:2,className:"mb-0",children:"üìä CRM Leads & Appels"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:924,columnNumber:11},this),s.jsxDEV("p",{className:"text-gray-600 mb-0",children:"Gestion compl√®te des leads avec IA int√©gr√©e"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:927,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:923,columnNumber:9},this),s.jsxDEV(h,{wrap:!0,size:c?12:16,children:[s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:935,columnNumber:19},this),onClick:()=>B(!0),block:c,children:"Nouveau Lead"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:933,columnNumber:11},this),g&&s.jsxDEV(w,{icon:s.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:945,columnNumber:21},this),onClick:()=>m("/leads/settings"),title:"Configuration des leads et statuts",block:c,children:"Param√®tres"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:944,columnNumber:13},this),s.jsxDEV(U,{count:ge.alerts.length,showZero:!1,children:s.jsxDEV(w,{icon:s.jsxDEV(Ee,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:956,columnNumber:21},this),title:"Notifications IA",block:c,children:"Alertes IA"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:955,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:954,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:932,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:912,columnNumber:7},this),function(){return s.jsxDEV("div",{className:"w-full",style:{padding:c?"16px":"24px"},children:[s.jsxDEV(D,{className:"mb-6 border-l-4 border-l-blue-500",styles:{body:{padding:c?"16px":"24px"}},children:[s.jsxDEV(p,{align:"middle",justify:"space-between",className:"mb-4",gutter:[12,12],children:[s.jsxDEV(v,{flex:"auto",children:s.jsxDEV(Sr,{level:4,className:"mb-0 flex items-center",children:["‚ö° Alertes IA",s.jsxDEV(U,{count:ge.alerts.length,className:"ml-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:727,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:725,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:724,columnNumber:11},this),s.jsxDEV(v,{flex:"none",children:s.jsxDEV(Ee,{className:"text-xl text-blue-600"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:731,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:730,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:718,columnNumber:9},this),s.jsxDEV(h,{direction:"vertical",size:"small",className:"w-full",children:ge.alerts.length>0?ge.alerts.map(e=>s.jsxDEV("div",{className:`bg-${e.color}-50 border-l-4 border-l-${e.color}-500 p-3 rounded hover:shadow-md transition-shadow cursor-pointer`,onClick:()=>e.leadId&&Oe(E.find(s=>s.id===e.leadId)),children:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.icon,s.jsxDEV("span",{className:`font-medium text-${e.color}-800`,children:e.message},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:745,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:743,columnNumber:19},this),e.action&&s.jsxDEV(U,{status:"critical"===e.type?"error":"warning"===e.type?"warning":"processing",text:e.action},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:750,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:742,columnNumber:17},this)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:737,columnNumber:15},this)):s.jsxDEV("div",{className:"text-green-600 text-center p-4 bg-green-50 rounded",children:"‚úÖ Aucune alerte - Tous vos leads sont sous contr√¥le !"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:759,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:734,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:714,columnNumber:7},this),s.jsxDEV(D,{className:"mb-4",bodyStyle:{padding:c?"16px":"24px"},children:s.jsxDEV(p,{gutter:[16,16],align:"middle",children:[s.jsxDEV(v,{xs:24,sm:24,md:12,lg:8,xl:6,children:s.jsxDEV(K,{placeholder:"üîç Recherche intelligente (nom, email, t√©l√©phone...)",prefix:s.jsxDEV(Ve,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:775,columnNumber:23},this),value:O,onChange:e=>R(e.target.value),allowClear:!0,size:c?"large":"middle"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:773,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:772,columnNumber:11},this),s.jsxDEV(v,{xs:24,sm:12,md:12,lg:8,xl:6,children:s.jsxDEV(ne,{mode:"multiple",placeholder:"Statuts",style:{width:"100%"},value:j,onChange:I,allowClear:!0,size:c?"large":"middle",children:N.map(e=>s.jsxDEV(Mr,{value:e.id,children:e.name},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:793,columnNumber:17},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:783,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:782,columnNumber:11},this),s.jsxDEV(v,{xs:12,sm:12,md:8,lg:4,xl:3,children:s.jsxDEV(ne,{placeholder:"Source",style:{width:"100%"},value:P,onChange:T,allowClear:!0,size:c?"large":"middle",children:[s.jsxDEV(Mr,{value:"website",children:"Site Web"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:808,columnNumber:15},this),s.jsxDEV(Mr,{value:"facebook",children:"Facebook Ads"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:809,columnNumber:15},this),s.jsxDEV(Mr,{value:"salon",children:"Salon"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:810,columnNumber:15},this),s.jsxDEV(Mr,{value:"referral",children:"Parrainage"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:811,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:800,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:799,columnNumber:11},this),s.jsxDEV(v,{xs:12,sm:12,md:8,lg:4,xl:3,children:s.jsxDEV(ne,{placeholder:"Commercial",style:{width:"100%"},value:z,onChange:H,allowClear:!0,size:c?"large":"middle",children:[s.jsxDEV(Mr,{value:"user1",children:"Commercial 1"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:824,columnNumber:15},this),s.jsxDEV(Mr,{value:"user2",children:"Commercial 2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:825,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:815,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:814,columnNumber:11},this),s.jsxDEV(v,{xs:24,sm:24,md:12,lg:8,xl:6,children:s.jsxDEV(Ar,{style:{width:"100%"},value:$,onChange:F,placeholder:["Date d√©but","Date fin"],size:c?"large":"middle"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:829,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:828,columnNumber:11},this),s.jsxDEV(v,{xs:24,sm:24,md:12,lg:8,xl:6,children:s.jsxDEV(ne,{placeholder:"Tri par",style:{width:"100%"},value:_,onChange:q,size:c?"large":"middle",children:[s.jsxDEV(Mr,{value:"priorityIA",children:"ü§ñ Priorit√© IA"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:845,columnNumber:15},this),s.jsxDEV(Mr,{value:"createdAt",children:"Date cr√©ation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:846,columnNumber:15},this),s.jsxDEV(Mr,{value:"nextFollowUp",children:"Prochain suivi"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:847,columnNumber:15},this),s.jsxDEV(Mr,{value:"name",children:"Nom alphab√©tique"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:848,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:838,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:837,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:771,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:767,columnNumber:7},this),s.jsxDEV(Me,{columns:we,dataSource:be,loading:k,rowKey:"id",size:c?"small":"middle",pagination:{pageSize:c?20:50,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,s)=>`${s[0]}-${s[1]} sur ${e} leads`},scroll:{x:c?900:1200},onChange:(e,s,r)=>{}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:855,columnNumber:7},this),E.filter(e=>"red"===e.notificationColor).length>0&&s.jsxDEV(D,{title:"‚ö° Alertes IA Urgentes",className:"mt-4 border-red-500",extra:s.jsxDEV(Ee,{className:"text-red-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:880,columnNumber:18},this),bodyStyle:{padding:c?"16px":"24px"},children:s.jsxDEV("div",{className:"space-y-2",children:E.filter(e=>"red"===e.notificationColor).slice(0,3).map(e=>s.jsxDEV("div",{className:"flex justify-between items-center",children:[s.jsxDEV("span",{children:["üö® ",s.jsxDEV("strong",{children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:890,columnNumber:24},this)," - Retard de traitement"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:889,columnNumber:19},this),s.jsxDEV(w,{type:"link",size:"small",onClick:()=>Oe(e),children:"Traiter ‚Üí"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:892,columnNumber:19},this)]},e.id,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:888,columnNumber:17},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:883,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:877,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:707,columnNumber:5},this)}(),s.jsxDEV(fs,{open:Y,onCancel:()=>B(!1),onSuccess:()=>{B(!1),je()}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:970,columnNumber:7},this),J&&s.jsxDEV(Es,{open:W,lead:J,onCancel:()=>{G(!1),Z(null)},onSuccess:()=>{G(!1),Z(null),je()}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:980,columnNumber:9},this),s.jsxDEV(ve,{open:ee,onCancel:()=>se(!1),footer:null,width:"95%",style:{top:16},destroyOnHidden:!0,title:null,children:J&&s.jsxDEV(lr,{leadId:J.id,onClose:()=>se(!1)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1006,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:996,columnNumber:7},this),s.jsxDEV(ve,{open:re,onCancel:()=>te(!1),footer:null,width:"95%",style:{top:16},destroyOnHidden:!0,title:null,children:J&&s.jsxDEV(vr,{leadId:J.id,onClose:()=>te(!1)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1024,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1014,columnNumber:7},this),s.jsxDEV(ve,{open:ie,onCancel:()=>oe(!1),footer:null,width:"95%",style:{top:16},destroyOnHidden:!0,title:null,children:J&&s.jsxDEV(Cr,{leadId:J.id,onClose:()=>oe(!1)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1042,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1032,columnNumber:7},this),s.jsxDEV(ve,{open:ae,onCancel:()=>me(!1),footer:null,width:800,destroyOnHidden:!0,title:s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1058,columnNumber:13},this),s.jsxDEV("span",{children:"Planifier un rendez-vous"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1059,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1057,columnNumber:11},this),children:J?s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("p",{children:"Int√©gration Google Calendar prochaine. Vous pouvez continuer vers la page d√©di√©e pour ce lead."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1065,columnNumber:13},this),s.jsxDEV(h,{children:[s.jsxDEV(w,{onClick:()=>me(!1),children:"Fermer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1069,columnNumber:15},this),s.jsxDEV(w,{type:"primary",onClick:()=>{"function"==typeof o?o(J.id):m(`/leads/agenda/${J.id}`),me(!1)},children:"Ouvrir la page Agenda"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1070,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1068,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1064,columnNumber:11},this):null},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:1050,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsHomePage.tsx",lineNumber:910,columnNumber:5},this)}const yr=n.createContext({dragDropManager:void 0});var Or="function"==typeof Symbol&&Symbol.observable||"@@observable",Rr=function(){return Math.random().toString(36).substring(7).split("").join(".")},jr={INIT:"@@redux/INIT"+Rr(),REPLACE:"@@redux/REPLACE"+Rr()};function Ur(e){if(void 0===e)return"undefined";if(null===e)return"null";var s=typeof e;switch(s){case"boolean":case"string":case"number":case"symbol":case"function":return s}if(Array.isArray(e))return"array";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";var r=function(e){return"function"==typeof e.constructor?e.constructor.name:null}(e);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return s.slice(8,-1).toLowerCase().replace(/\s/g,"")}function wr(e){return Ur(e)}function Ir(e,s,r){var t;if("function"==typeof s&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof s&&void 0===r&&(r=s,s=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function. Instead, received: '"+wr(r)+"'");return r(Ir)(e,s)}if("function"!=typeof e)throw new Error("Expected the root reducer to be a function. Instead, received: '"+wr(e)+"'");var i=e,n=s,o=[],a=o,l=!1;function d(){a===o&&(a=o.slice())}function c(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return n}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function. Instead, received: '"+wr(e)+"'");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var s=!0;return d(),a.push(e),function(){if(s){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");s=!1,d();var r=a.indexOf(e);a.splice(r,1),o=null}}}function u(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var s=e;null!==Object.getPrototypeOf(s);)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(e)===s}(e))throw new Error("Actions must be plain objects. Instead, the actual type was: '"+wr(e)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,n=i(n,e)}finally{l=!1}for(var s=o=a,r=0;r<s.length;r++){(0,s[r])()}return e}return u({type:jr.INIT}),(t={dispatch:u,subscribe:m,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function. Instead, received: '"+wr(e));i=e,u({type:jr.REPLACE})}})[Or]=function(){var e,s=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error("Expected the observer to be an object. Instead, received: '"+wr(e)+"'");function r(){e.next&&e.next(c())}return r(),{unsubscribe:s(r)}}})[Or]=function(){return this},e},t}function Pr(e,s,...r){if(!e){let e;if(void 0===s)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let t=0;e=new Error(s.replace(/%s/g,function(){return r[t++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function Tr(e){return"object"==typeof e}const zr="dnd-core/INIT_COORDS",Hr="dnd-core/BEGIN_DRAG",$r="dnd-core/PUBLISH_DRAG_SOURCE",Fr="dnd-core/HOVER",Kr="dnd-core/DROP",_r="dnd-core/END_DRAG";function qr(e,s){return{type:zr,payload:{sourceClientOffset:s||null,clientOffset:e||null}}}const Yr={type:zr,payload:{clientOffset:null,sourceClientOffset:null}};function Br(e){return function(s=[],r={publishSource:!0}){const{publishSource:t=!0,clientOffset:i,getSourceClientOffset:n}=r,o=e.getMonitor(),a=e.getRegistry();e.dispatch(qr(i)),function(e,s,r){Pr(!s.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(e){Pr(r.getSource(e),"Expected sourceIds to be registered.")})}(s,o,a);const l=function(e,s){let r=null;for(let t=e.length-1;t>=0;t--)if(s.canDragSource(e[t])){r=e[t];break}return r}(s,o);if(null==l)return void e.dispatch(Yr);let d=null;if(i){if(!n)throw new Error("getSourceClientOffset must be defined");!function(e){Pr("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(n),d=n(l)}e.dispatch(qr(i,d));const c=a.getSource(l).beginDrag(o,l);if(null==c)return;!function(e){Pr(Tr(e),"Item must be an object.")}(c),a.pinSource(l);const m=a.getSourceType(l);return{type:Hr,payload:{itemType:m,item:c,sourceId:l,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!t}}}}function Wr(e,s,r){return s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function Gr(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(s){Wr(e,s,r[s])})}return e}function Jr(e){return function(s={}){const r=e.getMonitor(),t=e.getRegistry();!function(e){Pr(e.isDragging(),"Cannot call drop while not dragging."),Pr(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(r);const i=function(e){const s=e.getTargetIds().filter(e.canDropOnTarget,e);return s.reverse(),s}(r);i.forEach((i,n)=>{const o=function(e,s,r,t){const i=r.getTarget(e);let n=i?i.drop(t,e):void 0;(function(e){Pr(void 0===e||Tr(e),"Drop result must either be an object or undefined.")})(n),void 0===n&&(n=0===s?{}:t.getDropResult());return n}(i,n,t,r),a={type:Kr,payload:{dropResult:Gr({},s,o)}};e.dispatch(a)})}}function Xr(e){return function(){const s=e.getMonitor(),r=e.getRegistry();!function(e){Pr(e.isDragging(),"Cannot call endDrag while not dragging.")}(s);const t=s.getSourceId();if(null!=t){r.getSource(t,!0).endDrag(s,t),r.unpinSource()}return{type:_r}}}function Qr(e,s){return null===s?null===e:Array.isArray(e)?e.some(e=>e===s):e===s}function Zr(e){return function(s,{clientOffset:r}={}){!function(e){Pr(Array.isArray(e),"Expected targetIds to be an array.")}(s);const t=s.slice(0),i=e.getMonitor(),n=e.getRegistry();return function(e,s,r){for(let t=e.length-1;t>=0;t--){const i=e[t];Qr(s.getTargetType(i),r)||e.splice(t,1)}}(t,n,i.getItemType()),function(e,s,r){Pr(s.isDragging(),"Cannot call hover while not dragging."),Pr(!s.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){const s=e[t];Pr(e.lastIndexOf(s)===t,"Expected targetIds to be unique in the passed array.");Pr(r.getTarget(s),"Expected targetIds to be registered.")}}(t,i,n),function(e,s,r){e.forEach(function(e){r.getTarget(e).hover(s,e)})}(t,i,n),{type:Fr,payload:{targetIds:t,clientOffset:r||null}}}}function et(e){return function(){if(e.getMonitor().isDragging())return{type:$r}}}class st{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:s}=this.store;const r=function(e){return{beginDrag:Br(e),publishDragSource:et(e),hover:Zr(e),drop:Jr(e),endDrag:Xr(e)}}(this);return Object.keys(r).reduce((t,i)=>{const n=r[i];var o;return t[i]=(o=n,(...r)=>{const t=o.apply(e,r);void 0!==t&&s(t)}),t},{})}dispatch(e){this.store.dispatch(e)}constructor(e,s){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=s,e.subscribe(this.handleRefCountChange)}}function rt(e,s){return{x:e.x-s.x,y:e.y-s.y}}const tt=[],it=[];tt.__IS_NONE__=!0,it.__IS_ALL__=!0;class nt{subscribeToStateChange(e,s={}){const{handlerIds:r}=s;Pr("function"==typeof e,"listener must be a function."),Pr(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let t=this.store.getState().stateId;return this.store.subscribe(()=>{const s=this.store.getState(),i=s.stateId;try{const n=i===t||i===t+1&&!function(e,s){return e!==tt&&(e===it||void 0===s||(r=e,s.filter(e=>r.indexOf(e)>-1)).length>0);var r}(s.dirtyHandlerIds,r);n||e()}finally{t=i}})}subscribeToOffsetChange(e){Pr("function"==typeof e,"listener must be a function.");let s=this.store.getState().dragOffset;return this.store.subscribe(()=>{const r=this.store.getState().dragOffset;r!==s&&(s=r,e())})}canDragSource(e){if(!e)return!1;const s=this.registry.getSource(e);return Pr(s,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&s.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const s=this.registry.getTarget(e);if(Pr(s,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;return Qr(this.registry.getTargetType(e),this.getItemType())&&s.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const s=this.registry.getSource(e,!0);if(Pr(s,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&s.isDragging(this,e)}isOverTarget(e,s={shallow:!1}){if(!e)return!1;const{shallow:r}=s;if(!this.isDragging())return!1;const t=this.registry.getTargetType(e),i=this.getItemType();if(i&&!Qr(t,i))return!1;const n=this.getTargetIds();if(!n.length)return!1;const o=n.indexOf(e);return r?o===n.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:s,initialClientOffset:r,initialSourceClientOffset:t}=e;return s&&r&&t?rt((n=t,{x:(i=s).x+n.x,y:i.y+n.y}),r):null;var i,n}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:s,initialClientOffset:r}=e;return s&&r?rt(s,r):null}(this.store.getState().dragOffset)}constructor(e,s){this.store=e,this.registry=s}}const ot="undefined"!=typeof global?global:self,at=ot.MutationObserver||ot.WebKitMutationObserver;function lt(e){return function(){const s=setTimeout(t,0),r=setInterval(t,50);function t(){clearTimeout(s),clearInterval(r),e()}}}const dt="function"==typeof at?function(e){let s=1;const r=new at(e),t=document.createTextNode("");return r.observe(t,{characterData:!0}),function(){s=-s,t.data=s}}:lt;class ct{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,s){this.onError=e,this.release=s,this.task=null}}const mt=new class{enqueueTask(e){const{queue:s,requestFlush:r}=this;s.length||(r(),this.flushing=!0),s[s.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const s=this.index;if(this.index++,e[s].call(),this.index>this.capacity){for(let s=0,r=e.length-this.index;s<r;s++)e[s]=e[s+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=dt(this.flush),this.requestErrorThrow=lt(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},ut=new class{create(e){const s=this.freeTasks,r=s.length?s.pop():new ct(this.onError,e=>s[s.length]=e);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}(mt.registerPendingError);const pt="dnd-core/ADD_SOURCE",vt="dnd-core/ADD_TARGET",Dt="dnd-core/REMOVE_SOURCE",ht="dnd-core/REMOVE_TARGET";function Nt(e,s){s&&Array.isArray(e)?e.forEach(e=>Nt(e,!1)):Pr("string"==typeof e||"symbol"==typeof e,s?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var bt,Ct;(Ct=bt||(bt={})).SOURCE="SOURCE",Ct.TARGET="TARGET";let gt=0;function xt(e){const s=(gt++).toString();switch(e){case bt.SOURCE:return`S${s}`;case bt.TARGET:return`T${s}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function ft(e){switch(e[0]){case"S":return bt.SOURCE;case"T":return bt.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Et(e,s){const r=e.entries();let t=!1;do{const{done:e,value:[,i]}=r.next();if(i===s)return!0;t=!!e}while(!t);return!1}class Vt{addSource(e,s){Nt(e),function(e){Pr("function"==typeof e.canDrag,"Expected canDrag to be a function."),Pr("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Pr("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(s);const r=this.addHandler(bt.SOURCE,e,s);return this.store.dispatch(function(e){return{type:pt,payload:{sourceId:e}}}(r)),r}addTarget(e,s){Nt(e,!0),function(e){Pr("function"==typeof e.canDrop,"Expected canDrop to be a function."),Pr("function"==typeof e.hover,"Expected hover to be a function."),Pr("function"==typeof e.drop,"Expected beginDrag to be a function.")}(s);const r=this.addHandler(bt.TARGET,e,s);return this.store.dispatch(function(e){return{type:vt,payload:{targetId:e}}}(r)),r}containsHandler(e){return Et(this.dragSources,e)||Et(this.dropTargets,e)}getSource(e,s=!1){Pr(this.isSourceId(e),"Expected a valid source ID.");return s&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Pr(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Pr(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Pr(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return ft(e)===bt.SOURCE}isTargetId(e){return ft(e)===bt.TARGET}removeSource(e){var s;Pr(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:Dt,payload:{sourceId:e}}}(e)),s=()=>{this.dragSources.delete(e),this.types.delete(e)},mt.enqueueTask(ut.create(s))}removeTarget(e){Pr(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:ht,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const s=this.getSource(e);Pr(s,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=s}unpinSource(){Pr(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,s,r){const t=xt(e);return this.types.set(t,s),e===bt.SOURCE?this.dragSources.set(t,r):e===bt.TARGET&&this.dropTargets.set(t,r),t}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const St=(e,s)=>e===s;function Mt(e=tt,s){switch(s.type){case Fr:break;case pt:case vt:case ht:case Dt:return tt;default:return it}const{targetIds:r=[],prevTargetIds:t=[]}=s.payload,i=function(e,s){const r=new Map,t=e=>{r.set(e,r.has(e)?r.get(e)+1:1)};e.forEach(t),s.forEach(t);const i=[];return r.forEach((e,s)=>{1===e&&i.push(s)}),i}(r,t);if(!(i.length>0||!function(e,s,r=St){if(e.length!==s.length)return!1;for(let t=0;t<e.length;++t)if(!r(e[t],s[t]))return!1;return!0}(r,t)))return tt;const n=t[t.length-1],o=r[r.length-1];return n!==o&&(n&&i.push(n),o&&i.push(o)),i}function At(e,s,r){return s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}const Lt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function kt(e=Lt,s){const{payload:r}=s;switch(s.type){case zr:case Hr:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Fr:return t=e.clientOffset,i=r.clientOffset,!t&&!i||t&&i&&t.x===i.x&&t.y===i.y?e:function(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(s){At(e,s,r[s])})}return e}({},e,{clientOffset:r.clientOffset});case _r:case Kr:return Lt;default:return e}var t,i}function yt(e,s,r){return s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function Ot(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(s){yt(e,s,r[s])})}return e}const Rt={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function jt(e=Rt,s){const{payload:r}=s;switch(s.type){case Hr:return Ot({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case $r:return Ot({},e,{isSourcePublic:!0});case Fr:return Ot({},e,{targetIds:r.targetIds});case ht:return-1===e.targetIds.indexOf(r.targetId)?e:Ot({},e,{targetIds:(t=e.targetIds,i=r.targetId,t.filter(e=>e!==i))});case Kr:return Ot({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case _r:return Ot({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var t,i}function Ut(e=0,s){switch(s.type){case pt:case vt:return e+1;case Dt:case ht:return e-1;default:return e}}function wt(e=0){return e+1}function It(e,s,r){return s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function Pt(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(s){It(e,s,r[s])})}return e}function Tt(e={},s){return{dirtyHandlerIds:Mt(e.dirtyHandlerIds,{type:s.type,payload:Pt({},s.payload,{prevTargetIds:(r=e,t="dragOperation.targetIds",i=[],t.split(".").reduce((e,s)=>e&&e[s]?e[s]:i||null,r))})}),dragOffset:kt(e.dragOffset,s),refCount:Ut(e.refCount,s),dragOperation:jt(e.dragOperation,s),stateId:wt(e.stateId)};var r,t,i}function zt(e,s=void 0,r={},t=!1){const i=function(e){const s="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ir(Tt,e&&s&&s({name:"dnd-core",instanceId:"dnd-core"}))}(t),n=new nt(i,new Vt(i)),o=new st(i,n),a=e(o,s,r);return o.receiveBackend(a),o}function Ht(e,s){if(null==e)return{};var r,t,i=function(e,s){if(null==e)return{};var r,t,i={},n=Object.keys(e);for(t=0;t<n.length;t++)r=n[t],s.indexOf(r)>=0||(i[r]=e[r]);return i}(e,s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)r=n[t],s.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}let $t=0;const Ft=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Kt,_t,qt=n.memo(function(e){var{children:s}=e,r=Ht(e,["children"]);const[t,i]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const s=function(e,s=Yt(),r,t){const i=s;i[Ft]||(i[Ft]={dragDropManager:zt(e,s,r,t)});return i[Ft]}(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[s,r]}(r);return n.useEffect(()=>{if(i){const e=Yt();return++$t,()=>{0===--$t&&(e[Ft]=null)}}},[]),as.jsx(yr.Provider,{value:t,children:s})});function Yt(){return"undefined"!=typeof global?global:window}const Bt=d(_t?Kt:(_t=1,Kt=function e(s,r){if(s===r)return!0;if(s&&r&&"object"==typeof s&&"object"==typeof r){if(s.constructor!==r.constructor)return!1;var t,i,n;if(Array.isArray(s)){if((t=s.length)!=r.length)return!1;for(i=t;0!==i--;)if(!e(s[i],r[i]))return!1;return!0}if(s.constructor===RegExp)return s.source===r.source&&s.flags===r.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===r.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===r.toString();if((t=(n=Object.keys(s)).length)!==Object.keys(r).length)return!1;for(i=t;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,n[i]))return!1;for(i=t;0!==i--;){var o=n[i];if(!e(s[o],r[o]))return!1}return!0}return s!=s&&r!=r})),Wt="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;function Gt(e,s,r){const[t,i]=function(e,s,r){const[t,i]=n.useState(()=>s(e)),o=n.useCallback(()=>{const n=s(e);Bt(t,n)||(i(n),r&&r())},[t,e,r]);return Wt(o),[t,o]}(e,s,r);return Wt(function(){const s=e.getHandlerId();if(null!=s)return e.subscribeToStateChange(i,{handlerIds:[s]})},[e,i]),t}function Jt(e,s,r){return Gt(s,e||(()=>({})),()=>r.reconnect())}function Xt(e,s){const r=[];return"function"!=typeof e&&r.push(e),n.useMemo(()=>"function"==typeof e?e():e,r)}function Qt(e){return n.useMemo(()=>e.hooks.dragSource(),[e])}function Zt(e){return n.useMemo(()=>e.hooks.dragPreview(),[e])}let ei=!1,si=!1;class ri{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Pr(!ei,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ei=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ei=!1}}isDragging(){if(!this.sourceId)return!1;Pr(!si,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return si=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{si=!1}}subscribeToStateChange(e,s){return this.internalMonitor.subscribeToStateChange(e,s)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,s){return this.internalMonitor.isOverTarget(e,s)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let ti=!1;class ii{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,s){return this.internalMonitor.subscribeToStateChange(e,s)}canDrop(){if(!this.targetId)return!1;Pr(!ti,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return ti=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{ti=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function ni(e,s,r,t){let i;if(void 0!==i)return!!i;if(e===s)return!0;if("object"!=typeof e||!e||"object"!=typeof s||!s)return!1;const n=Object.keys(e),o=Object.keys(s);if(n.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(s);for(let l=0;l<n.length;l++){const r=n[l];if(!a(r))return!1;const t=e[r],o=s[r];if(i=void 0,!1===i||void 0===i&&t!==o)return!1}return!0}function oi(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ai(e){return(s=null,r=null)=>{if(!n.isValidElement(s)){const t=s;return e(t,r),t}const t=s;!function(e){if("string"==typeof e.type)return;const s=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${s} into a <div>, or turn it into a drag source or a drop target itself.`)}(t);return function(e,s){const r=e.ref;return Pr("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?n.cloneElement(e,{ref:e=>{di(r,e),di(s,e)}}):n.cloneElement(e,{ref:s})}(t,r?s=>e(s,r):e)}}function li(e){const s={};return Object.keys(e).forEach(r=>{const t=e[r];if(r.endsWith("Ref"))s[r]=e[r];else{const e=ai(t);s[r]=()=>e}}),s}function di(e,s){"function"==typeof e?e(s):e.current=s}class ci{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,s=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return s&&this.disconnectDragSource(),this.handlerId?e?(s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),s):(this.lastConnectedDragSource=e,s):s}reconnectDragPreview(e=!1){const s=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();r&&this.disconnectDragPreview(),this.handlerId&&(s?r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=s,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,s,this.dragPreviewOptions)):this.lastConnectedDragPreview=s)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ni(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ni(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=li({dragSource:(e,s)=>{this.clearDragSource(),this.dragSourceOptions=s||null,oi(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,s)=>{this.clearDragPreview(),this.dragPreviewOptions=s||null,oi(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class mi{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const s=this.dropTarget;this.handlerId&&(s?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=s,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,s,this.dropTargetOptions)):this.lastConnectedDropTarget=s)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ni(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=li({dropTarget:(e,s)=>{this.clearDropTarget(),this.dropTargetOptions=s,oi(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function ui(){const{dragDropManager:e}=n.useContext(yr);return Pr(null!=e,"Expected drag drop context"),e}class pi{beginDrag(){const e=this.spec,s=this.monitor;let r=null;return r="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(s):{},null!=r?r:null}canDrag(){const e=this.spec,s=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(s)}isDragging(e,s){const r=this.spec,t=this.monitor,{isDragging:i}=r;return i?i(t):s===e.getSourceId()}endDrag(){const e=this.spec,s=this.monitor,r=this.connector,{end:t}=e;t&&t(s.getItem(),s),r.reconnect()}constructor(e,s,r){this.spec=e,this.monitor=s,this.connector=r}}function vi(e,s,r){const t=ui(),i=function(e,s,r){const t=n.useMemo(()=>new pi(e,s,r),[s,r]);return n.useEffect(()=>{t.spec=e},[e]),t}(e,s,r),o=function(e){return n.useMemo(()=>{const s=e.type;return Pr(null!=s,"spec.type must be defined"),s},[e])}(e);Wt(function(){if(null!=o){const[e,n]=function(e,s,r){const t=r.getRegistry(),i=t.addSource(e,s);return[i,()=>t.removeSource(i)]}(o,i,t);return s.receiveHandlerId(e),r.receiveHandlerId(e),n}},[t,s,r,i,o])}function Di(e,s){const r=Xt(e);Pr(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const t=function(){const e=ui();return n.useMemo(()=>new ri(e),[e])}(),i=function(e,s){const r=ui(),t=n.useMemo(()=>new ci(r.getBackend()),[r]);return Wt(()=>(t.dragSourceOptions=e||null,t.reconnect(),()=>t.disconnectDragSource()),[t,e]),Wt(()=>(t.dragPreviewOptions=s||null,t.reconnect(),()=>t.disconnectDragPreview()),[t,s]),t}(r.options,r.previewOptions);return vi(r,t,i),[Jt(r.collect,t,i),Qt(i),Zt(i)]}function hi(e){return n.useMemo(()=>e.hooks.dropTarget(),[e])}class Ni{canDrop(){const e=this.spec,s=this.monitor;return!e.canDrop||e.canDrop(s.getItem(),s)}hover(){const e=this.spec,s=this.monitor;e.hover&&e.hover(s.getItem(),s)}drop(){const e=this.spec,s=this.monitor;if(e.drop)return e.drop(s.getItem(),s)}constructor(e,s){this.spec=e,this.monitor=s}}function bi(e,s,r){const t=ui(),i=function(e,s){const r=n.useMemo(()=>new Ni(e,s),[s]);return n.useEffect(()=>{r.spec=e},[e]),r}(e,s),o=function(e){const{accept:s}=e;return n.useMemo(()=>(Pr(null!=e.accept,"accept must be defined"),Array.isArray(s)?s:[s]),[s])}(e);Wt(function(){const[e,n]=function(e,s,r){const t=r.getRegistry(),i=t.addTarget(e,s);return[i,()=>t.removeTarget(i)]}(o,i,t);return s.receiveHandlerId(e),r.receiveHandlerId(e),n},[t,s,i,r,o.map(e=>e.toString()).join("|")])}function Ci(e,s){const r=Xt(e),t=function(){const e=ui();return n.useMemo(()=>new ii(e),[e])}(),i=function(e){const s=ui(),r=n.useMemo(()=>new mi(s.getBackend()),[s]);return Wt(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}(r.options);return bi(r,t,i),[Jt(r.collect,t,i),hi(i)]}function gi(e){let s=null;return()=>(null==s&&(s=e()),s)}class xi{enter(e){const s=this.entered.length;return this.entered=function(e,s){const r=new Set,t=e=>r.add(e);e.forEach(t),s.forEach(t);const i=[];return r.forEach(e=>i.push(e)),i}(this.entered.filter(s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e))),[e]),0===s&&this.entered.length>0}leave(e){const s=this.entered.length;var r,t;return this.entered=(r=this.entered.filter(this.isNodeInDocument),t=e,r.filter(e=>e!==t)),s>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class fi{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>null})})}loadDataTransfer(e){if(e){const s={};Object.keys(this.config.exposeProperties).forEach(r=>{const t=this.config.exposeProperties[r];null!=t&&(s[r]={value:t(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,s)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,s){return s===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Ei="__NATIVE_FILE__",Vi="__NATIVE_URL__",Si="__NATIVE_TEXT__",Mi="__NATIVE_HTML__",Ai=Object.freeze(Object.defineProperty({__proto__:null,FILE:Ei,HTML:Mi,TEXT:Si,URL:Vi},Symbol.toStringTag,{value:"Module"}));function Li(e,s,r){const t=s.reduce((s,r)=>s||e.getData(r),"");return null!=t?t:r}const ki={[Ei]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Mi]:{exposeProperties:{html:(e,s)=>Li(e,s,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Vi]:{exposeProperties:{urls:(e,s)=>Li(e,s,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Si]:{exposeProperties:{text:(e,s)=>Li(e,s,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function yi(e){if(!e)return null;const s=Array.prototype.slice.call(e.types||[]);return Object.keys(ki).filter(e=>{const r=ki[e];return!!(null==r?void 0:r.matchesTypes)&&r.matchesTypes.some(e=>s.indexOf(e)>-1)})[0]||null}const Oi=gi(()=>/firefox/i.test(navigator.userAgent)),Ri=gi(()=>Boolean(window.safari));class ji{interpolate(e){const{xs:s,ys:r,c1s:t,c2s:i,c3s:n}=this;let o=s.length-1;if(e===s[o])return r[o];let a,l=0,d=n.length-1;for(;l<=d;){a=Math.floor(.5*(l+d));const t=s[a];if(t<e)l=a+1;else{if(!(t>e))return r[a];d=a-1}}o=Math.max(0,d);const c=e-s[o],m=c*c;return r[o]+t[o]*c+i[o]*m+n[o]*c*m}constructor(e,s){const{length:r}=e,t=[];for(let u=0;u<r;u++)t.push(u);t.sort((s,r)=>e[s]<e[r]?-1:1);const i=[],n=[];let o,a;for(let u=0;u<r-1;u++)o=e[u+1]-e[u],a=s[u+1]-s[u],i.push(o),n.push(a/o);const l=[n[0]];for(let u=0;u<i.length-1;u++){const e=n[u],s=n[u+1];if(e*s<=0)l.push(0);else{o=i[u];const r=i[u+1],t=o+r;l.push(3*t/((t+r)/e+(t+o)/s))}}l.push(n[n.length-1]);const d=[],c=[];let m;for(let u=0;u<l.length-1;u++){m=n[u];const e=l[u],s=1/i[u],r=e+l[u+1]-m-m;d.push((m-e-r)*s),c.push(r*s*s)}this.xs=e,this.ys=s,this.c1s=l,this.c2s=d,this.c3s=c}}function Ui(e){const s=1===e.nodeType?e:e.parentElement;if(!s)return null;const{top:r,left:t}=s.getBoundingClientRect();return{x:t,y:r}}function wi(e){return{x:e.clientX,y:e.clientY}}function Ii(e,s,r,t,i){const n="IMG"===(o=s).nodeName&&(Oi()||!(null===(a=document.documentElement)||void 0===a?void 0:a.contains(o)));var o,a;const l=Ui(n?e:s),d={x:r.x-l.x,y:r.y-l.y},{offsetWidth:c,offsetHeight:m}=e,{anchorX:u,anchorY:p}=t,{dragPreviewWidth:v,dragPreviewHeight:D}=function(e,s,r,t){let i=e?s.width:r,n=e?s.height:t;return Ri()&&e&&(n/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:n}}(n,s,c,m),{offsetX:h,offsetY:N}=i,b=0===N||N;return{x:0===h||h?h:new ji([0,.5,1],[d.x,d.x/c*v,d.x+v-c]).interpolate(u),y:b?N:(()=>{let e=new ji([0,.5,1],[d.y,d.y/m*D,d.y+D-m]).interpolate(p);return Ri()&&n&&(e+=(window.devicePixelRatio-1)*D),e})()}}class Pi{get window(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,s){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=s}}function Ti(e,s,r){return s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function zi(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(s){Ti(e,s,r[s])})}return e}class Hi{profile(){var e,s;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(s=this.dragOverTargetIds)||void 0===s?void 0:s.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var s;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(s=this.window)||void 0===s||s.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,s,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,s),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,s,r){this.sourceNodes.set(e,s),this.sourceNodeOptions.set(e,r);const t=s=>this.handleDragStart(s,e),i=e=>this.handleSelectStart(e);return s.setAttribute("draggable","true"),s.addEventListener("dragstart",t),s.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),s.removeEventListener("dragstart",t),s.removeEventListener("selectstart",i),s.setAttribute("draggable","false")}}connectDropTarget(e,s){const r=s=>this.handleDragEnter(s,e),t=s=>this.handleDragOver(s,e),i=s=>this.handleDrop(s,e);return s.addEventListener("dragenter",r),s.addEventListener("dragover",t),s.addEventListener("drop",i),()=>{s.removeEventListener("dragenter",r),s.removeEventListener("dragover",t),s.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),s=this.sourceNodeOptions.get(e);return zi({dropEffect:this.altKeyPressed?"copy":"move"},s||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return zi({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Ai).some(s=>Ai[s]===e)}beginDragNativeItem(e,s){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,s){const r=ki[e];if(!r)throw new Error(`native type ${e} has no configuration`);const t=new fi(r);return t.loadDataTransfer(s),t}(e,s),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout(()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,s){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(s))}handleDragEnter(e,s){this.dragEnterTargetIds.unshift(s)}handleDragOver(e,s){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(s)}handleDrop(e,s){this.dropTargetIds.unshift(s)}constructor(e,s,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const s=this.sourceNodes.get(e);return s&&Ui(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!=typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const r=wi(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});const{dataTransfer:t}=e,i=yi(t);if(this.monitor.isDragging()){if(t&&"function"==typeof t.setDragImage){const e=this.monitor.getSourceId(),s=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||s;if(i){const{anchorX:e,anchorY:n,offsetX:o,offsetY:a}=this.getCurrentSourcePreviewNodeOptions(),l=Ii(s,i,r,{anchorX:e,anchorY:n},{offsetX:o,offsetY:a});t.setDragImage(i,l.x,l.y)}}try{null==t||t.setData("application/json",{})}catch(n){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:s}=this.getCurrentSourcePreviewNodeOptions();s?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(i)this.beginDragNativeItem(i);else{if(t&&!t.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var s;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(s=this.currentNativeSource)||void 0===s||s.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:r}=e,t=yi(r);t&&this.beginDragNativeItem(t,r)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,s.length>0&&this.actions.hover(s,{clientOffset:wi(e)});s.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var s;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(s=this.currentNativeSource)||void 0===s||s.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=wi(e),this.scheduleHover(s);(s||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{var s;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(s=this.currentNativeSource)||void 0===s||s.loadDataTransfer(e.dataTransfer)):yi(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:wi(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const s=e.target;"function"==typeof s.dragDrop&&("INPUT"===s.tagName||"SELECT"===s.tagName||"TEXTAREA"===s.tagName||s.isContentEditable||(e.preventDefault(),s.dragDrop()))},this.options=new Pi(s,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new xi(this.isNodeInDocument)}}const $i=function(e,s,r){return new Hi(e,s,r)},{Title:Fi,Text:Ki}=N,_i="LEAD_CARD",qi=({lead:e,onView:r,onCall:t,onEmail:i,onSchedule:n})=>{var a,l,d;const c=Er(e.createdAt,e.source),m=Vr(e.createdAt,e.source,e.lastContactDate),u=function(e){switch(e){case"critical":return"#722ed1";case"overdue":return"#ff4d4f";case"warning":return"#fa8c16";case"on_time":return"#52c41a";default:return"#d9d9d9"}}(c.status),p=()=>u,[{isDragging:v,canDrag:h},N,b]=Di({type:_i,item:()=>({id:e.id,type:_i,fromColumn:e.status}),canDrag:()=>!0,collect:e=>{const s=e.isDragging(),r=e.canDrag();e.getItem();return{isDragging:s,canDrag:r}},end:(e,s)=>{}}),C=e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:(null==(a=e.data)?void 0:a.name)||`Lead ${e.id.slice(0,8)}`;return o.useEffect(()=>{const e=document.createElement("div");return e.innerHTML=`\n      <div style="\n        background: linear-gradient(135deg, #1890ff, #40a9ff);\n        color: white;\n        padding: 12px 16px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n        font-size: 14px;\n        font-weight: 500;\n        white-space: nowrap;\n        transform: rotate(3deg);\n      ">\n        üöÄ ${C}\n      </div>\n    `,e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",document.body.appendChild(e),b(e),()=>{document.body.contains(e)&&document.body.removeChild(e)}},[b,C]),s.jsxDEV("div",{ref:N,style:{opacity:v?.5:1,cursor:h?v?"grabbing":"grab":"default",transform:v?"rotate(5deg)":"none",transition:"all 0.2s ease"},draggable:!0,className:"select-none",onDragStart:e=>{e.dataTransfer.effectAllowed="move";const s=e.currentTarget.cloneNode(!0);s.style.transform="rotate(5deg)",s.style.opacity="0.8",s.style.width=e.currentTarget.offsetWidth+"px",s.style.backgroundColor="#f0f8ff",s.style.border="2px dashed #1890ff",s.style.borderRadius="8px",document.body.appendChild(s),s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",e.dataTransfer.setDragImage(s,e.nativeEvent.offsetX,e.nativeEvent.offsetY),setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},100)},onDrag:e=>{},onDragEnd:e=>{},children:s.jsxDEV(D,{size:"small",className:`\n          transition-all duration-300 ease-in-out\n          ${v?"shadow-2xl border-dashed rotate-2 scale-105":"hover:shadow-lg hover:-translate-y-1"}\n          cursor-grab active:cursor-grabbing\n        `,style:{borderLeft:`4px solid ${p()}`,borderRadius:"12px",backgroundColor:v?"#e6f7ff":c.isOverdue?"#fef7f7":"white",cursor:h?v?"grabbing":"grab":"default",pointerEvents:v?"none":"auto",border:v?"2px dashed #1890ff":"1px solid #e5e5e5",transform:v?"scale(1.05) rotate(2deg)":"scale(1)",boxShadow:v?"0 8px 25px rgba(24, 144, 255, 0.3)":c.isOverdue?"0 2px 8px rgba(255, 77, 79, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.06)"},styles:{body:{padding:"16px"}},children:[s.jsxDEV("div",{className:"flex justify-between items-start mb-3",children:[s.jsxDEV("div",{className:"flex-1 min-w-0",children:[s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV(Ki,{strong:!0,className:"text-sm text-gray-800 truncate",children:C},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:242,columnNumber:15},void 0),(()=>{switch(m){case"critical":return s.jsxDEV(X,{style:{color:"#722ed1"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:69,columnNumber:31},void 0);case"high":return s.jsxDEV(Ae,{style:{color:"#ff4d4f"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:70,columnNumber:27},void 0);case"medium":return s.jsxDEV(le,{style:{color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:71,columnNumber:29},void 0);default:return s.jsxDEV(oe,{style:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:72,columnNumber:23},void 0)}})()]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:241,columnNumber:13},void 0),(e.company||(null==(l=e.data)?void 0:l.company))&&s.jsxDEV(Ki,{type:"secondary",className:"text-xs mt-1 block truncate",children:["üè¢ ",e.company||(null==(d=e.data)?void 0:d.company)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:250,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:240,columnNumber:11},void 0),s.jsxDEV(U,{count:c.isOverdue?"Retard":`${c.remainingHours}h`,style:{backgroundColor:p(),fontSize:"10px",fontWeight:"bold",minWidth:"45px",height:"20px",lineHeight:"20px"},className:"ml-2 flex-shrink-0"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:256,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:239,columnNumber:9},void 0),s.jsxDEV("div",{className:"space-y-2 mb-3",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV(S,{color:"critical"===c.status?"purple":"urgent"===c.status?"red":"important"===c.status?"orange":"green",className:"text-xs font-medium",children:e.source||"direct"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:274,columnNumber:13},void 0),s.jsxDEV(Ki,{className:"text-xs text-gray-500 truncate max-w-[120px]",children:c.description},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:280,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:273,columnNumber:11},void 0),e.assignedTo&&s.jsxDEV("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsxDEV(V,{className:"text-gray-400"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:288,columnNumber:15},void 0),s.jsxDEV("span",{className:"truncate",children:[e.assignedTo.firstName," ",e.assignedTo.lastName]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:289,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:287,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[e.email&&s.jsxDEV("div",{className:"flex items-center space-x-1",children:[s.jsxDEV(L,{className:"text-gray-400"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:299,columnNumber:17},void 0),s.jsxDEV("span",{className:"truncate max-w-[100px]",children:e.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:300,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:298,columnNumber:15},void 0),e.phone&&s.jsxDEV("div",{className:"flex items-center space-x-1",children:[s.jsxDEV(A,{className:"text-gray-400"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:305,columnNumber:17},void 0),s.jsxDEV("span",{children:e.phone},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:306,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:304,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:296,columnNumber:11},void 0),"low"!==m&&s.jsxDEV("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-2 text-xs",children:s.jsxDEV(Ki,{className:"text-xs",style:{color:"critical"===m?"#722ed1":"#666",fontStyle:"italic"},children:["ü§ñ Priorit√© ",m," - Action recommand√©e"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:314,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:313,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:271,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[s.jsxDEV("div",{className:"flex space-x-2",children:"critical"===m?s.jsxDEV(w,{size:"small",type:"primary",danger:!0,icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:332,columnNumber:23},void 0),onClick:e=>{e.stopPropagation(),t()},title:"URGENT - Appeler",className:"text-xs font-medium"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:328,columnNumber:15},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV(w,{size:"small",type:"text",icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:342,columnNumber:25},void 0),onClick:e=>{e.stopPropagation(),t()},title:"Appeler",className:"hover:bg-blue-50 hover:text-blue-600 transition-colors"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:339,columnNumber:17},void 0),s.jsxDEV(w,{size:"small",type:"text",icon:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:350,columnNumber:25},void 0),onClick:e=>{e.stopPropagation(),i()},title:"Email",className:"hover:bg-green-50 hover:text-green-600 transition-colors"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:347,columnNumber:17},void 0),s.jsxDEV(w,{size:"small",type:"text",icon:s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:358,columnNumber:25},void 0),onClick:e=>{e.stopPropagation(),n()},title:"RDV",className:"hover:bg-purple-50 hover:text-purple-600 transition-colors"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:355,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:338,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:326,columnNumber:11},void 0),s.jsxDEV(w,{size:"small",type:"text",icon:s.jsxDEV(Q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:370,columnNumber:19},void 0),onClick:e=>{e.stopPropagation(),r()},title:"Voir d√©tails",className:"hover:bg-gray-50 hover:text-gray-700 transition-colors"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:367,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:325,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:215,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:169,columnNumber:5},void 0)},Yi=({column:e,leads:r,onDropLead:t,onViewLead:i,onCallLead:o,onEmailLead:a,onScheduleLead:l})=>{const[{isOver:d},c]=Ci({accept:_i,drop:s=>{s.fromColumn!==e.id&&t(s.id,e.id)},collect:e=>{const s=e.isOver();e.canDrop(),e.getItem();return{isOver:s}}}),m=n.useMemo(()=>({overdueCount:r.filter(e=>{const s=Er(e.createdAt,e.source);return s.isOverdue||"critical"===s.status}).length,criticalCount:r.filter(e=>"critical"===Er(e.createdAt,e.source).status).length,urgentCount:r.filter(e=>{const s=Vr(e.createdAt,e.source,e.lastContactDate);return"high"===s||"critical"===s}).length}),[r]);return s.jsxDEV("div",{ref:c,className:`\n        bg-white rounded-xl border border-gray-200 shadow-sm\n        min-h-[70vh] transition-all duration-300 ease-in-out\n        ${d?"bg-blue-50 border-2 border-blue-400 border-dashed shadow-lg transform scale-[1.02]":"hover:shadow-md"}\n        flex flex-col\n      `,style:{minHeight:"600px"},children:[s.jsxDEV("div",{className:"p-4 border-b border-gray-100 bg-gray-50 rounded-t-xl",children:[s.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:494,columnNumber:13},void 0),s.jsxDEV(Fi,{level:5,className:"mb-0 text-sm sm:text-base font-semibold",style:{color:e.color},children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:498,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:493,columnNumber:11},void 0),s.jsxDEV(U,{count:r.length,style:{backgroundColor:e.color,fontSize:"11px",minWidth:"20px",height:"20px",lineHeight:"20px"},className:"font-medium"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:507,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:492,columnNumber:9},void 0),(m.overdueCount>0||m.urgentCount>0||m.criticalCount>0)&&s.jsxDEV("div",{className:"flex flex-wrap gap-1 mt-2",children:[m.criticalCount>0&&s.jsxDEV("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",title:`${m.criticalCount} leads critiques`,children:[s.jsxDEV(X,{className:"mr-1"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:528,columnNumber:17},void 0),m.criticalCount," critique",m.criticalCount>1?"s":""]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:524,columnNumber:15},void 0),m.overdueCount>0&&s.jsxDEV("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",title:`${m.overdueCount} leads en retard`,children:[s.jsxDEV(X,{className:"mr-1"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:537,columnNumber:17},void 0),m.overdueCount," retard",m.overdueCount>1?"s":""]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:533,columnNumber:15},void 0),m.urgentCount>0&&s.jsxDEV("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",title:`${m.urgentCount} leads urgents`,children:[s.jsxDEV(Ae,{className:"mr-1"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:546,columnNumber:17},void 0),m.urgentCount," urgent",m.urgentCount>1?"s":""]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:542,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:522,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:491,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex-1 p-3 overflow-y-auto",children:s.jsxDEV("div",{className:"space-y-3",children:[r.map(e=>s.jsxDEV(qi,{lead:e,onView:()=>i(e.id),onCall:()=>o(e.id),onEmail:()=>a(e.id),onSchedule:()=>l(e.id)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:558,columnNumber:13},void 0)),0===r.length&&s.jsxDEV("div",{className:"text-center py-8 text-gray-400",children:[s.jsxDEV("div",{className:"text-4xl mb-2",children:"üì≠"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:571,columnNumber:15},void 0),s.jsxDEV(Ki,{type:"secondary",className:"text-sm",children:['Aucun lead dans "',e.name,'"']},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:572,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:570,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:556,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:555,columnNumber:7},void 0),d&&s.jsxDEV("div",{className:"mx-3 mb-3 p-4 border-2 border-blue-400 border-dashed rounded-lg text-center bg-blue-50 animate-pulse",children:[s.jsxDEV("div",{className:"text-blue-600 font-medium text-sm",children:"üí´ D√©poser le lead ici"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:583,columnNumber:11},void 0),s.jsxDEV(Ki,{type:"secondary",className:"text-xs",children:['pour le d√©placer vers "',e.name,'"']},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:586,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:582,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:480,columnNumber:5},void 0)},Bi=({onViewLead:r,onCallLead:t,onEmailLead:i,onScheduleLead:o,refreshTrigger:a=0,onLeadUpdated:l})=>{const{api:d}=ns(),{currentOrganization:c,isSuperAdmin:m,user:u}=e(),{leadStatuses:D,isLoading:h}=xs(),[N,b]=n.useState([]),[C,g]=n.useState(!1),[x,f]=n.useState(!1),E=n.useRef(!1),V=n.useCallback(async()=>{if(c||m){g(!0);try{const e=await d.get("/api/leads");let s=[];Array.isArray(e)?s=e:(null==e?void 0:e.data)&&Array.isArray(e.data)&&(s=e.data);const r=s.map(e=>{var s,r,t,i,n,o,a;return{...e,name:e.name||`${e.firstName||""} ${e.lastName||""}`.trim()||`Lead ${e.id.slice(0,8)}`,email:e.email||(null==(s=e.data)?void 0:s.email)||"",phone:e.phone||(null==(r=e.data)?void 0:r.phone)||"",company:e.company||(null==(t=e.data)?void 0:t.company)||"",notes:(null==(i=e.data)?void 0:i.notes)||"",website:(null==(n=e.data)?void 0:n.website)||"",linkedin:(null==(o=e.data)?void 0:o.linkedin)||"",lastContact:(null==(a=e.data)?void 0:a.lastContactDate)||e.createdAt,statusId:e.statusId}});b(r)}catch(e){const s=Vs(e,"Erreur lors du chargement des leads");ce.error(s)}finally{g(!1)}}},[d,c,m]);n.useEffect(()=>{x||(E.current&&a>0?E.current=!1:u&&(c||m)&&V())},[u,c,m,V,a,x]);const S=n.useCallback(async(e,s)=>{try{b(r=>r.map(r=>r.id===e?{...r,statusId:s}:r));await d.put(`/api/leads/${e}`,{statusId:s});ce.success("Lead d√©plac√© avec succ√®s !"),l&&(E.current=!0,f(!0),l(),setTimeout(()=>{f(!1)},2e3))}catch(r){const e=Vs(r,"Erreur lors du d√©placement du lead"),{status:s,data:t}=Ss(r);ce.error(e),V()}},[d,V,u,c,m,l]),M=n.useMemo(()=>{const e={};return D.forEach(s=>{e[s.id]=[]}),N.forEach(s=>{const r=s.statusId;if(r&&e[r])e[r].push(s);else{const r=D[0];r&&e[r.id].push(s)}}),e},[N,D]),A=n.useMemo(()=>{var e;const s=N.length,r=N.filter(e=>{const s=Er(e.createdAt,e.source);return s.isOverdue||"critical"===s.status}),t=N.filter(e=>"critical"===Er(e.createdAt,e.source).status),i=N.filter(e=>{const s=Vr(e.createdAt,e.source,e.lastContactDate);return"high"===s||"critical"===s}),n=(null==(e=M.won)?void 0:e.length)||0,o=s>0?(n/s*100).toFixed(1):"0",a=N.reduce((e,s)=>{const r=Er(s.createdAt,s.source);return"critical"===r.status?e-10:r.isOverdue?e-5:"urgent"===r.status?e-1:"won"===s.status?e+10:e},0);return{total:s,overdue:r.length,critical:t.length,urgent:i.length,won:n,conversionRate:o,commercialScore:a}},[N,M]);if(C||h)return s.jsxDEV("div",{className:"flex justify-center items-center h-64",children:s.jsxDEV(H,{size:"large"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:879,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:878,columnNumber:7},void 0);if(0===D.length)return s.jsxDEV(ee,{message:"Aucun statut de lead configur√©",description:"Veuillez configurer les statuts de leads dans les param√®tres.",type:"warning",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:886,columnNumber:7},void 0);const L=(()=>{const e=D.length;return e<=3?8:e<=4?6:e<=6?4:3})();return s.jsxDEV(qt,{backend:$i,children:s.jsxDEV("div",{className:"w-full max-w-full",children:s.jsxDEV("div",{className:"px-4 sm:px-6 lg:px-8 py-4",children:[s.jsxDEV("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[s.jsxDEV("div",{children:s.jsxDEV(Fi,{level:2,className:"mb-0 text-xl sm:text-2xl lg:text-3xl",children:"üèóÔ∏è Pipeline Commercial"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:913,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:912,columnNumber:13},void 0),s.jsxDEV("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-4 w-full lg:w-auto",children:[s.jsxDEV("div",{className:"text-center bg-white p-2 sm:p-3 rounded-lg shadow-sm border",children:[s.jsxDEV("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-600",children:A.total},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:921,columnNumber:17},void 0),s.jsxDEV("div",{className:"text-xs text-gray-500",children:"Total"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:922,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:920,columnNumber:15},void 0),s.jsxDEV("div",{className:"text-center bg-white p-2 sm:p-3 rounded-lg shadow-sm border",children:[s.jsxDEV("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-purple-600",children:A.critical},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:925,columnNumber:17},void 0),s.jsxDEV("div",{className:"text-xs text-gray-500",children:"Critiques"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:926,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:924,columnNumber:15},void 0),s.jsxDEV("div",{className:"text-center bg-white p-2 sm:p-3 rounded-lg shadow-sm border",children:[s.jsxDEV("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-red-600",children:A.overdue},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:929,columnNumber:17},void 0),s.jsxDEV("div",{className:"text-xs text-gray-500",children:"Retard"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:930,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:928,columnNumber:15},void 0),s.jsxDEV("div",{className:"text-center bg-white p-2 sm:p-3 rounded-lg shadow-sm border",children:[s.jsxDEV("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-orange-600",children:A.urgent},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:933,columnNumber:17},void 0),s.jsxDEV("div",{className:"text-xs text-gray-500",children:"Urgents"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:934,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:932,columnNumber:15},void 0),s.jsxDEV("div",{className:"text-center bg-white p-2 sm:p-3 rounded-lg shadow-sm border",children:[s.jsxDEV("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-600",children:[A.conversionRate,"%"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:937,columnNumber:17},void 0),s.jsxDEV("div",{className:"text-xs text-gray-500",children:"Conversion"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:938,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:936,columnNumber:15},void 0),s.jsxDEV("div",{className:"text-center bg-white p-2 sm:p-3 rounded-lg shadow-sm border",children:[s.jsxDEV("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold "+(A.commercialScore>=0?"text-green-600":"text-red-600"),children:[A.commercialScore>0?"+":"",A.commercialScore]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:941,columnNumber:17},void 0),s.jsxDEV("div",{className:"text-xs text-gray-500",children:"Score IA"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:944,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:940,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:919,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:911,columnNumber:11},void 0),s.jsxDEV("div",{className:"w-full overflow-x-auto",children:s.jsxDEV(p,{gutter:[12,16],className:"min-w-full",style:{margin:0},children:D.map(e=>{const n=M[e.id]||[],a={id:e.id,name:e.name,color:e.color,description:`Statut: ${e.name}`};return s.jsxDEV(v,{xs:24,sm:12,md:L,lg:L,xl:L,className:"flex-1",style:{minWidth:"280px"},children:s.jsxDEV(Yi,{column:a,leads:n,onDropLead:S,onViewLead:r,onCallLead:t,onEmailLead:i,onScheduleLead:o},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:985,columnNumber:21},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:975,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:951,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:950,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:910,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:908,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanban.tsx",lineNumber:907,columnNumber:5},void 0)};function Wi({leadId:e,onEdit:r,onCall:t,onEmail:i,onSchedule:o}){var a,l,d,c,m,u,N,b,C,g,x,f,k,y;const[O,R]=n.useState(null),[j,U]=n.useState(!0),[I,P]=n.useState(null),{api:T}=ns();if(n.useEffect(()=>{e&&(async()=>{try{U(!0),P(null);const s=await T.get(`/api/leads/${e}`);R(s)}catch(s){P(s instanceof Error?s.message:"Erreur inconnue")}finally{U(!1)}})()},[e,T]),j)return s.jsxDEV("div",{className:"flex justify-center items-center h-64",children:s.jsxDEV(H,{size:"large"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:63,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:62,columnNumber:7},this);if(I)return s.jsxDEV("div",{className:"text-center text-red-500 p-8",children:[s.jsxDEV("p",{children:"‚ùå Erreur lors du chargement des d√©tails"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:71,columnNumber:9},this),s.jsxDEV("p",{className:"text-sm",children:I},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:72,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:70,columnNumber:7},this);if(!O)return s.jsxDEV("div",{className:"text-center text-gray-500 p-8",children:s.jsxDEV("p",{children:"‚ùì Lead non trouv√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:80,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:79,columnNumber:7},this);const z=e=>null==e?"":String(e),$=(e,s)=>[e,s].filter(Boolean).map(z).join(" ").trim(),F=(...e)=>{for(const s of e)if(Array.isArray(s)){if(s.length>0&&s[0]){const e=s[0];if("string"==typeof e)return e.trim();if("object"==typeof e)return JSON.stringify(e)}}else if("string"==typeof s){const e=s.trim();if(e)return e}else if(null!=s){const e=String(s).trim();if(e)return e}return""},K=F($(O.firstName,O.lastName),O.name,$(null==(a=O.data)?void 0:a.firstName,null==(l=O.data)?void 0:l.lastName),null==(d=O.data)?void 0:d.name)||"Nom non renseign√©",_=F(O.email,O.contactEmail,null==(c=O.contact)?void 0:c.email,O.emails,null==(m=O.contact)?void 0:m.emails,null==(u=O.data)?void 0:u.email),q=F(O.phone,O.mobile,O.telephone,null==(N=O.contact)?void 0:N.phone,null==(b=O.contact)?void 0:b.mobile,O.phones,null==(C=O.contact)?void 0:C.phones,null==(g=O.data)?void 0:g.phone),Y=F(O.company,O.companyName,null==(x=O.organization)?void 0:x.name,null==(f=O.contact)?void 0:f.company,null==(k=O.customer)?void 0:k.company,O.isCompany?O.name:"",null==(y=O.data)?void 0:y.company);return s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV(D,{children:s.jsxDEV(p,{gutter:16,align:"middle",children:[s.jsxDEV(v,{children:s.jsxDEV(E,{size:64,icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:152,columnNumber:21},this),style:{backgroundColor:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:150,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:149,columnNumber:11},this),s.jsxDEV(v,{flex:1,children:s.jsxDEV("div",{children:[s.jsxDEV("h2",{className:"text-xl font-semibold mb-1",children:K},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:158,columnNumber:15},this),s.jsxDEV("div",{className:"text-gray-600",children:[(Y||O.company)&&s.jsxDEV("p",{className:"mb-1",children:Y||O.company},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:160,columnNumber:54},this),s.jsxDEV(h,{children:[O.leadStatus&&s.jsxDEV(S,{color:O.leadStatus.color,children:O.leadStatus.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:163,columnNumber:21},this),O.source&&s.jsxDEV(S,{children:O.source},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:166,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:161,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:159,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:157,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:156,columnNumber:11},this),s.jsxDEV(v,{children:s.jsxDEV(h,{children:[r&&s.jsxDEV(w,{icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:176,columnNumber:25},this),onClick:()=>r(O),children:"Modifier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:175,columnNumber:17},this),s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:184,columnNumber:23},this),onClick:()=>null==t?void 0:t(O.id),disabled:!t,children:"Appeler avec Telnyx"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:182,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:173,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:148,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:147,columnNumber:7},this),s.jsxDEV(D,{title:"üìû Informations de contact",size:"small",children:s.jsxDEV(M,{column:2,bordered:!0,size:"small",children:[s.jsxDEV(M.Item,{label:"Email",span:1,children:_?s.jsxDEV(h,{children:[s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:201,columnNumber:17},this),s.jsxDEV("a",{href:`mailto:${_}`,children:_},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:202,columnNumber:17},this),s.jsxDEV(w,{size:"small",type:"link",onClick:()=>null==i?void 0:i(O.id),disabled:!i,children:"üìß Envoyer via Gmail"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:203,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:200,columnNumber:15},this):s.jsxDEV("span",{className:"text-gray-400",children:"Non renseign√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:213,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:198,columnNumber:11},this),s.jsxDEV(M.Item,{label:"T√©l√©phone",span:1,children:q?s.jsxDEV(h,{children:[s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:220,columnNumber:17},this),s.jsxDEV("a",{href:`tel:${q}`,children:q},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:221,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:219,columnNumber:15},this):s.jsxDEV("span",{className:"text-gray-400",children:"Non renseign√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:224,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:217,columnNumber:11},this),s.jsxDEV(M.Item,{label:"Site web",span:1,children:O.website?s.jsxDEV(h,{children:[s.jsxDEV(Oe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:231,columnNumber:17},this),s.jsxDEV("a",{href:O.website,target:"_blank",rel:"noopener noreferrer",children:O.website},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:232,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:230,columnNumber:15},this):s.jsxDEV("span",{className:"text-gray-400",children:"Non renseign√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:237,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:228,columnNumber:11},this),s.jsxDEV(M.Item,{label:"LinkedIn",span:1,children:O.linkedin?s.jsxDEV(h,{children:[s.jsxDEV(Re,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:244,columnNumber:17},this),s.jsxDEV("a",{href:O.linkedin,target:"_blank",rel:"noopener noreferrer",children:"Profil LinkedIn"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:245,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:243,columnNumber:15},this):s.jsxDEV("span",{className:"text-gray-400",children:"Non renseign√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:250,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:241,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:197,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:196,columnNumber:7},this),s.jsxDEV(D,{title:"üè¢ Informations business",size:"small",children:s.jsxDEV(M,{column:2,bordered:!0,size:"small",children:[s.jsxDEV(M.Item,{label:"Soci√©t√©",span:1,children:O.company||s.jsxDEV("span",{className:"text-gray-400",children:"Non renseign√©e"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:260,columnNumber:30},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:259,columnNumber:11},this),s.jsxDEV(M.Item,{label:"Source",span:1,children:O.source?s.jsxDEV(S,{color:"blue",children:O.source},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:265,columnNumber:15},this):s.jsxDEV("span",{className:"text-gray-400",children:"Non renseign√©e"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:267,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:263,columnNumber:11},this),s.jsxDEV(M.Item,{label:"Statut",span:1,children:O.leadStatus?s.jsxDEV(S,{color:O.leadStatus.color,children:O.leadStatus.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:273,columnNumber:15},this):s.jsxDEV("span",{className:"text-gray-400",children:"Non d√©fini"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:275,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:271,columnNumber:11},this),s.jsxDEV(M.Item,{label:"Commercial assign√©",span:1,children:O.assignedTo?s.jsxDEV(h,{children:[s.jsxDEV(E,{size:"small",icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:282,columnNumber:44},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:282,columnNumber:17},this),O.assignedTo.firstName," ",O.assignedTo.lastName]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:281,columnNumber:15},this):s.jsxDEV("span",{className:"text-gray-400",children:"Non assign√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:286,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:279,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:258,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:257,columnNumber:7},this),O.notes&&s.jsxDEV(D,{title:"üìù Notes",size:"small",children:s.jsxDEV("p",{className:"whitespace-pre-wrap",children:O.notes},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:295,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:294,columnNumber:9},this),s.jsxDEV(D,{title:"üìÖ Historique",size:"small",children:s.jsxDEV(be,{children:[s.jsxDEV(be.Item,{color:"green",children:s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Lead cr√©√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:304,columnNumber:15},this),s.jsxDEV("div",{className:"text-gray-500 text-sm",children:de(O.createdAt).format("DD/MM/YYYY HH:mm")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:305,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:303,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:302,columnNumber:11},this),O.updatedAt&&O.updatedAt!==O.createdAt&&s.jsxDEV(be.Item,{color:"blue",children:s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Derni√®re modification"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:314,columnNumber:17},this),s.jsxDEV("div",{className:"text-gray-500 text-sm",children:de(O.updatedAt).format("DD/MM/YYYY HH:mm")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:315,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:313,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:312,columnNumber:13},this),O.lastContactDate&&s.jsxDEV(be.Item,{color:"orange",children:s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Dernier contact"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:325,columnNumber:17},this),s.jsxDEV("div",{className:"text-gray-500 text-sm",children:de(O.lastContactDate).format("DD/MM/YYYY HH:mm")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:326,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:324,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:323,columnNumber:13},this),O.nextFollowUpDate&&s.jsxDEV(be.Item,{color:"red",children:s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Prochain suivi programm√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:336,columnNumber:17},this),s.jsxDEV("div",{className:"text-gray-500 text-sm",children:de(O.nextFollowUpDate).format("DD/MM/YYYY HH:mm")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:337,columnNumber:17},this),s.jsxDEV(w,{size:"small",type:"link",icon:s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:343,columnNumber:25},this),onClick:()=>null==o?void 0:o(O.id),disabled:!o,children:"üìÖ Reprogrammer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:340,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:335,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:334,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:301,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:300,columnNumber:7},this),s.jsxDEV(D,{title:"‚ö° Actions rapides",size:"small",children:s.jsxDEV(h,{wrap:!0,children:[s.jsxDEV(w,{icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:359,columnNumber:19},this),onClick:()=>null==t?void 0:t(O.id),type:"primary",disabled:!t,children:"üìû Appeler avec Telnyx"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:358,columnNumber:11},this),s.jsxDEV(w,{icon:s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:367,columnNumber:19},this),onClick:()=>null==i?void 0:i(O.id),disabled:!i,children:"‚úâÔ∏è Gmail Google"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:366,columnNumber:11},this),s.jsxDEV(w,{icon:s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:374,columnNumber:19},this),onClick:()=>null==o?void 0:o(O.id),disabled:!o,children:"üìÖ Agenda Google"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:373,columnNumber:11},this),r&&s.jsxDEV(w,{icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:381,columnNumber:27},this),onClick:()=>r(O),children:"Modifier les informations"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:381,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:357,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:356,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/LeadDetail.tsx",lineNumber:145,columnNumber:5},this)}const{TextArea:Gi}=K,Ji=({value:e="",onChange:r,placeholder:t="Tapez votre message..."})=>s.jsxDEV(Gi,{value:e,onChange:e=>{const s=e.target.value;r&&r(s)},placeholder:t,autoSize:{minRows:6,maxRows:12},style:{fontSize:"14px",lineHeight:"1.6"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SimpleHtmlEditor.tsx",lineNumber:31,columnNumber:5},void 0),Xi=({open:e,onClose:r,onSent:t,editingDraft:i,prefilledData:o})=>{const[a]=ie.useForm(),[l,d]=n.useState(!1),[c,m]=n.useState([]),[u,p]=n.useState(!1),[v,D]=n.useState(),[N,b]=n.useState(!1),{saveDraft:C,deleteDraft:g,sendEmail:x}=(()=>{const{api:e}=ns(),[s,r]=n.useState([]),[t,i]=n.useState(!1),[o,a]=n.useState(!1),l=n.useRef(null),d=n.useCallback(async()=>{var s;i(!0);try{const t=await e.get("/api/google-auth/gmail/drafts");let i=null;if((null==t?void 0:t.drafts)?i=t.drafts:(null==(s=null==t?void 0:t.data)?void 0:s.drafts)?i=t.data.drafts:Array.isArray(t)&&(i=t),i&&Array.isArray(i)){const e=i.map(e=>({...e,date:new Date(e.date)}));r(e)}else r([])}catch(t){ce.error("Erreur lors de la r√©cup√©ration des brouillons"),r([])}finally{i(!1)}},[e]),c=n.useCallback(async s=>{var r,t,i,n;try{if(a(!0),s.attachments&&s.attachments.length>0){const i=new FormData;if(!s.to||!s.subject)throw new Error("Destinataire et sujet requis");i.append("to",s.to),i.append("subject",s.subject),i.append("body",s.body),i.append("isHtml",String(s.isHtml||!1)),s.cc&&i.append("cc",s.cc),s.bcc&&i.append("bcc",s.bcc),s.draftId&&i.append("draftId",s.draftId),s.attachments.forEach(e=>{i.append("attachments",e)});const n=await e.post("/api/google-auth/gmail/drafts",i,{headers:{}});if((null==n?void 0:n.success)||(null==(r=null==n?void 0:n.data)?void 0:r.success)){const e=(null==(t=null==n?void 0:n.data)?void 0:t.data)||(null==n?void 0:n.data);return s.draftId||await d(),{draftId:(null==e?void 0:e.draftId)||(null==e?void 0:e.id),messageId:null==e?void 0:e.messageId}}return null}{const r=await e.post("/api/google-auth/gmail/drafts",s);if((null==r?void 0:r.success)||(null==(i=null==r?void 0:r.data)?void 0:i.success)){const e=(null==(n=null==r?void 0:r.data)?void 0:n.data)||(null==r?void 0:r.data);return s.draftId||await d(),{draftId:(null==e?void 0:e.draftId)||(null==e?void 0:e.id),messageId:null==e?void 0:e.messageId}}return null}}catch(o){return ce.error("Erreur lors de la sauvegarde du brouillon"),null}finally{a(!1)}},[e,d]),m=n.useCallback((e,s=3e3)=>{l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{await c(e)},s)},[c]),u=n.useCallback(async e=>(l.current&&(clearTimeout(l.current),l.current=null),await c(e)),[c]),p=n.useCallback(async s=>{var r;try{const t=await e.delete(`/api/google-auth/gmail/drafts/${s}`);return!(!(null==t?void 0:t.success)&&!(null==(r=null==t?void 0:t.data)?void 0:r.success)||(ce.success("Brouillon supprim√©"),await d(),0))}catch(t){return ce.error("Erreur lors de la suppression du brouillon"),!1}},[e,d]),v=n.useCallback(async s=>{var r,t,i;try{if(!(null==(r=s.to)?void 0:r.trim()))throw new Error("Le destinataire est requis");if(!(null==(t=s.subject)?void 0:t.trim()))throw new Error("Le sujet est requis");let n;if(s.attachments&&s.attachments.length>0){const r=new FormData;r.append("to",s.to),r.append("subject",s.subject),r.append("body",s.body||""),r.append("isHtml",String(s.isHtml||!1)),s.cc&&r.append("cc",s.cc),s.bcc&&r.append("bcc",s.bcc),s.attachments.forEach(e=>{r.append("attachments",e)}),n=await e.post("/api/google-auth/gmail/send",r)}else{const r={to:s.to,subject:s.subject,body:s.body||"",isHtml:s.isHtml||!1,cc:s.cc,bcc:s.bcc};n=await e.post("/api/google-auth/gmail/send",r)}return!(!(null==n?void 0:n.success)&&!(null==(i=null==n?void 0:n.data)?void 0:i.success)||(ce.success("Email envoy√© avec succ√®s"),await d(),0))}catch(n){return ce.error("Erreur lors de l'envoi de l'email"),!1}},[e,d]),D=n.useCallback(async s=>{var r;try{const t=await e.post(`/api/google-auth/gmail/drafts/${s}/send`);return!(!(null==t?void 0:t.success)&&!(null==(r=null==t?void 0:t.data)?void 0:r.success)||(ce.success("Email envoy√© avec succ√®s"),await d(),0))}catch(t){return ce.error("Erreur lors de l'envoi de l'email"),!1}},[e,d]);return n.useEffect(()=>()=>{l.current&&clearTimeout(l.current)},[]),{drafts:s,loading:t,autoSaving:o,fetchDrafts:d,saveDraft:c,autoSaveDraft:m,saveDraftImmediately:u,deleteDraft:p,sendDraft:D,sendEmail:v}})(),f=n.useCallback(async()=>{if(u&&e)try{b(!0);const e=a.getFieldsValue();let s=e.body||"",r=!1;if(null==o?void 0:o.body){const e=/<[^>]+>/.test(o.body),t=/<[^>]+>/.test(s);let i=o.body;if(e&&(i=o.body.replace(/<div[^>]*>/gi,"\n").replace(/<\/div>/gi,"").replace(/<br\s*\/?>/gi,"\n").replace(/<span[^>]*>/gi,"").replace(/<\/span>/gi,"").replace(/<font[^>]*>/gi,"").replace(/<\/font>/gi,"").replace(/&nbsp;/gi," ").replace(/<[^>]*>/g,"").replace(/\n\s*\n/g,"\n").trim()),e||t)if(t){r=!0;s=s+"<br><br>--- Message original ---<br>"+i.replace(/\n/g,"<br>")}else r=!1,s=s+"\n\n--- Message original ---\n"+i;else r=!1,s=s+"\n\n--- Message original ---\n"+i}else r=/<[^>]+>/.test(s);const t={to:e.to||"",cc:e.cc||"",bcc:e.bcc||"",subject:e.subject||"",body:s,attachments:c,draftId:v,isHtml:r},i=await C(t);i&&(v||D(i.draftId),p(!1))}catch(s){}finally{b(!1)}},[u,e,a,c,v,C,o]),E=async()=>{u&&await f(),a.resetFields(),m([]),p(!1),D(void 0),r()},V=()=>{p(!0)};return n.useEffect(()=>{const e=setInterval(f,1e4);return()=>clearInterval(e)},[f]),n.useEffect(()=>{i&&e?(a.setFieldsValue({to:i.to,subject:i.subject,body:i.body,cc:i.cc||"",bcc:i.bcc||""}),D(i.id),p(!1)):o&&e?(a.setFieldsValue({to:o.to||"",subject:o.subject||"",body:"",cc:o.cc||"",bcc:o.bcc||""}),D(void 0),p(!1)):i||o||!e||(a.resetFields(),D(void 0),p(!1))},[i,o,e,a]),s.jsxDEV(ve,{title:s.jsxDEV(h,{children:[s.jsxDEV("span",{children:i?"Modifier le brouillon":"Nouveau message"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:290,columnNumber:11},void 0),N&&s.jsxDEV(_,{title:"Auto-sauvegarde en cours...",children:s.jsxDEV(B,{style:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:295,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:294,columnNumber:13},void 0),u&&!N&&s.jsxDEV(_,{title:"Modifications non sauvegard√©es",children:s.jsxDEV(ae,{style:{color:"#faad14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:300,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:299,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:289,columnNumber:9},void 0),open:e,onCancel:E,width:900,style:{top:20},styles:{body:{maxHeight:"80vh",overflowY:"auto",padding:"24px"}},footer:s.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",borderTop:"1px solid #f0f0f0"},children:[s.jsxDEV("div",{style:{color:"#666",fontSize:"13px"},children:"üíæ Auto-sauvegarde activ√©e"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:326,columnNumber:11},void 0),s.jsxDEV(h,{children:[s.jsxDEV(w,{icon:s.jsxDEV(we,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:331,columnNumber:21},void 0),onClick:E,children:"Fermer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:330,columnNumber:13},void 0),s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:338,columnNumber:21},void 0),loading:l,onClick:async()=>{try{d(!0);const e=await a.validateFields();let s=e.body||"",i=!1;if(null==o?void 0:o.body){const e=/<[^>]+>/.test(o.body),r=/<[^>]+>/.test(s);let t=o.body;if(e&&(t=o.body.replace(/<div[^>]*>/gi,"\n").replace(/<\/div>/gi,"").replace(/<br\s*\/?>/gi,"\n").replace(/<span[^>]*>/gi,"").replace(/<\/span>/gi,"").replace(/<font[^>]*>/gi,"").replace(/<\/font>/gi,"").replace(/&nbsp;/gi," ").replace(/<[^>]*>/g,"").replace(/\n\s*\n/g,"\n").trim()),e||r)if(r){i=!0;s=s+"<br><br>--- Message original ---<br>"+t.replace(/\n/g,"<br>")}else i=!1,s=s+"\n\n--- Message original ---\n"+t;else i=!1,s=s+"\n\n--- Message original ---\n"+t}else i=/<[^>]+>/.test(s);const n={to:e.to||"",cc:e.cc||"",bcc:e.bcc||"",subject:e.subject||"",body:s,attachments:c,isHtml:i};await x(n)&&(v&&await g(v),null==t||t(),r())}catch(e){ce.error("‚ùå Erreur lors de l'envoi")}finally{d(!1)}},children:l?"Envoi...":"Envoyer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:336,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:329,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:319,columnNumber:9},void 0),destroyOnHidden:!1,children:s.jsxDEV(ie,{form:a,layout:"vertical",onValuesChange:V,size:"large",children:[s.jsxDEV("div",{style:{display:"grid",gap:"16px",marginBottom:"24px"},children:[s.jsxDEV(ie.Item,{label:"Destinataire",name:"to",rules:[{required:!0,message:"Destinataire requis"}],children:s.jsxDEV(K,{placeholder:"destinataire@exemple.com"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:366,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:361,columnNumber:13},void 0),s.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[s.jsxDEV(ie.Item,{label:"Copie (Cc)",name:"cc",children:s.jsxDEV(K,{placeholder:"copie@exemple.com (optionnel)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:374,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:370,columnNumber:15},void 0),s.jsxDEV(ie.Item,{label:"Copie cach√©e (Cci)",name:"bcc",children:s.jsxDEV(K,{placeholder:"copie.cachee@exemple.com (optionnel)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:381,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:377,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:369,columnNumber:13},void 0),s.jsxDEV(ie.Item,{label:"Sujet",name:"subject",rules:[{required:!0,message:"Sujet requis"}],children:s.jsxDEV(K,{placeholder:"Sujet de votre message"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:390,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:385,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:356,columnNumber:11},void 0),s.jsxDEV(ie.Item,{label:"Message",name:"body",style:{marginBottom:"24px"},children:s.jsxDEV(Ji,{placeholder:"Tapez votre message ici..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:400,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:395,columnNumber:11},void 0),(null==o?void 0:o.body)&&s.jsxDEV("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#fafafa",border:"1px solid #e8e8e8",borderRadius:"6px"},children:[s.jsxDEV("div",{style:{marginBottom:"12px",fontSize:"14px",fontWeight:"500",color:"#666",borderBottom:"1px solid #e8e8e8",paddingBottom:"8px"},children:"Message original :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:414,columnNumber:15},void 0),s.jsxDEV("div",{style:{fontSize:"14px",lineHeight:"1.6",maxHeight:"300px",overflowY:"auto"},dangerouslySetInnerHTML:{__html:o.body.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<link[^>]*rel=["']?stylesheet["']?[^>]*>/gi,"")}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:424,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:407,columnNumber:13},void 0),s.jsxDEV(je,{ghost:!0,items:[{key:"attachments",label:"Pi√®ces jointes "+(c.length>0?`(${c.length})`:""),children:s.jsxDEV(ie.Item,{children:s.jsxDEV(fe,{multiple:!0,beforeUpload:()=>!1,fileList:c.map((e,s)=>({uid:`${s}`,name:e.name,status:"done",originFileObj:e})),onChange:({fileList:e})=>{const s=e.map(e=>e.originFileObj).filter(e=>e instanceof File);m(s),V()},children:s.jsxDEV(w,{icon:s.jsxDEV(Ue,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:468,columnNumber:37},void 0),children:"Joindre des fichiers"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:468,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:451,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:450,columnNumber:19},void 0)}]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:443,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:349,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/EmailComposer.tsx",lineNumber:287,columnNumber:5},void 0)},{Title:Qi,Text:Zi}=N,en=({leadId:e})=>{var r,t;const{api:i}=ns(),[o,a]=n.useState(null),[l,d]=n.useState(!1),[c,m]=n.useState(0),[u,p]=n.useState(!1);n.useEffect(()=>{e&&v()},[e]),n.useEffect(()=>{let e;return u&&(e=setInterval(()=>{m(e=>e+1)},1e3)),()=>clearInterval(e)},[u]);const v=async()=>{try{const s=await i.get(`/api/leads/${e}`);a(s.data)}catch(s){}};return o?s.jsxDEV(D,{title:"Interface d'appel",children:s.jsxDEV("div",{className:"text-center space-y-6",children:[s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV(E,{size:64,children:[null==(r=o.firstName)?void 0:r[0],null==(t=o.lastName)?void 0:t[0]]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:85,columnNumber:11},void 0),s.jsxDEV(Qi,{level:3,children:[o.firstName," ",o.lastName]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:86,columnNumber:11},void 0),o.company&&s.jsxDEV(Zi,{type:"secondary",children:o.company},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:87,columnNumber:28},void 0),s.jsxDEV("div",{className:"text-lg font-mono",children:o.phone},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:88,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:84,columnNumber:9},void 0),u&&s.jsxDEV("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxDEV("div",{className:"text-green-600 font-medium",children:"Appel en cours"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:94,columnNumber:13},void 0),s.jsxDEV("div",{className:"text-2xl font-mono text-green-700",children:(e=>{const s=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`})(c)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:95,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:93,columnNumber:11},void 0),s.jsxDEV("div",{className:"space-y-3",children:u?s.jsxDEV(w,{danger:!0,size:"large",icon:s.jsxDEV(W,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:119,columnNumber:21},void 0),onClick:async()=>{try{await i.post("/api/telnyx/hangup",{leadId:e}),p(!1)}catch(s){}},className:"w-full h-12",children:"Raccrocher"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:116,columnNumber:13},void 0):s.jsxDEV(w,{type:"primary",size:"large",icon:s.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:107,columnNumber:21},void 0),loading:l,onClick:async()=>{d(!0);try{await i.post("/api/telnyx/call",{to:o.phone,leadId:e}),p(!0),m(0)}catch(s){}finally{d(!1)}},className:"w-full h-12",disabled:!o.phone,children:l?"Connexion...":"Appeler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:104,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:102,columnNumber:9},void 0),s.jsxDEV("div",{className:"bg-gray-50 p-4 rounded-lg text-left",children:s.jsxDEV("div",{className:"text-sm space-y-1",children:[s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Source:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:131,columnNumber:18},void 0)," ",o.source]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:131,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Statut:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:132,columnNumber:18},void 0)," ",o.status]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:132,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Derni√®re action:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:133,columnNumber:18},void 0)," ",o.lastAction||"Aucune"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:133,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:130,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:82,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:81,columnNumber:5},void 0):s.jsxDEV(D,{children:s.jsxDEV(H,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:77,columnNumber:18},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/modules/call/components/CallInterface.tsx",lineNumber:77,columnNumber:12},void 0)},sn=({leadEmail:e,leadName:r,leadId:t,onEventCreated:i})=>{const[o,a]=n.useState([]),[l,d]=n.useState(!1),[c,m]=n.useState(!1),[u,p]=n.useState(!1),[v]=ie.useForm(),N=ns(),b=n.useCallback(async()=>{try{d(!0);const s=await N.api.get(`/calendar/events?attendee=${encodeURIComponent(e)}`);a(s.events||[])}catch(s){a([{id:"1",title:"Rendez-vous commercial",start:de().add(2,"days").hour(14).minute(0).toISOString(),end:de().add(2,"days").hour(15).minute(0).toISOString(),description:"Pr√©sentation de nos services",attendees:[e,"moi@monentreprise.be"],meetLink:"https://meet.google.com/abc-defg-hij",status:"confirmed"},{id:"2",title:"Suivi de proposition",start:de().add(7,"days").hour(10).minute(0).toISOString(),end:de().add(7,"days").hour(11).minute(0).toISOString(),description:"Discussion sur la proposition envoy√©e",attendees:[e,"moi@monentreprise.be"],status:"tentative"}])}finally{d(!1)}},[e,N.api]);n.useEffect(()=>{b()},[b]);const C=(e,s)=>{const r=de(e),t=de(s);return r.isSame(t,"day")?`${r.format("DD/MM/YYYY")} de ${r.format("HH:mm")} √† ${t.format("HH:mm")}`:`${r.format("DD/MM/YYYY HH:mm")} ‚Üí ${t.format("DD/MM/YYYY HH:mm")}`},g=e=>{switch(e){case"confirmed":return s.jsxDEV(U,{status:"success",text:"Confirm√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:178,columnNumber:16},void 0);case"tentative":return s.jsxDEV(U,{status:"warning",text:"En attente"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:180,columnNumber:16},void 0);case"cancelled":return s.jsxDEV(U,{status:"error",text:"Annul√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:182,columnNumber:16},void 0);default:return s.jsxDEV(U,{status:"default",text:"Inconnu"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:184,columnNumber:16},void 0)}};return s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(he,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:192,columnNumber:11},void 0),"Agenda - ",r]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:191,columnNumber:9},void 0),extra:s.jsxDEV(h,{children:[s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Pe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:200,columnNumber:19},void 0),onClick:b,loading:l},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:198,columnNumber:11},void 0),s.jsxDEV(w,{type:"primary",size:"small",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:207,columnNumber:19},void 0),onClick:()=>p(!0),children:"Planifier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:204,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:197,columnNumber:9},void 0),className:"mb-4",children:[s.jsxDEV("div",{className:"mb-3",children:s.jsxDEV(U,{status:"processing",text:e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:217,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:216,columnNumber:7},void 0),s.jsxDEV(se,{loading:l,dataSource:o,locale:{emptyText:"Aucun √©v√©nement planifi√©"},renderItem:e=>s.jsxDEV(se.Item,{children:s.jsxDEV(se.Item.Meta,{avatar:s.jsxDEV(he,{className:"text-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:227,columnNumber:23},void 0),title:s.jsxDEV(h,{children:[s.jsxDEV("span",{className:"font-medium",children:e.title},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:230,columnNumber:19},void 0),g(e.status),e.meetLink&&s.jsxDEV("a",{href:e.meetLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-xs",children:"Meet"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:233,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:229,columnNumber:17},void 0),description:s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"flex items-center mb-1",children:[s.jsxDEV(le,{className:"mr-2 text-gray-400"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:247,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-sm",children:C(e.start,e.end)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:248,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:246,columnNumber:19},void 0),e.description&&s.jsxDEV("div",{className:"text-gray-600 text-sm mb-1",children:e.description},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:251,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex items-center",children:[s.jsxDEV(V,{className:"mr-2 text-gray-400"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:254,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-xs text-gray-500",children:[e.attendees.length," participant",e.attendees.length>1?"s":""]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:255,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:253,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:245,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:226,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:225,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:220,columnNumber:7},void 0),s.jsxDEV(ve,{title:`Nouvel √©v√©nement avec ${r}`,open:u,onCancel:()=>{p(!1),v.resetFields()},footer:null,width:600,children:s.jsxDEV(ie,{form:v,layout:"vertical",onFinish:async s=>{try{m(!0);const n=s.date.hour(s.startTime.hour()).minute(s.startTime.minute()),o=s.date.hour(s.endTime.hour()).minute(s.endTime.minute()),a=await N.api.post("/api/calendar/events",{title:s.title,start:n.toISOString(),end:o.toISOString(),description:s.description,attendees:[e],createMeetLink:s.createMeetLink,context:{leadId:t,source:"crm_lead"}});ce.success(`√âv√©nement cr√©√© et invitation envoy√©e √† ${r}`),p(!1),v.resetFields(),await b(),i&&i({type:"calendar_event",leadId:t,eventId:a.eventId,title:s.title,start:n.toDate(),timestamp:new Date})}catch(n){ce.error("Erreur lors de la cr√©ation de l'√©v√©nement")}finally{m(!1)}},initialValues:{date:de().add(1,"day"),startTime:de().hour(14).minute(0),endTime:de().hour(15).minute(0),createMeetLink:!0},children:[s.jsxDEV(ie.Item,{name:"title",label:"Titre de l'√©v√©nement",rules:[{required:!0,message:"Veuillez saisir un titre"}],children:s.jsxDEV(K,{placeholder:"ex: Rendez-vous commercial"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:293,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:288,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"date",label:"Date",rules:[{required:!0,message:"Veuillez s√©lectionner une date"}],children:s.jsxDEV(Se,{className:"w-full",format:"DD/MM/YYYY",disabledDate:e=>e&&e<de().startOf("day")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:301,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:296,columnNumber:11},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxDEV(ie.Item,{name:"startTime",label:"Heure de d√©but",rules:[{required:!0,message:"Heure de d√©but requise"}],children:s.jsxDEV(Ie,{className:"w-full",format:"HH:mm",minuteStep:15},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:314,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:309,columnNumber:13},void 0),s.jsxDEV(ie.Item,{name:"endTime",label:"Heure de fin",rules:[{required:!0,message:"Heure de fin requise"}],children:s.jsxDEV(Ie,{className:"w-full",format:"HH:mm",minuteStep:15},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:326,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:321,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:308,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"description",label:"Description (optionnelle)",children:s.jsxDEV(K.TextArea,{rows:3,placeholder:"Description de l'√©v√©nement..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:338,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:334,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"createMeetLink",label:"Options",children:s.jsxDEV(ne,{defaultValue:!0,children:[s.jsxDEV(ne.Option,{value:!0,children:"Cr√©er un lien Google Meet"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:349,columnNumber:15},void 0),s.jsxDEV(ne.Option,{value:!1,children:"Rendez-vous physique uniquement"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:350,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:348,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:344,columnNumber:11},void 0),s.jsxDEV(ie.Item,{className:"mb-0 text-right",children:s.jsxDEV(h,{children:[s.jsxDEV(w,{onClick:()=>p(!1),children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:356,columnNumber:15},void 0),s.jsxDEV(w,{type:"primary",htmlType:"submit",loading:c,icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:363,columnNumber:23},void 0),children:"Cr√©er l'√©v√©nement"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:359,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:355,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:354,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:277,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:267,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/leads/CalendarWidget.tsx",lineNumber:189,columnNumber:5},void 0)},rn=()=>{const[e,r]=n.useState(null),[t,i]=n.useState(!1),[o,a]=n.useState(!1),[l,d]=n.useState(!1),[c,m]=n.useState(!1),[u,p]=n.useState(0),v=e=>{r(e),a(!0)},D=e=>{r(e),d(!0)},h=e=>{r(e),m(!0)};return s.jsxDEV(s.Fragment,{children:[s.jsxDEV(Bi,{onViewLead:e=>{r(e),i(!0)},onCallLead:v,onEmailLead:D,onScheduleLead:h,refreshTrigger:u},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:47,columnNumber:7},void 0),s.jsxDEV(Te,{title:"üìã Fiche Lead D√©taill√©e",placement:"right",width:700,open:t,onClose:()=>i(!1),destroyOnHidden:!0,children:e&&s.jsxDEV(Wi,{leadId:e,onClose:()=>i(!1),onCall:()=>{i(!1),v(e)},onEmail:()=>{i(!1),D(e)},onSchedule:()=>{i(!1),h(e)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:65,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:56,columnNumber:7},void 0),s.jsxDEV(ve,{title:"üìû Module d'Appel Telnyx",open:o,onCancel:()=>a(!1),width:1e3,footer:null,destroyOnHidden:!0,centered:!0,children:e&&s.jsxDEV(en,{leadId:e},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:95,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:85,columnNumber:7},void 0),e&&s.jsxDEV(Xi,{open:l,onClose:()=>d(!1),onSent:()=>{d(!1),p(e=>e+1)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:103,columnNumber:9},void 0),s.jsxDEV(ve,{title:"üìÖ Google Calendar - Planifier RDV",open:c,onCancel:()=>m(!1),width:1100,footer:null,destroyOnHidden:!0,centered:!0,children:e&&s.jsxDEV(sn,{leadId:e,leadEmail:"",leadName:"",onEventCreated:e=>{m(!1),p(e=>e+1)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:126,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:116,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsKanbanWrapper.tsx",lineNumber:45,columnNumber:5},void 0)},tn=[{value:"direct",label:"Direct"},{value:"website",label:"Site Web"},{value:"referral",label:"Recommandation"},{value:"bobex",label:"Bobex"},{value:"solvari",label:"Solvari"},{value:"phone",label:"T√©l√©phone"},{value:"email",label:"Email"},{value:"manual",label:"Manuel"},{value:"other",label:"Autre"}],nn=[{value:"low",label:"Basse",color:"bg-blue-200"},{value:"medium",label:"Moyenne",color:"bg-yellow-200"},{value:"high",label:"Haute",color:"bg-orange-200"},{value:"urgent",label:"Urgente",color:"bg-red-200"}];function on({context:r="general"}){const{api:t}=ns(),{user:i}=e(),[o,a]=n.useState([]),[l,d]=n.useState(!1),c=n.useCallback(async()=>{if(i){d(!0);try{const e=[];if("leads"===r||"dashboard"===r){const s=await t.get("/api/leads"),r=Array.isArray(s)?s:(null==s?void 0:s.data)||[];e.push({id:"system-operational",type:"success",title:"Syst√®me op√©rationnel",message:"Toutes les int√©grations Prisma fonctionnent correctement.",dismissible:!0,priority:3,aiGenerated:!0});const i=r.filter(e=>{var s,r;const t=null==(r=null==(s=e.LeadStatus)?void 0:s.name)?void 0:r.toLowerCase();return(null==t?void 0:t.includes("nouveau"))||(null==t?void 0:t.includes("new"))});i.length>0?e.push({id:"new-leads-available",type:"info",title:"Nouveaux leads disponibles",message:`${i.length} nouveaux leads n√©cessitent votre attention.`,action:{label:"Voir les leads",onClick:()=>{window.location.href="/leads"}},dismissible:!1,priority:1,aiGenerated:!0}):e.push({id:"no-new-leads",type:"info",title:"Tableau de bord √† jour",message:"0 nouveaux leads. Syst√®me en veille intelligente.",dismissible:!0,priority:4,aiGenerated:!0});const n=r.filter(e=>{var s;const r=e.priority||(null==(s=e.data)?void 0:s.priority);return"high"===r||"urgent"===r});n.length>0&&e.push({id:"urgent-leads",type:"warning",title:"Leads prioritaires d√©tect√©s",message:`${n.length} leads haute priorit√© n√©cessitent une action imm√©diate.`,action:{label:"Action requise",onClick:()=>{window.location.href="/leads?priority=high"}},dismissible:!1,priority:2,aiGenerated:!0});const o=r.length,a=r.filter(e=>{var s,r;const t=null==(r=null==(s=e.LeadStatus)?void 0:s.name)?void 0:r.toLowerCase();return(null==t?void 0:t.includes("gagn√©"))||(null==t?void 0:t.includes("converti"))}),l=o>0?a.length/o*100:0;l>70?e.push({id:"high-performance",type:"success",title:"Performance exceptionnelle",message:`Taux de conversion de ${l.toFixed(1)}% - Excellents r√©sultats !`,dismissible:!0,priority:5,aiGenerated:!0}):l<20&&o>5&&e.push({id:"low-performance",type:"warning",title:"Optimisation recommand√©e",message:`Taux de conversion de ${l.toFixed(1)}%. L'IA sugg√®re une r√©vision de strat√©gie.`,action:{label:"Analyser",onClick:()=>{window.location.href="/leads/analytics"}},dismissible:!0,priority:3,aiGenerated:!0})}e.sort((e,s)=>e.priority-s.priority),a(e)}catch(e){a([{id:"analysis-error",type:"error",title:"Erreur d'analyse",message:"Impossible d'analyser les donn√©es. V√©rifiez votre connexion.",dismissible:!0,priority:1,aiGenerated:!1}])}finally{d(!1)}}},[t,i,r]);return n.useEffect(()=>{c();const e=setInterval(c,3e4);return()=>clearInterval(e)},[c]),0!==o.length||l?s.jsxDEV("div",{className:"mb-4",children:[s.jsxDEV(h,{direction:"vertical",className:"w-full",children:o.map(e=>s.jsxDEV(ee,{type:e.type,message:s.jsxDEV(p,{justify:"space-between",align:"middle",children:[s.jsxDEV(v,{children:s.jsxDEV(h,{children:[e.aiGenerated&&s.jsxDEV(U.Ribbon,{text:"IA",color:"blue",children:s.jsxDEV("div",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:208,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:207,columnNumber:23},this),s.jsxDEV("span",{className:"font-medium",children:e.title},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:211,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:205,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:204,columnNumber:17},this),s.jsxDEV(v,{children:e.aiGenerated&&s.jsxDEV(P,{className:"text-blue-500 ml-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:216,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:214,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:203,columnNumber:15},this),description:e.message,action:s.jsxDEV(h,{children:[e.action&&s.jsxDEV(w,{size:"small",type:"primary",onClick:e.action.onClick,children:e.action.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:225,columnNumber:19},this),e.dismissible&&s.jsxDEV(w,{size:"small",type:"text",icon:s.jsxDEV(we,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:237,columnNumber:27},this),onClick:()=>{return s=e.id,void a(e=>e.filter(e=>e.id!==s));var s}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:234,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:223,columnNumber:15},this),showIcon:!0,icon:e.aiGenerated?s.jsxDEV(F,{className:"text-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:246,columnNumber:17},this):void 0,className:"shadow-sm"},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:199,columnNumber:11},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:197,columnNumber:7},this),o.length>0&&s.jsxDEV(ze,{className:"!my-4"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:257,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SmartNotifications/SmartNotifications.tsx",lineNumber:196,columnNumber:5},this):null}const{Title:an,Text:ln,Paragraph:dn}=N,{RangePicker:cn}=Se;function mn(){const r=ns(),t=n.useMemo(()=>r.api,[r.api]),{leadStatuses:i}=xs(),{currentOrganization:o,isSuperAdmin:a,user:l}=e(),[d,c]=n.useState("pie"),[m,u]=n.useState("month"),[N,b]=n.useState(!1),[C,g]=n.useState(!1),[x,f]=n.useState({totalLeads:0,newLeads:0,leadsByStatus:[],leadsBySource:[],leadsByPriority:[],recentActivity:[],conversionRate:0,averageResponseTime:0,leadsEvolution:[],loading:!0}),M=n.useCallback(async()=>{try{const e=await t.get("/api/leads"),s=Array.isArray(e)?e:(null==e?void 0:e.data)||[],r=s.length,n=s.filter(e=>{var s,r;const t=null==(r=null==(s=e.LeadStatus)?void 0:s.name)?void 0:r.toLowerCase();return(null==t?void 0:t.includes("nouveau"))||(null==t?void 0:t.includes("new"))}).length,o={};i.forEach(e=>{o[e.id]=0}),s.forEach(e=>{const s=e.statusId;void 0!==o[s]&&o[s]++});const a=i.map(e=>({name:e.name,value:o[e.id]||0,color:e.color})),l={};tn.forEach(e=>{l[e.value]=0});const d={};nn.forEach(e=>{d[e.value]=0}),s.forEach(e=>{var s,r;const t=e.source||(null==(s=e.data)?void 0:s.source)||"direct";void 0!==l[t]?l[t]++:l.other=(l.other||0)+1;const i=e.priority||(null==(r=e.data)?void 0:r.priority)||"medium";void 0!==d[i]?d[i]++:d.medium++});const c=tn.map(e=>({name:e.label,value:l[e.value]||0})),m=nn.map(e=>({name:e.label,value:d[e.value]||0,color:e.color})),u=s.filter(e=>{var s,r;const t=null==(r=null==(s=e.LeadStatus)?void 0:s.name)?void 0:r.toLowerCase();return(null==t?void 0:t.includes("gagn√©"))||(null==t?void 0:t.includes("converti"))||(null==t?void 0:t.includes("client"))}),p=r>0?u.length/r*100:0,v=[];s.forEach(e=>{v.push({id:`creation-${e.id}`,type:"creation",description:`Nouveau lead : ${e.firstName||""} ${e.lastName||""} ${e.company?`(${e.company})`:""}`.trim(),date:e.createdAt,user:e.assignedTo?`${e.assignedTo.firstName||""} ${e.assignedTo.lastName||""}`.trim():"Syst√®me"}),e.TimelineEvent&&Array.isArray(e.TimelineEvent)&&e.TimelineEvent.forEach(e=>{var s;v.push({id:e.id,type:e.eventType,description:(null==(s=e.data)?void 0:s.description)||`√âv√©nement ${e.eventType}`,date:e.createdAt,user:"Utilisateur"})})}),v.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime());let D=0,h=0;s.forEach(e=>{if(e.lastContactDate&&e.createdAt){const s=new Date(e.lastContactDate).getTime()-new Date(e.createdAt).getTime();D+=s/36e5,h++}});const N=h>0?D/h:0,b={},C=["Jan","F√©v","Mar","Avr","Mai","Jun","Jul","Ao√ª","Sep","Oct","Nov","D√©c"];s.forEach(e=>{const s=new Date(e.createdAt),r=`${C[s.getMonth()]} ${s.getFullYear()}`;b[r]=(b[r]||0)+1});const g=Object.entries(b).sort(([e],[s])=>e.localeCompare(s)).slice(-6).map(([e,s])=>({name:e,value:s}));f({totalLeads:r,newLeads:n,conversionRate:p,averageResponseTime:N,leadsByStatus:a,leadsBySource:c,leadsByPriority:m,recentActivity:v.slice(0,10),leadsEvolution:g,loading:!1})}catch(e){const s=Vs(e,"Impossible de charger les donn√©es du dashboard. Veuillez r√©essayer.");f(e=>({...e,totalLeads:0,newLeads:0,conversionRate:0,averageResponseTime:0,leadsByStatus:[],leadsBySource:[],leadsByPriority:[],recentActivity:[],leadsEvolution:[],loading:!1})),is.error(s)}},[t,i]),A=n.useCallback(async()=>{g(!0),await M(),g(!1),is.success("Donn√©es actualis√©es !")},[M]),L=n.useCallback(e=>{var s;("week"===(s=e)||"month"===s||"quarter"===s)&&u(e)},[]),k=n.useCallback(e=>{var s;("pie"===(s=e)||"bar"===s)&&c(e)},[]);n.useEffect(()=>{l?(o||a)&&M():is.warning("Authentification requise pour acc√©der aux donn√©es")},[l,o,a,M]);const{loading:y}=x;return y?s.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxDEV(H,{size:"large",tip:"Chargement des donn√©es du dashboard...",children:s.jsxDEV("div",{className:"p-20"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:350,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:349,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:348,columnNumber:7},this):s.jsxDEV("div",{className:"p-6 bg-gray-50 min-h-screen",children:s.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[s.jsxDEV(D,{className:"mb-6 shadow-sm",children:[s.jsxDEV(p,{justify:"space-between",align:"middle",children:[s.jsxDEV(v,{children:[s.jsxDEV(an,{level:2,className:"!mb-2",children:[s.jsxDEV(He,{className:"text-blue-500 mr-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:364,columnNumber:17},this),"Dashboard des Leads"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:363,columnNumber:15},this),s.jsxDEV(dn,{className:"!mb-0 text-gray-600",children:"Vue d'ensemble des performances commerciales avec donn√©es en temps r√©el depuis Prisma"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:367,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:362,columnNumber:13},this),s.jsxDEV(v,{children:s.jsxDEV(h,{size:"middle",children:[s.jsxDEV(_,{title:"Actualiser les donn√©es",children:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Pe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:376,columnNumber:27},this),loading:C,onClick:A,children:"Actualiser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:374,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:373,columnNumber:17},this),s.jsxDEV(_,{title:"Afficher les d√©tails",children:s.jsxDEV(w,{icon:s.jsxDEV(Q,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:386,columnNumber:27},this),onClick:()=>b(!N),type:N?"primary":"default",children:"D√©tails"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:385,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:384,columnNumber:17},this),s.jsxDEV(_,{title:"Filtres",children:s.jsxDEV(w,{icon:s.jsxDEV($e,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:395,columnNumber:33},this),children:"Filtres"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:395,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:394,columnNumber:17},this),s.jsxDEV(_,{title:"Exporter",children:s.jsxDEV(w,{icon:s.jsxDEV(Fe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:401,columnNumber:33},this),children:"Export"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:401,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:400,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:372,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:371,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:361,columnNumber:11},this),s.jsxDEV(ze,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:410,columnNumber:11},this),s.jsxDEV(p,{gutter:16,children:[s.jsxDEV(v,{children:[s.jsxDEV(ln,{strong:!0,className:"mr-2",children:"P√©riode :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:413,columnNumber:15},this),s.jsxDEV(me,{options:[{label:"Semaine",value:"week"},{label:"Mois",value:"month"},{label:"Trimestre",value:"quarter"}],value:m,onChange:L},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:414,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:412,columnNumber:13},this),s.jsxDEV(v,{children:[s.jsxDEV(ln,{strong:!0,className:"mr-2",children:"Vue :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:425,columnNumber:15},this),s.jsxDEV(me,{options:[{label:s.jsxDEV(Ke,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:428,columnNumber:28},this),value:"pie"},{label:s.jsxDEV(He,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:429,columnNumber:28},this),value:"bar"}],value:d,onChange:k},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:426,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:424,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:411,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:360,columnNumber:9},this),s.jsxDEV(on,{context:"leads"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:439,columnNumber:9},this),s.jsxDEV(p,{gutter:[16,16],className:"mb-6",children:[s.jsxDEV(v,{xs:24,sm:12,lg:6,children:s.jsxDEV(D,{hoverable:!0,className:"text-center",children:[s.jsxDEV(_e,{title:"Total des leads",value:x.totalLeads,prefix:s.jsxDEV(V,{className:"text-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:449,columnNumber:25},this),suffix:"leads",valueStyle:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:446,columnNumber:15},this),s.jsxDEV(G,{percent:Math.min(x.totalLeads/100*100,100),showInfo:!1,strokeColor:"#1890ff",className:"mt-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:453,columnNumber:15},this),s.jsxDEV(ln,{type:"secondary",className:"text-xs",children:"Depuis la base Prisma"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:459,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:445,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:444,columnNumber:11},this),s.jsxDEV(v,{xs:24,sm:12,lg:6,children:s.jsxDEV(D,{hoverable:!0,className:"text-center",children:[s.jsxDEV(_e,{title:"Nouveaux leads",value:x.newLeads,prefix:s.jsxDEV(Ae,{className:"text-green-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:471,columnNumber:25},this),suffix:"nouveaux",valueStyle:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:468,columnNumber:15},this),s.jsxDEV(G,{percent:x.totalLeads>0?x.newLeads/x.totalLeads*100:0,showInfo:!1,strokeColor:"#52c41a",className:"mt-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:475,columnNumber:15},this),s.jsxDEV(ln,{type:"secondary",className:"text-xs",children:"Bas√© sur les statuts Prisma"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:481,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:467,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:466,columnNumber:11},this),s.jsxDEV(v,{xs:24,sm:12,lg:6,children:s.jsxDEV(D,{hoverable:!0,className:"text-center",children:[s.jsxDEV(_e,{title:"Taux de conversion",value:x.conversionRate,precision:1,suffix:"%",prefix:s.jsxDEV(qe,{className:"text-orange-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:495,columnNumber:25},this),valueStyle:{color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:490,columnNumber:15},this),s.jsxDEV(G,{percent:x.conversionRate,showInfo:!1,strokeColor:"#fa8c16",className:"mt-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:498,columnNumber:15},this),s.jsxDEV(ln,{type:"secondary",className:"text-xs",children:"Calcul√© depuis Prisma"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:504,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:489,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:488,columnNumber:11},this),s.jsxDEV(v,{xs:24,sm:12,lg:6,children:s.jsxDEV(D,{hoverable:!0,className:"text-center",children:[s.jsxDEV(_e,{title:"Temps de r√©ponse",value:x.averageResponseTime,precision:1,suffix:"h",prefix:s.jsxDEV(le,{className:"text-purple-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:518,columnNumber:25},this),valueStyle:{color:"#722ed1"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:513,columnNumber:15},this),s.jsxDEV(G,{percent:Math.max(0,100-4*x.averageResponseTime),showInfo:!1,strokeColor:"#722ed1",className:"mt-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:521,columnNumber:15},this),s.jsxDEV(ln,{type:"secondary",className:"text-xs",children:"Moyenne calcul√©e"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:527,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:512,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:511,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:442,columnNumber:9},this),s.jsxDEV(p,{gutter:[16,16],className:"mb-6",children:[s.jsxDEV(v,{xs:24,lg:12,children:s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(Ke,{className:"text-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:541,columnNumber:19},this),s.jsxDEV("span",{children:"R√©partition par statut (Prisma)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:542,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:540,columnNumber:17},this),extra:s.jsxDEV(h,{children:[s.jsxDEV(U,{status:"processing",text:"En temps r√©el"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:547,columnNumber:19},this),s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Pe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:548,columnNumber:46},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:548,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:546,columnNumber:17},this),hoverable:!0,children:[s.jsxDEV("div",{className:"h-64",children:s.jsxDEV(ls,{width:"100%",height:"100%",children:"pie"===d?s.jsxDEV(ds,{children:[s.jsxDEV(cs,{data:x.leadsByStatus,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:e,value:s,percent:r})=>`${e}: ${s} (${(100*r).toFixed(0)}%)`,children:x.leadsByStatus.map((e,r)=>s.jsxDEV(ms,{fill:e.color},`cell-${r}`,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:566,columnNumber:27},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:557,columnNumber:23},this),s.jsxDEV(us,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:569,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:556,columnNumber:21},this):s.jsxDEV(ps,{data:x.leadsByStatus,children:[s.jsxDEV(vs,{strokeDasharray:"3 3"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:573,columnNumber:23},this),s.jsxDEV(Ds,{dataKey:"name"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:574,columnNumber:23},this),s.jsxDEV(hs,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:575,columnNumber:23},this),s.jsxDEV(us,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:576,columnNumber:23},this),s.jsxDEV(Ns,{dataKey:"value",fill:"#3B82F6"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:577,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:572,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:554,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:553,columnNumber:15},this),N&&s.jsxDEV("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:s.jsxDEV(ln,{type:"secondary",className:"text-xs",children:"Donn√©es mises √† jour automatiquement depuis Prisma. Cliquez sur les segments pour plus de d√©tails."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:584,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:583,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:538,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:537,columnNumber:11},this),s.jsxDEV(v,{xs:24,lg:12,children:s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(Be,{className:"text-green-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:597,columnNumber:19},this),s.jsxDEV("span",{children:["√âvolution ","week"===m?"hebdomadaire":"month"===m?"mensuelle":"trimestrielle"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:598,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:596,columnNumber:17},this),extra:s.jsxDEV(h,{children:[s.jsxDEV(S,{color:"green",children:"Tendance ‚Üó"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:603,columnNumber:19},this),s.jsxDEV(cn,{size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:604,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:602,columnNumber:17},this),hoverable:!0,children:[s.jsxDEV("div",{className:"h-64",children:s.jsxDEV(ls,{width:"100%",height:"100%",children:s.jsxDEV(ps,{data:x.leadsEvolution,children:[s.jsxDEV(vs,{strokeDasharray:"3 3"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:612,columnNumber:21},this),s.jsxDEV(Ds,{dataKey:"name"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:613,columnNumber:21},this),s.jsxDEV(hs,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:614,columnNumber:21},this),s.jsxDEV(us,{formatter:e=>[e,"Leads"]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:615,columnNumber:21},this),s.jsxDEV(Ns,{dataKey:"value",fill:"#52c41a",radius:[4,4,0,0]},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:616,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:611,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:610,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:609,columnNumber:15},this),N&&s.jsxDEV("div",{className:"mt-4",children:s.jsxDEV(p,{gutter:8,children:[s.jsxDEV(v,{span:8,children:s.jsxDEV(_e,{title:"Croissance",value:18,precision:1,suffix:"%",prefix:s.jsxDEV(Ye,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:629,columnNumber:33},this),valueStyle:{fontSize:14,color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:624,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:623,columnNumber:21},this),s.jsxDEV(v,{span:8,children:s.jsxDEV(_e,{title:"Pic",value:x.leadsEvolution.reduce((e,s)=>Math.max(e,s.value),0),valueStyle:{fontSize:14,color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:634,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:633,columnNumber:21},this),s.jsxDEV(v,{span:8,children:s.jsxDEV(_e,{title:"Moyenne",value:x.leadsEvolution.reduce((e,s)=>e+s.value,0)/(x.leadsEvolution.length||1),precision:0,valueStyle:{fontSize:14,color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:641,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:640,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:622,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:621,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:594,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:593,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:535,columnNumber:9},this),s.jsxDEV(p,{gutter:[16,16],children:[s.jsxDEV(v,{xs:24,lg:16,children:s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(le,{className:"text-blue-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:661,columnNumber:19},this),s.jsxDEV("span",{children:"Activit√© r√©cente (TimelineEvents)"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:662,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:660,columnNumber:17},this),extra:s.jsxDEV(h,{children:[s.jsxDEV(j,{checkedChildren:"Temps r√©el",unCheckedChildren:"Manuel",defaultChecked:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:667,columnNumber:19},this),s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Pe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:672,columnNumber:46},this),children:"Actualiser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:672,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:666,columnNumber:17},this),hoverable:!0,children:[x.recentActivity.length>0?s.jsxDEV(be,{children:x.recentActivity.slice(0,8).map(e=>s.jsxDEV(be.Item,{dot:"creation"===e.type?s.jsxDEV(E,{size:"small",style:{backgroundColor:"#52c41a"},icon:s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:684,columnNumber:93},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:684,columnNumber:27},this):s.jsxDEV(E,{size:"small",style:{backgroundColor:"#1890ff"},icon:s.jsxDEV(F,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:686,columnNumber:93},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:686,columnNumber:27},this),color:"creation"===e.type?"green":"blue",children:s.jsxDEV("div",{className:"flex items-start justify-between",children:[s.jsxDEV("div",{className:"flex-1",children:[s.jsxDEV(ln,{strong:!0,className:"block",children:e.description},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:693,columnNumber:27},this),s.jsxDEV(ln,{type:"secondary",className:"text-xs flex items-center mt-1",children:[s.jsxDEV(le,{className:"mr-1"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:697,columnNumber:29},this),new Date(e.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),s.jsxDEV("span",{className:"ml-2",children:["‚Ä¢ ",e.user]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:704,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:696,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:692,columnNumber:25},this),s.jsxDEV(S,{color:"creation"===e.type?"green":"blue",className:"ml-2",children:"creation"===e.type?"Nouveau":"Action"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:707,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:691,columnNumber:23},this)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:680,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:678,columnNumber:17},this):s.jsxDEV(We,{description:"Aucune activit√© r√©cente",image:We.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:715,columnNumber:17},this),N&&x.recentActivity.length>8&&s.jsxDEV("div",{className:"mt-4 text-center",children:s.jsxDEV(w,{type:"link",children:["Voir toute l'activit√© (",x.recentActivity.length," √©l√©ments)"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:723,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:722,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:658,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:657,columnNumber:11},this),s.jsxDEV(v,{xs:24,lg:8,children:s.jsxDEV(D,{title:s.jsxDEV(h,{children:[s.jsxDEV(Je,{className:"text-orange-500"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:736,columnNumber:19},this),s.jsxDEV("span",{children:"Stats rapides"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:737,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:735,columnNumber:17},this),hoverable:!0,className:"mb-4",children:s.jsxDEV(p,{gutter:[0,16],children:[s.jsxDEV(v,{span:24,children:s.jsxDEV(_e,{title:"Leads actifs",value:x.totalLeads-x.newLeads,prefix:s.jsxDEV(oe,{style:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:748,columnNumber:29},this),valueStyle:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:745,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:744,columnNumber:17},this),s.jsxDEV(v,{span:24,children:s.jsxDEV(_e,{title:"En attente",value:Math.floor(.3*x.totalLeads),prefix:s.jsxDEV(Ge,{style:{color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:756,columnNumber:29},this),valueStyle:{color:"#fa8c16"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:753,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:752,columnNumber:17},this),s.jsxDEV(v,{span:24,children:s.jsxDEV("div",{children:[s.jsxDEV(ln,{strong:!0,children:"Performance ce mois"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:762,columnNumber:21},this),s.jsxDEV(G,{percent:75,status:"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"},className:"mt-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:763,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:761,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:760,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:743,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:733,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:732,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:656,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:358,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsDashboard.tsx",lineNumber:357,columnNumber:5},this)}const un=({callStatus:e,index:r,leadStatuses:t,onEdit:i,onDelete:n,moveStatus:a,onUpdateMapping:l,onDragEnd:d})=>{const[c,m]=o.useState(!1),[u,p]=o.useState(e.mappedToLeadStatus),[{isDragging:v},N]=Di({type:"CALL_STATUS_REORDER",item:{type:"CALL_STATUS_REORDER",index:r,id:e.id},collect:e=>({isDragging:e.isDragging()}),end:d}),[{isOverReorder:b},C]=Ci({accept:"CALL_STATUS_REORDER",hover:e=>{if(!x.current)return;const s=e.index,t=r;s!==t&&(a(s,t),e.index=t)},collect:e=>({isOverReorder:e.isOver()&&"CALL_STATUS_REORDER"===e.getItemType()})}),[,g]=Di({type:"CALL_STATUS",item:{id:e.id,name:e.name,type:"CALL_STATUS"}}),x=o.useRef(null);o.useEffect(()=>{x.current&&(N(x.current),C(x.current),g(x.current))},[N,C,g]);const f=t.find(s=>s.id===e.mappedToLeadStatus),E=[{key:"edit",icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:120,columnNumber:13},void 0),label:"Modifier",onClick:()=>i(e)},{key:"mapping",icon:s.jsxDEV(Xe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:126,columnNumber:13},void 0),label:"Changer la liaison",onClick:()=>m(!0)},{type:"divider"},{key:"delete",icon:s.jsxDEV(ye,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:135,columnNumber:13},void 0),label:"Supprimer",danger:!0,onClick:()=>{}}];return s.jsxDEV("div",{ref:x,className:`\n        transition-all duration-200\n        ${v?"opacity-50 scale-95":""}\n        ${b?"ring-2 ring-blue-400 bg-blue-50 scale-105":""}\n      `,style:{cursor:v?"grabbing":"grab"},children:s.jsxDEV(D,{size:"small",className:`\n          border-l-4 shadow-sm hover:shadow-md transition-shadow\n          ${b?"border-blue-400 bg-blue-50":""}\n        `,style:{borderLeftColor:e.color},title:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV(Qe,{className:"text-gray-400 cursor-grab"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:162,columnNumber:15},void 0),e.icon&&s.jsxDEV("span",{children:e.icon},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:163,columnNumber:35},void 0),s.jsxDEV(_,{title:e.description||`Statut d'appel: ${e.name}`,placement:"top",children:s.jsxDEV("span",{className:"font-medium cursor-help",children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:165,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:164,columnNumber:15},void 0),s.jsxDEV(S,{color:e.color,className:"text-xs",children:"Statut d'appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:167,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:161,columnNumber:13},void 0),s.jsxDEV(Ze,{menu:{items:E},trigger:["click"],children:s.jsxDEV(w,{type:"text",size:"small",icon:s.jsxDEV(es,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:172,columnNumber:54},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:172,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:171,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:160,columnNumber:11},void 0),children:s.jsxDEV("div",{className:"space-y-3",children:[e.description&&s.jsxDEV("div",{className:"text-sm text-gray-600",children:e.description},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:179,columnNumber:13},void 0),s.jsxDEV("div",{className:"text-sm text-gray-500",children:["Position: ",r+1]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:184,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"Li√© √† :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:190,columnNumber:13},void 0),c?s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV(ne,{size:"small",style:{width:150},placeholder:"Choisir statut",value:u,onChange:p,children:t.map(e=>s.jsxDEV(ne.Option,{value:e.id,children:s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:234,columnNumber:25},void 0),s.jsxDEV("span",{children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:238,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:233,columnNumber:23},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:232,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:224,columnNumber:17},void 0),s.jsxDEV(w,{size:"small",type:"primary",onClick:()=>{u&&e.id&&(l(e.id,u),m(!1),ss.success({message:"Mapping mis √† jour",description:"La liaison a √©t√© sauvegard√©e",duration:2}))},children:"Sauver"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:243,columnNumber:17},void 0),s.jsxDEV(w,{size:"small",onClick:()=>m(!1),children:"Annuler"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:246,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:223,columnNumber:15},void 0):s.jsxDEV("div",{className:"flex items-center space-x-2",children:f?s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.color}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:196,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-sm",children:f.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:200,columnNumber:21},void 0),s.jsxDEV(w,{type:"link",size:"small",icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:204,columnNumber:29},void 0),onClick:()=>m(!0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:201,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:195,columnNumber:19},void 0):s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("span",{className:"text-gray-400 text-sm",children:"Aucune liaison"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:210,columnNumber:21},void 0),s.jsxDEV(w,{type:"link",size:"small",icon:s.jsxDEV(Xe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:214,columnNumber:29},void 0),onClick:()=>m(!0),children:"Cr√©er"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:211,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:209,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:193,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:189,columnNumber:11},void 0),s.jsxDEV("div",{className:`\n            p-2 border-2 border-dashed rounded text-center text-xs transition-all\n            ${b?"border-blue-400 bg-blue-100 text-blue-700":"border-gray-200 text-gray-400"}\n          `,children:b?"üìã Rel√¢chez pour r√©organiser !":"üìé Glissez ce statut vers un statut de lead pour le lier ‚Ä¢ üìã Glissez pour r√©organiser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:254,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex justify-end",children:s.jsxDEV(h,{size:"small",children:[s.jsxDEV(_,{title:"Modifier ce statut d'appel",children:s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:271,columnNumber:44},void 0),onClick:()=>i(e)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:271,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:270,columnNumber:15},void 0),s.jsxDEV(ke,{title:"Supprimer ce statut ?",description:"Cette action est irr√©versible",onConfirm:()=>e.id&&n(e.id),okText:"Supprimer",cancelText:"Annuler",okType:"danger",children:s.jsxDEV(_,{title:"Supprimer ce statut d'appel",children:s.jsxDEV(w,{size:"small",danger:!0,icon:s.jsxDEV(ye,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:282,columnNumber:53},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:282,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:281,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:273,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:269,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:268,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:177,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:152,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableCallStatus.tsx",lineNumber:143,columnNumber:5},void 0)},pn=({status:e,index:r,onEdit:t,onDelete:i,moveStatus:n,onAcceptCallStatus:a,onDragEnd:l})=>{const d=o.useRef(null),[{isDragging:c},m]=Di({type:"LEAD_STATUS_REORDER",item:{type:"LEAD_STATUS_REORDER",index:r,id:e.id},end:()=>{l&&l()},collect:e=>({isDragging:e.isDragging()})}),[{isOverReorder:u},p]=Ci({accept:"LEAD_STATUS_REORDER",hover:e=>{if(!d.current)return;const s=e.index,t=r;s!==t&&(n(s,t),e.index=t)},collect:e=>({isOverReorder:e.isOver()&&"LEAD_STATUS_REORDER"===e.getItemType()})}),[{isOverMapping:v},N]=Ci({accept:"CALL_STATUS",drop:s=>{a&&s.id&&a(s.id,e.id)},collect:e=>({isOverMapping:e.isOver()&&"CALL_STATUS"===e.getItemType()})});return o.useEffect(()=>{d.current&&(m(d.current),p(d.current),N(d.current))},[m,p,N]),s.jsxDEV("div",{ref:d,className:`\n        transition-all duration-200\n        ${c?"opacity-50 scale-95":""}\n        ${u?"ring-2 ring-blue-400 bg-blue-50 scale-105":""}\n        ${v?"ring-2 ring-green-400 bg-green-50 scale-105":""}\n      `,style:{cursor:c?"grabbing":"grab"},children:s.jsxDEV(D,{size:"small",className:`\n          border-l-4 shadow-sm hover:shadow-md transition-shadow \n          ${u?"border-blue-400 bg-blue-50":""}\n          ${v?"border-green-400 bg-green-50":""}\n        `,style:{borderLeftColor:e.color},title:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV(Qe,{className:"text-gray-400 cursor-grab"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:113,columnNumber:15},void 0),s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:114,columnNumber:15},void 0),s.jsxDEV(_,{title:e.description||`Statut de lead: ${e.name}`,placement:"top",children:s.jsxDEV("span",{className:"font-medium cursor-help",children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:119,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:118,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:112,columnNumber:13},void 0),s.jsxDEV(h,{children:[s.jsxDEV(_,{title:"Modifier ce statut",children:s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:124,columnNumber:44},void 0),onClick:()=>t(e)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:124,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:123,columnNumber:15},void 0),s.jsxDEV(ke,{title:"Supprimer ce statut ?",description:"Cette action est irr√©versible",onConfirm:()=>i(e.id),okText:"Supprimer",cancelText:"Annuler",okType:"danger",children:s.jsxDEV(_,{title:"Supprimer ce statut",children:s.jsxDEV(w,{size:"small",danger:!0,icon:s.jsxDEV(ye,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:135,columnNumber:53},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:135,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:134,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:126,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:122,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:111,columnNumber:11},void 0),children:[s.jsxDEV("div",{className:"space-y-2",children:[e.description&&s.jsxDEV("div",{className:"text-sm text-gray-600 italic",children:["üí° ",e.description]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:145,columnNumber:13},void 0),s.jsxDEV("div",{className:"text-sm text-gray-500",children:["Ordre: ",e.order," ‚Ä¢ Position: ",r+1]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:150,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:142,columnNumber:9},void 0),s.jsxDEV("div",{className:"mt-2 p-2 border-2 border-dashed rounded text-center text-xs transition-all "+(v?"border-green-400 bg-green-100 text-green-700":u?"border-blue-400 bg-blue-100 text-blue-700":"border-gray-200 text-gray-400"),children:v?"üéØ Rel√¢chez pour cr√©er la liaison !":u?"üìã Rel√¢chez pour r√©organiser !":"üéØ Zone de drop - Accepte les statuts d'appel ‚Ä¢ üìã Glissez pour r√©organiser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:102,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/SortableLeadStatus.tsx",lineNumber:92,columnNumber:5},void 0)},{Title:vn,Text:Dn}=N,{Option:hn}=ne,Nn=()=>{const{api:e}=ns(),[r,t]=n.useState([]),[i,o]=n.useState([]),[a,l]=n.useState(!1),[d,c]=n.useState(null),[m]=ie.useForm(),[u,b]=n.useState(!1),[C,g]=n.useState(null),[E]=ie.useForm(),[M,A]=n.useState([]),[k,y]=n.useState([]),[O,R]=n.useState(!1),[U,I]=n.useState(null),[P]=ie.useForm(),[T,z]=n.useState([]),[H,$]=n.useState(!1),[F,q]=n.useState(null),[Y]=ie.useForm(),[B,W]=n.useState(!1),[G,J]=n.useState(null),[X]=ie.useForm(),Q=n.useCallback(async()=>{try{const[s,r,i,n,a]=await Promise.all([e.get("/api/settings/lead-statuses").catch(()=>[]),e.get("/api/settings/call-statuses").catch(()=>[]),e.get("/api/settings/call-lead-mappings").catch(()=>[]),e.get("/api/settings/lead-sources").catch(()=>[]),e.get("/api/settings/email-templates").catch(()=>[])]),l=(s||[]).sort((e,s)=>(e.order||0)-(s.order||0));t(l),o(r||[]),A(i||[]),y(n||[]),z(a||[])}catch(s){const e=Vs(s,"Erreur lors du chargement des param√®tres");Ss(s);is.error(e)}},[e]);n.useEffect(()=>{Q()},[Q]);const Z=async s=>{try{await e.delete(`/settings/lead-statuses/${s}`),is.success("Statut supprim√© avec succ√®s"),Q()}catch(r){const e=Vs(r,"Erreur lors de la suppression du statut");Ss(r);is.error(e)}},re=async(s,r)=>{try{await e.post("/api/settings/call-lead-mappings",{callStatusId:s,leadStatusId:r,priority:1});await Q(),ss.success({message:"Liaison cr√©√©e !",description:"Le mapping a √©t√© sauvegard√© en base de donn√©es",duration:3})}catch(t){ss.error({message:"Erreur",description:"Impossible de cr√©er la liaison",duration:3})}},te=n.useCallback(async(e,s)=>{const i=r[e],n=[...r];n.splice(e,1),n.splice(s,0,i),t(n)},[r]),oe=n.useCallback(async()=>{try{const s=r.map((e,s)=>({...e,order:s})),t={statuses:s.map(e=>({id:e.id,order:e.order}))};await e.put("/api/settings/lead-statuses/reorder",t);s.map(e=>({id:e.id,name:e.name,order:e.order}));ss.success({message:"Ordre mis √† jour",description:"L'ordre des statuts de leads a √©t√© sauvegard√©",duration:2})}catch(s){Q(),ss.error({message:"Erreur",description:"Impossible de sauvegarder l'ordre des statuts",duration:3})}},[r,e,Q]),ae=n.useCallback(async()=>{try{const s=i.map((e,s)=>({...e,order:s}));await e.put("/api/settings/call-statuses/reorder",{statuses:s.map(e=>({id:e.id,order:e.order}))}),ss.success({message:"Ordre mis √† jour",description:"L'ordre des statuts d'appel a √©t√© sauvegard√©",duration:2})}catch(s){Q(),ss.error({message:"Erreur",description:"Impossible de sauvegarder l'ordre des statuts d'appel",duration:3})}},[i,e,Q]),le=n.useCallback(async(s,r)=>{try{const t=i[s],n=[...i];n.splice(s,1),n.splice(r,0,t),o(n),await e.put("/api/settings/call-statuses/reorder",{statuses:n.map((e,s)=>({id:e.id,order:s+1}))}),ss.success({message:"Ordre mis √† jour",description:"L'ordre des statuts d'appel a √©t√© sauvegard√©",duration:2})}catch(t){await Q(),ss.error({message:"Erreur",description:"Impossible de r√©organiser les statuts d'appel",duration:3})}},[i,e,Q]),de=[{key:"statuses",label:s.jsxDEV(h,{children:[s.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:602,columnNumber:11},void 0),"Mapping Statuts"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:601,columnNumber:9},void 0),children:s.jsxDEV(qt,{backend:$i,children:s.jsxDEV(p,{gutter:24,children:[s.jsxDEV(v,{span:12,children:s.jsxDEV(D,{title:"Gestion des Statuts d'Appels",extra:s.jsxDEV(h,{children:[s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:614,columnNumber:27},void 0),onClick:()=>{g(null),E.resetFields(),b(!0)},children:"Nouveau Statut"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:612,columnNumber:19},void 0),s.jsxDEV(w,{type:"link",size:"small",onClick:()=>{ss.info({message:"Gestion Avanc√©e",description:"Cr√©ez vos propres statuts d'appel et mappez-les avec les statuts de leads par drag & drop.",duration:4})},children:"‚ÑπÔ∏è Guide"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:623,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:611,columnNumber:17},void 0),children:s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV(ee,{message:"Statuts d'appels personnalisables",description:"Cr√©ez, modifiez et organisez vos statuts d'appel. Glissez-d√©posez vers les statuts de leads (colonne de droite) pour cr√©er les liaisons.",type:"info",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:635,columnNumber:19},void 0),s.jsxDEV("div",{className:"space-y-2",children:i.map((t,n)=>s.jsxDEV(un,{callStatus:t,index:n,leadStatuses:r,onEdit:e=>{g(e),E.setFieldsValue(e),b(!0)},onDelete:s=>(async s=>{try{const r=i.filter(e=>e.id!==s);await e.post("/api/settings/call-statuses",{statuses:r}),o(r),is.success("Statut d'appel supprim√© avec succ√®s")}catch(r){const e=Vs(r,"Erreur lors de la suppression du statut d'appel");Ss(r),is.error(e)}})(s),moveStatus:le,onUpdateMapping:(e,s)=>re(e,s),onDragEnd:ae},t.id||n,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:645,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:643,columnNumber:19},void 0),0===i.length&&s.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:[s.jsxDEV("div",{className:"text-4xl mb-2",children:"ÔøΩ"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:667,columnNumber:23},void 0),s.jsxDEV("div",{children:"Aucun statut d'appel configur√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:668,columnNumber:23},void 0),s.jsxDEV("div",{className:"text-sm",children:'Cliquez sur "Nouveau Statut" pour commencer'},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:669,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:666,columnNumber:21},void 0),s.jsxDEV("div",{className:"mt-4 p-3 bg-blue-50 rounded border border-blue-200",children:s.jsxDEV(Dn,{className:"text-blue-800 text-sm",children:[s.jsxDEV("strong",{children:"üí° Fonctionnalit√©s drag & drop :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:675,columnNumber:23},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:675,columnNumber:72},void 0),"‚Ä¢ ",s.jsxDEV("strong",{children:"R√©organiser :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:676,columnNumber:25},void 0)," Glissez un statut sur un autre pour r√©organiser l'ordre",s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:676,columnNumber:111},void 0),"‚Ä¢ ",s.jsxDEV("strong",{children:"Lier :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:677,columnNumber:25},void 0)," Glissez un statut d'appel vers un statut de lead pour cr√©er une liaison",s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:677,columnNumber:120},void 0),"‚Ä¢ Les modifications sont sauvegard√©es automatiquement"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:674,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:673,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:634,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:610,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:609,columnNumber:13},void 0),s.jsxDEV(v,{span:12,children:s.jsxDEV(D,{title:"Statuts de Leads",extra:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:690,columnNumber:27},void 0),onClick:()=>{c(null),m.resetFields(),l(!0)},children:"Ajouter"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:688,columnNumber:19},void 0),children:s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV(ee,{message:"Zone drag & drop multi-fonctionnelle",description:"Accepte les statuts d'appel pour cr√©er des liaisons ET permet la r√©organisation par glisser-d√©poser entre statuts de leads.",type:"success",showIcon:!0,className:"mb-4"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:702,columnNumber:19},void 0),s.jsxDEV("div",{className:"space-y-2",children:r.map((e,r)=>s.jsxDEV(pn,{status:e,index:r,onEdit:e=>{c(e),m.setFieldsValue(e),l(!0)},onDelete:Z,moveStatus:te,onDragEnd:oe,onAcceptCallStatus:(s,r)=>{re(s,r),ss.success({message:"Liaison cr√©√©e !",description:`Statut d'appel li√© avec "${e.name}"`,duration:2})}},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:712,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:710,columnNumber:19},void 0),0===r.length&&s.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:[s.jsxDEV("div",{className:"text-4xl mb-2",children:"ÔøΩ"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:738,columnNumber:23},void 0),s.jsxDEV("div",{children:"Aucun statut configur√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:739,columnNumber:23},void 0),s.jsxDEV("div",{className:"text-sm",children:'Cliquez sur "Ajouter" pour commencer'},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:740,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:737,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:701,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:685,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:684,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:608,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:607,columnNumber:9},void 0)},{key:"mappings",label:s.jsxDEV(h,{children:[s.jsxDEV(Xe,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:754,columnNumber:11},void 0),"R√®gles de Mapping"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:753,columnNumber:9},void 0),children:s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV(D,{title:"R√®gles de Mapping Configur√©es",children:[s.jsxDEV(ee,{message:"Mappings Intelligents Actifs",description:`${M.length} r√®gles automatiques configur√©es selon votre tableau m√©tier. Ces r√®gles d√©terminent comment les statuts d'appel changent automatiquement les statuts de leads.`,type:"success",className:"mb-4",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:762,columnNumber:13},void 0),s.jsxDEV("div",{className:"space-y-3",children:M.map((r,t)=>{var i,n,o,a,l,d;return s.jsxDEV(D,{size:"small",className:"border border-gray-200",children:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center space-x-4",children:[s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(null==(i=r.callStatus)?void 0:i.color)||"#d1d5db"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:781,columnNumber:25},void 0),s.jsxDEV(_,{title:(null==(n=r.callStatus)?void 0:n.description)||"",children:s.jsxDEV("span",{className:"font-medium cursor-help",children:(null==(o=r.callStatus)?void 0:o.name)||"Statut non d√©fini"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:786,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:785,columnNumber:25},void 0),s.jsxDEV(S,{size:"small",color:"blue",children:"Appel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:790,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:780,columnNumber:23},void 0),s.jsxDEV("div",{className:"text-gray-400",children:"‚Üí"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:794,columnNumber:23},void 0),s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(null==(a=r.leadStatus)?void 0:a.color)||"#d1d5db"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:798,columnNumber:25},void 0),s.jsxDEV(_,{title:(null==(l=r.leadStatus)?void 0:l.description)||"",children:s.jsxDEV("span",{className:"font-medium cursor-help",children:(null==(d=r.leadStatus)?void 0:d.name)||"Statut non d√©fini"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:803,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:802,columnNumber:25},void 0),s.jsxDEV(S,{size:"small",color:"green",children:"Lead"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:807,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:797,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:778,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV(S,{color:"purple",className:"text-xs",children:"automatic"===r.condition?"Automatique":r.condition},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:812,columnNumber:23},void 0),s.jsxDEV(Dn,{type:"secondary",className:"text-xs",children:["Priorit√©: ",r.priority]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:815,columnNumber:23},void 0),s.jsxDEV(w,{size:"small",icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:820,columnNumber:31},void 0),onClick:()=>(e=>{J(e),X.setFieldsValue({callStatusId:e.callStatusId,leadStatusId:e.leadStatusId,isAutomatic:e.isAutomatic,priority:e.priority,condition:e.condition}),W(!0)})(r),title:"Modifier ce mapping"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:818,columnNumber:23},void 0),s.jsxDEV(ke,{title:"Supprimer ce mapping ?",description:"Cette action est irr√©versible. √ätes-vous s√ªr ?",onConfirm:()=>(async s=>{try{await e.delete(`/api/settings/call-lead-mappings/${s}`),A(e=>e.filter(e=>e.id!==s)),ss.success({message:"Mapping supprim√©",description:"La liaison a √©t√© supprim√©e avec succ√®s"})}catch(r){ss.error({message:"Erreur",description:"Impossible de supprimer le mapping"})}})(r.id),okText:"Supprimer",cancelText:"Annuler",okButtonProps:{danger:!0},children:s.jsxDEV(w,{size:"small",danger:!0,icon:s.jsxDEV(ye,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:835,columnNumber:33},void 0),title:"Supprimer ce mapping"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:832,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:824,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:811,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:777,columnNumber:19},void 0)},r.id||t,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:772,columnNumber:17},void 0)})},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:770,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:761,columnNumber:11},void 0),s.jsxDEV(D,{title:"Cr√©er une Nouvelle Liaison",extra:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:852,columnNumber:23},void 0),onClick:()=>{J(null),X.resetFields(),W(!0)},children:"Nouveau Mapping"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:850,columnNumber:15},void 0),children:[s.jsxDEV(ee,{message:"Liaison Statut d'Appel ‚Üí Statut de Lead",description:"D√©finissez comment l'√©tat d'un appel influence automatiquement l'avancement du lead selon votre tableau m√©tier. Chaque r√®gle peut √™tre configur√©e pour √™tre automatique ou manuelle.",type:"info",className:"mb-4",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:863,columnNumber:13},void 0),s.jsxDEV("div",{className:"bg-blue-50 p-4 rounded border border-blue-200",children:[s.jsxDEV(N.Title,{level:5,className:"text-blue-800 mb-2",children:"üí° Comment fonctionnent les mappings"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:872,columnNumber:15},void 0),s.jsxDEV("ul",{className:"text-blue-700 text-sm space-y-1 list-disc list-inside",children:[s.jsxDEV("li",{children:[s.jsxDEV("strong",{children:"Automatique"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:876,columnNumber:21},void 0)," : Le changement se fait instantan√©ment apr√®s l'appel"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:876,columnNumber:17},void 0),s.jsxDEV("li",{children:[s.jsxDEV("strong",{children:"Manuel"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:877,columnNumber:21},void 0)," : L'utilisateur doit confirmer le changement"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:877,columnNumber:17},void 0),s.jsxDEV("li",{children:[s.jsxDEV("strong",{children:"Priorit√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:878,columnNumber:21},void 0)," : En cas de conflit, la r√®gle avec la priorit√© la plus faible gagne"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:878,columnNumber:17},void 0),s.jsxDEV("li",{children:[s.jsxDEV("strong",{children:"Condition"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:879,columnNumber:21},void 0)," : Crit√®res sp√©ciaux pour d√©clencher la r√®gle"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:879,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:875,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:871,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:847,columnNumber:11},void 0),0===M.length&&s.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:[s.jsxDEV("div",{className:"text-4xl mb-2",children:"üîó"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:886,columnNumber:15},void 0),s.jsxDEV("div",{children:"Aucun mapping configur√©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:887,columnNumber:15},void 0),s.jsxDEV("div",{className:"text-sm",children:"Les mappings se cr√©ent automatiquement via le drag & drop"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:888,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:885,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:759,columnNumber:9},void 0)},{key:"sources",label:s.jsxDEV(h,{children:[s.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:898,columnNumber:11},void 0),"Sources & D√©lais"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:897,columnNumber:9},void 0),children:s.jsxDEV("div",{className:"space-y-6",children:s.jsxDEV(D,{title:"Configuration des Sources",extra:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:909,columnNumber:21},void 0),onClick:()=>{I(null),P.resetFields(),R(!0)},children:"Ajouter Source"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:907,columnNumber:13},void 0),children:[s.jsxDEV(ee,{message:"D√©finissez les d√©lais de traitement par source selon le cahier des charges",type:"info",className:"mb-4"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:920,columnNumber:11},void 0),s.jsxDEV(se,{dataSource:k,renderItem:e=>s.jsxDEV(se.Item,{actions:[s.jsxDEV(w,{icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:931,columnNumber:27},void 0),onClick:()=>{I(e),P.setFieldsValue(e),R(!0)},children:"Modifier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:930,columnNumber:19},void 0)],children:s.jsxDEV(se.Item.Meta,{title:s.jsxDEV(S,{color:"blue",children:e.label},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:943,columnNumber:26},void 0),description:s.jsxDEV(h,{direction:"vertical",size:"small",children:[s.jsxDEV(Dn,{children:["D√©lai maximum: ",s.jsxDEV("strong",{children:[e.maxDelay," ","hours"===e.unit?"heures":"jours"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:946,columnNumber:44},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:946,columnNumber:23},void 0),s.jsxDEV(Dn,{type:"secondary",children:["‚ùå Non trait√© dans le d√©lai ‚Üí impact commercial n√©gatif",s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:948,columnNumber:79},void 0),"‚úÖ Trait√© dans le d√©lai ‚Üí pas d'impact n√©gatif"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:947,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:945,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:942,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:928,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:925,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:904,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:903,columnNumber:9},void 0)},{key:"integrations",label:s.jsxDEV(h,{children:[s.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:965,columnNumber:11},void 0),"API & Int√©grations"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:964,columnNumber:9},void 0),children:s.jsxDEV(p,{gutter:24,children:[s.jsxDEV(v,{span:12,children:s.jsxDEV(D,{title:"Int√©grations CRM",children:s.jsxDEV(h,{direction:"vertical",className:"w-full",children:[s.jsxDEV("div",{className:"flex justify-between items-center",children:[s.jsxDEV(Dn,{children:"Bobex Integration"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:975,columnNumber:19},void 0),s.jsxDEV(j,{defaultChecked:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:976,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:974,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex justify-between items-center",children:[s.jsxDEV(Dn,{children:"Solvary Integration"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:979,columnNumber:19},void 0),s.jsxDEV(j,{defaultChecked:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:980,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:978,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex justify-between items-center",children:[s.jsxDEV(Dn,{children:"Telnyx Appels"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:983,columnNumber:19},void 0),s.jsxDEV(j,{defaultChecked:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:984,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:982,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:973,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:972,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:971,columnNumber:11},void 0),s.jsxDEV(v,{span:12,children:s.jsxDEV(D,{title:"Google Workspace",children:s.jsxDEV(h,{direction:"vertical",className:"w-full",children:[s.jsxDEV("div",{className:"flex justify-between items-center",children:[s.jsxDEV(Dn,{children:"Google Calendar"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:993,columnNumber:19},void 0),s.jsxDEV(j,{defaultChecked:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:994,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:992,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex justify-between items-center",children:[s.jsxDEV(Dn,{children:"Gmail Integration"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:997,columnNumber:19},void 0),s.jsxDEV(j,{defaultChecked:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:998,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:996,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex justify-between items-center",children:[s.jsxDEV(Dn,{children:"Gemini IA"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1001,columnNumber:19},void 0),s.jsxDEV(j,{defaultChecked:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1002,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1e3,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:991,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:990,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:989,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:970,columnNumber:9},void 0)},{key:"sales",label:s.jsxDEV(h,{children:[s.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1014,columnNumber:11},void 0),"Commerciaux"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1013,columnNumber:9},void 0),children:s.jsxDEV(D,{title:"√âquipe Commerciale",extra:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1024,columnNumber:21},void 0),onClick:()=>setIsSalesModalVisible(!0),children:"Ajouter Commercial"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1022,columnNumber:13},void 0),children:[s.jsxDEV(ee,{message:"Gestion des comptes commerciaux, quotas et objectifs",type:"info",className:"mb-4"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1031,columnNumber:11},void 0),s.jsxDEV(Dn,{type:"secondary",children:"Configuration des commerciaux en cours de d√©veloppement selon le cahier des charges"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1036,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1019,columnNumber:9},void 0)},{key:"emails",label:s.jsxDEV(h,{children:[s.jsxDEV(L,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1046,columnNumber:11},void 0),"Mod√®les Emails"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1045,columnNumber:9},void 0),children:s.jsxDEV(D,{title:"Mod√®les d'Emails",extra:s.jsxDEV(w,{type:"primary",icon:s.jsxDEV(Ce,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1056,columnNumber:21},void 0),onClick:()=>{q(null),Y.resetFields(),$(!0)},children:"Nouveau Mod√®le"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1054,columnNumber:13},void 0),children:[s.jsxDEV(ee,{message:"Mod√®les pr√©d√©finis pour chaque action (RDV, devis, relance, refus)",type:"info",className:"mb-4"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1067,columnNumber:11},void 0),s.jsxDEV(se,{dataSource:T,renderItem:e=>s.jsxDEV(se.Item,{actions:[s.jsxDEV(w,{icon:s.jsxDEV(Le,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1078,columnNumber:27},void 0),onClick:()=>{q(e),Y.setFieldsValue(e),$(!0)},children:"Modifier"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1077,columnNumber:19},void 0)],children:s.jsxDEV(se.Item.Meta,{title:s.jsxDEV(S,{color:"green",children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1090,columnNumber:26},void 0),description:s.jsxDEV(h,{direction:"vertical",size:"small",children:[s.jsxDEV(Dn,{children:[s.jsxDEV("strong",{children:"Sujet:"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1093,columnNumber:29},void 0)," ",e.subject]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1093,columnNumber:23},void 0),s.jsxDEV(Dn,{type:"secondary",ellipsis:!0,children:e.content},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1094,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1092,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1089,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1075,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1072,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1051,columnNumber:9},void 0)}];return s.jsxDEV("div",{className:"p-6",children:[s.jsxDEV("div",{className:"mb-6",children:[s.jsxDEV(vn,{level:2,children:"‚öôÔ∏è Param√®tres Leads & Appels"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1109,columnNumber:9},void 0),s.jsxDEV(Dn,{type:"secondary",children:"Configuration compl√®te selon le cahier des charges V1.5"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1110,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1108,columnNumber:7},void 0),s.jsxDEV(Ne,{items:de,size:"large",tabBarStyle:{marginBottom:24}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1115,columnNumber:7},void 0),s.jsxDEV(ve,{title:d?"Modifier le statut":"Ajouter un statut",open:a,onOk:async()=>{try{const s=await m.validateFields(),r=d?`/settings/lead-statuses/${d.id}`:"/settings/lead-statuses",t=d?"put":"post";await e[t](r,s),is.success(`Statut ${d?"modifi√©":"ajout√©"} avec succ√®s`),l(!1),c(null),Q()}catch(s){const e=Vs(s,"Erreur lors de la sauvegarde du statut");Ss(s);is.error(e)}},onCancel:()=>l(!1),okText:"Sauvegarder",cancelText:"Annuler",children:s.jsxDEV(ie,{form:m,layout:"vertical",children:[s.jsxDEV(ie.Item,{name:"name",label:"Nom du statut",rules:[{required:!0}],children:s.jsxDEV(K,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1132,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1131,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"color",label:"Couleur",rules:[{required:!0}],children:s.jsxDEV(K,{type:"color"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1135,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1134,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"order",label:"Ordre",rules:[{required:!0}],children:s.jsxDEV(rs,{min:1,style:{width:"100%"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1138,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1137,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1130,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1122,columnNumber:7},void 0),s.jsxDEV(ve,{title:C?"Modifier le statut d'appel":"Nouveau statut d'appel",open:u,onOk:async()=>{try{const s=await E.validateFields();let r;if(C)r=i.map(e=>e.id===C.id?{...e,...s}:e),is.success("Statut d'appel modifi√© avec succ√®s");else{const e={id:Date.now().toString(),...s};r=[...i,e],is.success("Statut d'appel cr√©√© avec succ√®s")}await e.post("/api/settings/call-statuses",{statuses:r}),o(r),b(!1),g(null),E.resetFields()}catch(s){const e=Vs(s,"Erreur lors de la sauvegarde du statut d'appel");Ss(s);is.error(e)}},onCancel:()=>{b(!1),g(null),E.resetFields()},okText:"Sauvegarder",cancelText:"Annuler",width:600,children:s.jsxDEV(ie,{form:E,layout:"vertical",children:[s.jsxDEV(p,{gutter:16,children:[s.jsxDEV(v,{span:12,children:s.jsxDEV(ie.Item,{name:"name",label:"Nom du statut",rules:[{required:!0,message:"Le nom est requis"}],children:s.jsxDEV(K,{placeholder:"ex: R√©pondu"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1161,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1160,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1159,columnNumber:13},void 0),s.jsxDEV(v,{span:12,children:s.jsxDEV(ie.Item,{name:"icon",label:"Ic√¥ne (optionnel)",children:s.jsxDEV(K,{placeholder:"ex: ‚úÖ",maxLength:2},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1166,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1165,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1164,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1158,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"description",label:"Description",children:s.jsxDEV(K.TextArea,{placeholder:"Description du statut d'appel...",rows:2},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1172,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1171,columnNumber:11},void 0),s.jsxDEV(p,{gutter:16,children:[s.jsxDEV(v,{span:12,children:s.jsxDEV(ie.Item,{name:"color",label:"Couleur",rules:[{required:!0,message:"La couleur est requise"}],children:s.jsxDEV(K,{type:"color"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1181,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1180,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1179,columnNumber:13},void 0),s.jsxDEV(v,{span:12,children:s.jsxDEV(ie.Item,{name:"mappedToLeadStatus",label:"Li√© au statut de lead",children:s.jsxDEV(ne,{placeholder:"Choisir un statut de lead",children:r.map(e=>s.jsxDEV(hn,{value:e.id,children:s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1190,columnNumber:25},void 0),s.jsxDEV("span",{children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1194,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1189,columnNumber:23},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1188,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1186,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1185,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1184,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1178,columnNumber:11},void 0),s.jsxDEV(ee,{message:"Liaison automatique",description:"Quand un appel se termine avec ce statut, le lead sera automatiquement mis √† jour avec le statut li√© (si d√©fini).",type:"info",showIcon:!0,className:"mt-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1203,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1157,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1144,columnNumber:7},void 0),s.jsxDEV(ve,{title:U?"Modifier la source":"Ajouter une source",open:O,onOk:async()=>{try{const e=await P.validateFields();y(U?s=>s.map(s=>s.id===U.id?{...s,...e}:s):s=>[...s,{id:Date.now().toString(),...e}]),is.success(`Source ${U?"modifi√©e":"ajout√©e"} avec succ√®s`),R(!1),I(null)}catch(e){const s=Vs(e,"Erreur lors de la sauvegarde de la source");Ss(e);is.error(s)}},onCancel:()=>R(!1),okText:"Sauvegarder",cancelText:"Annuler",children:s.jsxDEV(ie,{form:P,layout:"vertical",children:[s.jsxDEV(ie.Item,{name:"name",label:"Nom de la source",rules:[{required:!0}],children:s.jsxDEV(K,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1224,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1223,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"label",label:"Libell√© affich√©",rules:[{required:!0}],children:s.jsxDEV(K,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1227,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1226,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"maxDelay",label:"D√©lai maximum",rules:[{required:!0}],children:s.jsxDEV(rs,{min:1,style:{width:"100%"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1230,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1229,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"unit",label:"Unit√©",rules:[{required:!0}],children:s.jsxDEV(ne,{children:[s.jsxDEV(hn,{value:"hours",children:"Heures"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1234,columnNumber:15},void 0),s.jsxDEV(hn,{value:"days",children:"Jours"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1235,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1233,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1232,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1222,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1214,columnNumber:7},void 0),s.jsxDEV(ve,{title:F?"Modifier le mod√®le":"Nouveau mod√®le",open:H,onOk:async()=>{try{const e=await Y.validateFields();z(F?s=>s.map(s=>s.id===F.id?{...s,...e}:s):s=>[...s,{id:Date.now().toString(),...e}]),is.success(`Mod√®le ${F?"modifi√©":"ajout√©"} avec succ√®s`),$(!1),q(null)}catch(e){const s=Vs(e,"Erreur lors de la sauvegarde du mod√®le");Ss(e);is.error(s)}},onCancel:()=>$(!1),okText:"Sauvegarder",cancelText:"Annuler",width:800,children:s.jsxDEV(ie,{form:Y,layout:"vertical",children:[s.jsxDEV(ie.Item,{name:"name",label:"Nom du mod√®le",rules:[{required:!0}],children:s.jsxDEV(K,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1253,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1252,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"subject",label:"Sujet de l'email",rules:[{required:!0}],children:s.jsxDEV(K,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1256,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1255,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"content",label:"Contenu",rules:[{required:!0}],children:s.jsxDEV(K.TextArea,{rows:6},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1259,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1258,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1251,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1242,columnNumber:7},void 0),s.jsxDEV(ve,{title:G?"Modifier le mapping":"Nouveau mapping",open:B,onOk:async()=>{try{const s=await X.validateFields();G?(await e.put(`/api/settings/call-lead-mappings/${G.id}`,{callStatusId:s.callStatusId,leadStatusId:s.leadStatusId,priority:s.priority||1,description:s.description||null}),ss.success({message:"Mapping modifi√©",description:"La liaison a √©t√© modifi√©e avec succ√®s"})):(await e.post("/api/settings/call-lead-mappings",{callStatusId:s.callStatusId,leadStatusId:s.leadStatusId,priority:s.priority||1,description:s.description||null}),ss.success({message:"Mapping cr√©√©",description:"La liaison entre les statuts a √©t√© cr√©√©e avec succ√®s"})),await Q(),W(!1),J(null),X.resetFields()}catch(s){ss.error({message:"Erreur",description:"Impossible de cr√©er le mapping"})}},onCancel:()=>{W(!1),J(null),X.resetFields()},okText:"Sauvegarder",cancelText:"Annuler",children:s.jsxDEV(ie,{form:X,layout:"vertical",children:[s.jsxDEV(ie.Item,{name:"callStatusId",label:"Statut d'appel",rules:[{required:!0}],children:s.jsxDEV(ne,{placeholder:"S√©lectionner un statut d'appel",children:i.map(e=>s.jsxDEV(ne.Option,{value:e.id,children:s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1283,columnNumber:21},void 0),s.jsxDEV("span",{children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1287,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1282,columnNumber:19},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1281,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1279,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1278,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"leadStatusId",label:"Statut de lead",rules:[{required:!0}],children:s.jsxDEV(ne,{placeholder:"S√©lectionner un statut de lead",children:r.map(e=>s.jsxDEV(ne.Option,{value:e.id,children:s.jsxDEV("div",{className:"flex items-center space-x-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1299,columnNumber:21},void 0),s.jsxDEV("span",{children:e.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1303,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1298,columnNumber:19},void 0)},e.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1297,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1295,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1294,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"priority",label:"Priorit√©",rules:[{required:!0}],children:s.jsxDEV(rs,{min:1,max:100,style:{width:"100%"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1311,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1310,columnNumber:11},void 0),s.jsxDEV(ie.Item,{name:"description",label:"Description",children:s.jsxDEV(K.TextArea,{rows:3,placeholder:"Description de cette r√®gle de mapping..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1315,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1314,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1277,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1265,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsSettingsPage.tsx",lineNumber:1107,columnNumber:5},void 0)};function bn(){const{can:t}=e(),i=r(),n=l(),a=t("leads:read"),d=o.useCallback(e=>{n(`/leads/details/${e}`)},[n]),p=o.useCallback(e=>{n(`/leads/call/${e}`)},[n]),v=o.useCallback(e=>{n(`/leads/email/${e}`)},[n]),D=o.useCallback(e=>{n(`/leads/agenda/${e}`)},[n]);return a?"/leads"===i.pathname?s.jsxDEV(c,{to:"/leads/home",replace:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:63,columnNumber:12},this):s.jsxDEV(m,{children:s.jsxDEV(u,{path:"/",element:s.jsxDEV(gs,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:70,columnNumber:32},this),children:[s.jsxDEV(u,{path:"home",element:s.jsxDEV(s.Fragment,{children:[void 0,s.jsxDEV(kr,{onViewLead:d,onCallLead:p,onEmailLead:v,onScheduleLead:D},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:74,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:72,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:71,columnNumber:9},this),s.jsxDEV(u,{path:"dashboard",element:s.jsxDEV(s.Fragment,{children:[void 0,s.jsxDEV(mn,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:85,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:83,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:82,columnNumber:9},this),s.jsxDEV(u,{path:"list",element:s.jsxDEV(s.Fragment,{children:[void 0,s.jsxDEV("div",{className:"p-6",children:s.jsxDEV(kr,{onViewLead:d,onCallLead:p,onEmailLead:v,onScheduleLead:D},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:92,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:91,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:89,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:88,columnNumber:9},this),s.jsxDEV(u,{path:"kanban",element:s.jsxDEV(rn,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:101,columnNumber:39},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:101,columnNumber:9},this),s.jsxDEV(u,{path:"details/:leadId",element:s.jsxDEV(Cr,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:102,columnNumber:48},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:102,columnNumber:9},this),s.jsxDEV(u,{path:"call/:leadId",element:s.jsxDEV(lr,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:103,columnNumber:45},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:103,columnNumber:9},this),s.jsxDEV(u,{path:"email/:leadId",element:s.jsxDEV(vr,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:104,columnNumber:46},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:104,columnNumber:9},this),s.jsxDEV(u,{path:"agenda/:leadId",element:s.jsxDEV("div",{className:"p-6",children:s.jsxDEV("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:[s.jsxDEV("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:"üìÖ Module Agenda Google"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:108,columnNumber:15},this),s.jsxDEV("p",{className:"text-blue-700",children:"Int√©gration Google Calendar en cours de d√©veloppement. Redirection vers Google Agenda..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:109,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:107,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:106,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:105,columnNumber:9},this),s.jsxDEV(u,{path:"integrations",element:s.jsxDEV("div",{className:"p-6",children:s.jsxDEV("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:[s.jsxDEV("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:"üîó Int√©grations"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:118,columnNumber:15},this),s.jsxDEV("p",{className:"text-blue-700",children:"Cette section permettra de configurer les int√©grations avec vos outils externes (CRM, emails, calendriers, etc.)."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:119,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:117,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:116,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:115,columnNumber:9},this),s.jsxDEV(u,{path:"settings",element:s.jsxDEV(s.Fragment,{children:[void 0,s.jsxDEV(Nn,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:126,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:125,columnNumber:9},this),s.jsxDEV(u,{path:"*",element:s.jsxDEV(s.Fragment,{children:[void 0,s.jsxDEV(c,{to:"/leads/list",replace:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:134,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:133,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:70,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:69,columnNumber:5},this):s.jsxDEV("div",{className:"p-6",children:s.jsxDEV("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:s.jsxDEV("p",{className:"text-red-700",children:"Vous n'avez pas les permissions n√©cessaires pour acc√©der √† cette section."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:54,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/Leads/LeadsPage.tsx",lineNumber:52,columnNumber:7},this)}export{bn as default};
