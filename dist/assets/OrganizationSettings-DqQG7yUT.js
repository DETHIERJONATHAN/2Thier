import{u as e,j as i}from"./index-C0S0DpaX.js";import{r as s}from"./react-vendor-Al_k-ZB6.js";import{y as r}from"./AppLayout-B5YjWTBr.js";import"./antd-vendor-zFcGztvE.js";import"./useAuthenticatedApi-BbQI8SDU.js";import"./data-vendor-wH_FeJEU.js";import"./Notifications-Bhgc2wzd.js";const t=()=>{const{currentOrganization:t,user:n,refetchUser:o}=e(),[a,m]=s.useState(""),[d,l]=s.useState(!1),c=null==n?void 0:n.role,u="admin"===c||"super_admin"===c;s.useEffect(()=>{t&&m(t.name)},[t]);return t?i.jsxDEV("div",{children:[i.jsxDEV("h2",{className:"text-2xl font-bold mb-6",children:"Paramètres de l'organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:68,columnNumber:7},void 0),i.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),l(!0),!t)return r.error("Impossible de trouver les informations de l'organisation."),void l(!1);try{const e=await fetch(`/api/organizations/${t.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${token}`},body:JSON.stringify({name:a})}),i=await e.json();if(!e.ok||!i.success)throw new Error(i.message||"Une erreur est survenue.");r.success("Le nom de l'organisation a été mis à jour."),o&&await o()}catch(i){r.error(i.message||"Erreur lors de la mise à jour de l'organisation.")}finally{l(!1)}},className:"space-y-4 max-w-lg",children:[i.jsxDEV("div",{children:[i.jsxDEV("label",{htmlFor:"orgName",className:"block text-sm font-medium text-gray-700",children:"Nom de l'organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:71,columnNumber:11},void 0),i.jsxDEV("input",{type:"text",id:"orgName",value:a,onChange:e=>m(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,disabled:!u},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:74,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:70,columnNumber:9},void 0),i.jsxDEV("div",{children:i.jsxDEV("button",{type:"submit",disabled:d||a===t.name||!u,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400",children:d?"Enregistrement...":"Enregistrer les modifications"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:85,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:84,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:69,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:67,columnNumber:5},void 0):i.jsxDEV("div",{children:[i.jsxDEV("h2",{className:"text-2xl font-bold mb-4",children:"Paramètres de l'organisation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:60,columnNumber:13},void 0),i.jsxDEV("p",{children:"Chargement des informations de l'organisation ou aucune organisation associée."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:61,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/settings/OrganizationSettings.tsx",lineNumber:59,columnNumber:9},void 0)};export{t as default};
