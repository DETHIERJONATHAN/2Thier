import{j as e}from"./index-C0S0DpaX.js";import{r as s}from"./react-vendor-Al_k-ZB6.js";import{u as i}from"./useAuthenticatedApi-BbQI8SDU.js";import{s as r,T as m,v as t,B as l,aF as n,af as o,ag as u,a,aj as c,a3 as d,R as v,Y as b,b as N,aG as D,D as p,aX as h,$ as g,O as x,a8 as C,bC as P,H as E,a7 as V,b3 as f,c9 as S,cB as k,ab as A,F,a0 as O,a$ as j,I as M,an as R,aM as U,b5 as y,bg as w,x as z,bs as I,a4 as T}from"./antd-vendor-zFcGztvE.js";import"./fr-BNlagHuH.js";h.locale("fr");const{Title:q,Text:L,Paragraph:$}=m,{TextArea:Y}=M,{TabPane:B}=j,G=({visible:i,onCancel:r,onSubmit:m,loading:t,form:c,isEdit:d=!1})=>{const[v]=F.useForm(),[b,N]=s.useState([]);s.useEffect(()=>{i&&c&&d?(v.setFieldsValue({...c,campaigns:c.campaigns||[]}),N(c.fields||[])):i&&!d&&(v.resetFields(),N([{id:"1",name:"firstName",label:"Prénom",type:"text",required:!0,order:1},{id:"2",name:"lastName",label:"Nom",type:"text",required:!0,order:2},{id:"3",name:"email",label:"Email",type:"email",required:!0,order:3},{id:"4",name:"phone",label:"Téléphone",type:"phone",required:!0,order:4},{id:"5",name:"message",label:"Votre demande",type:"textarea",required:!0,order:5}]))},[i,c,d,v]);const D=(e,s)=>{const i=b.map((i,r)=>r===e?{...i,...s}:i);N(i)};return e.jsxDEV(O,{title:e.jsxDEV(g,{children:[d?e.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:232,columnNumber:21},void 0):e.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:232,columnNumber:40},void 0),d?"Modifier le formulaire":"Créer un formulaire"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:231,columnNumber:9},void 0),open:i,onCancel:r,onOk:async()=>{try{const e=await v.validateFields(),s={...e,fields:b,slug:e.slug||e.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")};m(s)}catch(e){}},confirmLoading:t,okText:d?"Mettre à jour":"Créer",cancelText:"Annuler",width:900,children:e.jsxDEV(F,{form:v,layout:"vertical",children:e.jsxDEV(j,{defaultActiveKey:"1",children:[e.jsxDEV(B,{tab:"Configuration",children:[e.jsxDEV(o,{gutter:16,children:[e.jsxDEV(u,{span:12,children:e.jsxDEV(F.Item,{name:"name",label:"Nom du formulaire",rules:[{required:!0,message:"Nom requis"}],children:e.jsxDEV(M,{placeholder:"Ex: Contact Rénovation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:254,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:249,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:248,columnNumber:15},void 0),e.jsxDEV(u,{span:12,children:e.jsxDEV(F.Item,{name:"category",label:"Catégorie",rules:[{required:!0,message:"Catégorie requise"}],children:e.jsxDEV(R,{placeholder:"Sélectionner une catégorie",children:[e.jsxDEV(R.Option,{value:"contact",children:"Contact général"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:264,columnNumber:21},void 0),e.jsxDEV(R.Option,{value:"devis",children:"Demande de devis"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:265,columnNumber:21},void 0),e.jsxDEV(R.Option,{value:"renovation",children:"Rénovation"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:266,columnNumber:21},void 0),e.jsxDEV(R.Option,{value:"construction",children:"Construction"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:267,columnNumber:21},void 0),e.jsxDEV(R.Option,{value:"plomberie",children:"Plomberie"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:268,columnNumber:21},void 0),e.jsxDEV(R.Option,{value:"electricite",children:"Électricité"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:269,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:263,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:258,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:257,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV(F.Item,{name:"description",label:"Description",children:e.jsxDEV(Y,{rows:2,placeholder:"Description du formulaire..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:276,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:275,columnNumber:13},void 0),e.jsxDEV(o,{gutter:16,children:[e.jsxDEV(u,{span:8,children:e.jsxDEV(F.Item,{name:"slug",label:"URL personnalisée",children:e.jsxDEV(M,{placeholder:"formulaire-contact",addonBefore:"devis1minute.be/form/"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:282,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:281,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:280,columnNumber:15},void 0),e.jsxDEV(u,{span:8,children:e.jsxDEV(F.Item,{name:"maxSubmissionsPerDay",label:"Limite/jour",children:e.jsxDEV(M,{type:"number",placeholder:"100"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:290,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:289,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:288,columnNumber:15},void 0),e.jsxDEV(u,{span:8,children:e.jsxDEV(F.Item,{name:"campaigns",label:"Campagnes associées",children:e.jsxDEV(R,{mode:"multiple",placeholder:"Sélectionner"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:295,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:294,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:293,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:279,columnNumber:13},void 0),e.jsxDEV(o,{gutter:16,children:[e.jsxDEV(u,{span:8,children:e.jsxDEV(F.Item,{name:"isActive",label:"Actif",valuePropName:"checked",children:e.jsxDEV(U,{checkedChildren:"Oui",unCheckedChildren:"Non"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:305,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:304,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:303,columnNumber:15},void 0),e.jsxDEV(u,{span:8,children:e.jsxDEV(F.Item,{name:"collectsRgpdConsent",label:"Consentement RGPD",valuePropName:"checked",children:e.jsxDEV(U,{checkedChildren:"Oui",unCheckedChildren:"Non"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:310,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:309,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:308,columnNumber:15},void 0),e.jsxDEV(u,{span:8,children:e.jsxDEV(F.Item,{name:"autoPublishLeads",label:"Publication auto",valuePropName:"checked",children:e.jsxDEV(U,{checkedChildren:"Oui",unCheckedChildren:"Non"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:315,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:314,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:313,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:302,columnNumber:13},void 0)]},"1",!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:246,columnNumber:11},void 0),e.jsxDEV(B,{tab:"Champs",children:[e.jsxDEV("div",{className:"mb-4",children:e.jsxDEV(l,{icon:e.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:323,columnNumber:29},void 0),onClick:()=>{const e={id:Date.now().toString(),name:`field_${b.length+1}`,label:"Nouveau champ",type:"text",required:!1,order:b.length+1};N([...b,e])},children:"Ajouter un champ"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:323,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:322,columnNumber:13},void 0),b.map((s,i)=>e.jsxDEV(a,{size:"small",className:"mb-4",children:e.jsxDEV(o,{gutter:16,children:[e.jsxDEV(u,{span:6,children:e.jsxDEV(M,{value:s.label,onChange:e=>D(i,{label:e.target.value}),placeholder:"Libellé du champ"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:332,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:331,columnNumber:19},void 0),e.jsxDEV(u,{span:4,children:e.jsxDEV(M,{value:s.name,onChange:e=>D(i,{name:e.target.value}),placeholder:"Nom technique"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:339,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:338,columnNumber:19},void 0),e.jsxDEV(u,{span:4,children:e.jsxDEV(R,{value:s.type,onChange:e=>D(i,{type:e}),style:{width:"100%"},children:[e.jsxDEV(R.Option,{value:"text",children:"Texte"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:351,columnNumber:23},void 0),e.jsxDEV(R.Option,{value:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:352,columnNumber:23},void 0),e.jsxDEV(R.Option,{value:"phone",children:"Téléphone"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:353,columnNumber:23},void 0),e.jsxDEV(R.Option,{value:"textarea",children:"Zone de texte"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:354,columnNumber:23},void 0),e.jsxDEV(R.Option,{value:"number",children:"Nombre"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:355,columnNumber:23},void 0),e.jsxDEV(R.Option,{value:"select",children:"Liste déroulante"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:356,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:346,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:345,columnNumber:19},void 0),e.jsxDEV(u,{span:6,children:e.jsxDEV(M,{value:s.placeholder,onChange:e=>D(i,{placeholder:e.target.value}),placeholder:"Texte d'aide"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:360,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:359,columnNumber:19},void 0),e.jsxDEV(u,{span:2,children:e.jsxDEV(U,{checked:s.required,onChange:e=>D(i,{required:e}),title:"Obligatoire"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:367,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:366,columnNumber:19},void 0),e.jsxDEV(u,{span:2,children:e.jsxDEV(l,{danger:!0,size:"small",icon:e.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:377,columnNumber:29},void 0),onClick:()=>(e=>{N(b.filter((s,i)=>i!==e))})(i),title:"Supprimer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:374,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:373,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:330,columnNumber:17},void 0)},s.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:329,columnNumber:15},void 0))]},"2",!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:321,columnNumber:11},void 0),e.jsxDEV(B,{tab:"Messages",children:[e.jsxDEV(F.Item,{name:"thankYouMessage",label:"Message de remerciement",children:e.jsxDEV(Y,{rows:3,placeholder:"Merci pour votre demande ! Nous vous recontacterons sous 24h."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:389,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:388,columnNumber:13},void 0),e.jsxDEV(F.Item,{name:"redirectUrl",label:"URL de redirection (optionnel)",children:e.jsxDEV(M,{placeholder:"https://votre-site.com/merci",prefix:e.jsxDEV(w,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:398,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:396,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:395,columnNumber:13},void 0),e.jsxDEV(F.Item,{name:"customCss",label:"CSS personnalisé",children:e.jsxDEV(Y,{rows:4,placeholder:"/* Votre CSS personnalisé */\n.form-container { background: #f5f5f5; }"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:403,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:402,columnNumber:13},void 0)]},"3",!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:387,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:245,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:244,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:229,columnNumber:5},void 0)};function H(){const{api:m}=i(),[F,O]=s.useState([]),[j,M]=s.useState({totalForms:0,activeForms:0,totalSubmissions:0,todaySubmissions:0,conversionRate:0,topPerformingForm:""}),[R,U]=s.useState([]),[y,w]=s.useState(!0),[$,Y]=s.useState(!1),[B,H]=s.useState(!1),[K,_]=s.useState(null),[J,Q]=s.useState(!1),[X,Z]=s.useState(!1),[W,ee]=s.useState(!1),se=s.useCallback(async()=>{try{w(!0);const[e,s]=await Promise.all([m.get("/api/public-forms"),m.get("/api/public-forms/stats")]);O(e),M(s)}catch(e){r.error("Impossible de charger les formulaires")}finally{w(!1)}},[m]),ie=s.useCallback(async e=>{try{const s=await m.get(`/api/public-forms/${e}/submissions`);U(s)}catch(s){r.error("Impossible de charger les soumissions")}},[m]);s.useEffect(()=>{se()},[se]);const re=s=>{switch(s){case"new":return e.jsxDEV(T,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:548,columnNumber:26},this);case"processed":return e.jsxDEV(d,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:549,columnNumber:32},this);case"spam":return e.jsxDEV(I,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:550,columnNumber:27},this);case"duplicate":return e.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:551,columnNumber:32},this);default:return e.jsxDEV(z,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:552,columnNumber:23},this)}},me=e=>{switch(e){case"new":return"blue";case"processed":return"green";case"spam":return"red";case"duplicate":return"orange";default:return"default"}},te=[{title:"Formulaire",key:"form",width:250,render:(s,i)=>e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold flex items-center gap-2",children:[i.name,i.isActive?e.jsxDEV(C,{status:"success",text:"Actif"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:576,columnNumber:15},this):e.jsxDEV(C,{status:"error",text:"Inactif"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:578,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:573,columnNumber:11},this),e.jsxDEV(L,{type:"secondary",className:"text-xs",children:[i.category," • ",i.submissionCount," soumissions"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:581,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV(L,{type:"secondary",className:"text-xs",children:["Créé ",h(i.createdAt).fromNow()]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:585,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:584,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:572,columnNumber:9},this)},{title:"URL",key:"url",width:200,render:(s,i)=>e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(L,{code:!0,className:"text-xs",children:i.publicUrl},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:599,columnNumber:13},this),e.jsxDEV(l,{size:"small",icon:e.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:602,columnNumber:21},this),onClick:()=>{return e=i.publicUrl,navigator.clipboard.writeText(e),void r.success("URL copiée !");var e},title:"Copier l'URL"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:600,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:598,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:e.jsxDEV(l,{size:"small",icon:e.jsxDEV(E,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:610,columnNumber:21},this),onClick:()=>window.open(i.publicUrl,"_blank"),title:"Ouvrir dans un nouvel onglet",children:"Voir"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:608,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:607,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:597,columnNumber:9},this)},{title:"Performance",key:"performance",width:120,render:(s,i)=>e.jsxDEV("div",{children:[e.jsxDEV(c,{title:"Soumissions",value:i.submissionCount,valueStyle:{fontSize:"16px",color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:626,columnNumber:11},this),e.jsxDEV(L,{className:"text-xs",children:["Conversion: ",i.conversionRate.toFixed(1),"%"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:631,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:625,columnNumber:9},this)},{title:"Dernière soumission",dataIndex:"lastSubmission",key:"lastSubmission",width:150,render:s=>s?e.jsxDEV("div",{children:[e.jsxDEV(L,{className:"text-xs",children:h(s).format("DD/MM/YYYY")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:645,columnNumber:13},this),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:648,columnNumber:13},this),e.jsxDEV(L,{type:"secondary",className:"text-xs",children:h(s).fromNow()},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:649,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:644,columnNumber:11},this):e.jsxDEV(L,{type:"secondary",className:"text-xs",children:"Aucune"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:654,columnNumber:11},this)},{title:"Actions",key:"actions",width:200,render:(s,i)=>e.jsxDEV(g,{children:[e.jsxDEV(V,{title:"Voir les soumissions",children:e.jsxDEV(l,{size:"small",icon:e.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:667,columnNumber:21},this),onClick:()=>{return _(e=i),ie(e.id),void Z(!0);var e}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:665,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:664,columnNumber:11},this),e.jsxDEV(V,{title:"Modifier",children:e.jsxDEV(l,{size:"small",icon:e.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:674,columnNumber:21},this),onClick:()=>{_(i),Q(!0),Y(!0)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:672,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:671,columnNumber:11},this),e.jsxDEV(V,{title:"Code d'intégration",children:e.jsxDEV(l,{size:"small",icon:e.jsxDEV(S,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:685,columnNumber:21},this),onClick:()=>{return e=i.embedCode,navigator.clipboard.writeText(e),void r.success("Code d'intégration copié !");var e}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:683,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:682,columnNumber:11},this),e.jsxDEV(V,{title:i.isActive?"Désactiver":"Activer",children:e.jsxDEV(l,{size:"small",type:i.isActive?"default":"primary",icon:i.isActive?e.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:693,columnNumber:39},this):e.jsxDEV(d,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:693,columnNumber:65},this),onClick:()=>(async e=>{try{await m.patch(`/api/public-forms/${e.id}/toggle`,{isActive:!e.isActive}),r.success(`Formulaire ${e.isActive?"désactivé":"activé"} !`),se()}catch(s){r.error("Erreur lors du changement de statut")}})(i)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:690,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:689,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:663,columnNumber:9},this)}],le=[{title:"Date",dataIndex:"submittedAt",key:"submittedAt",width:120,render:s=>e.jsxDEV("div",{children:e.jsxDEV(L,{className:"text-xs",children:h(s).format("DD/MM HH:mm")},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:710,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:709,columnNumber:9},this)},{title:"Contact",key:"contact",width:200,render:(s,i)=>e.jsxDEV("div",{children:[e.jsxDEV(L,{strong:!0,children:[i.data.firstName," ",i.data.lastName]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:722,columnNumber:11},this),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:725,columnNumber:11},this),e.jsxDEV(L,{type:"secondary",className:"text-xs",children:i.data.email},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:726,columnNumber:11},this),i.data.phone&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:731,columnNumber:15},this),e.jsxDEV(L,{type:"secondary",className:"text-xs",children:i.data.phone},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:732,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:730,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:721,columnNumber:9},this)},{title:"Message",dataIndex:"data",key:"message",width:250,render:s=>e.jsxDEV(L,{className:"text-xs",ellipsis:!0,children:s.message||s.description||"Pas de message"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:746,columnNumber:9},this)},{title:"Statut",dataIndex:"status",key:"status",width:100,render:s=>e.jsxDEV(A,{color:me(s),icon:re(s),children:"new"===s?"Nouveau":"processed"===s?"Traité":"spam"===s?"Spam":"duplicate"===s?"Doublon":s},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:757,columnNumber:9},this)},{title:"Lead",dataIndex:"leadId",key:"leadId",width:100,render:s=>s?e.jsxDEV(C,{status:"success",text:"Créé"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:772,columnNumber:11},this):e.jsxDEV(C,{status:"default",text:"Aucun"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:774,columnNumber:11},this)}];return e.jsxDEV("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(q,{level:2,className:"mb-0",children:[e.jsxDEV(t,{className:"mr-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:787,columnNumber:15},this),"Formulaires publics"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:786,columnNumber:13},this),e.jsxDEV(L,{type:"secondary",children:"Gérez vos formulaires de capture de leads"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:790,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:785,columnNumber:11},this),e.jsxDEV(l,{type:"primary",size:"large",icon:e.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:797,columnNumber:19},this),onClick:()=>{_(null),Q(!1),Y(!0)},children:"Nouveau formulaire"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:794,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:784,columnNumber:9},this),e.jsxDEV(o,{gutter:16,className:"mb-6",children:[e.jsxDEV(u,{span:6,children:e.jsxDEV(a,{children:e.jsxDEV(c,{title:"Formulaires totaux",value:j.totalForms,prefix:e.jsxDEV(t,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:815,columnNumber:25},this),valueStyle:{color:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:812,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:811,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:810,columnNumber:11},this),e.jsxDEV(u,{span:6,children:e.jsxDEV(a,{children:e.jsxDEV(c,{title:"Formulaires actifs",value:j.activeForms,prefix:e.jsxDEV(d,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:825,columnNumber:25},this),valueStyle:{color:"#52c41a"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:822,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:821,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:820,columnNumber:11},this),e.jsxDEV(u,{span:6,children:e.jsxDEV(a,{children:e.jsxDEV(c,{title:"Soumissions totales",value:j.totalSubmissions,prefix:e.jsxDEV(v,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:835,columnNumber:25},this),valueStyle:{color:"#722ed1"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:832,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:831,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:830,columnNumber:11},this),e.jsxDEV(u,{span:6,children:e.jsxDEV(a,{children:e.jsxDEV(c,{title:"Aujourd'hui",value:j.todaySubmissions,prefix:e.jsxDEV(b,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:845,columnNumber:25},this),valueStyle:{color:"#faad14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:842,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:841,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:840,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:809,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:783,columnNumber:7},this),0===F.length&&!y&&e.jsxDEV(N,{message:"Créez votre premier formulaire !",description:"Les formulaires publics vous permettent de capturer des leads directement depuis votre site web ou vos campagnes marketing.",type:"info",showIcon:!0,action:e.jsxDEV(l,{size:"small",type:"primary",onClick:()=>Y(!0),children:"Commencer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:861,columnNumber:13},this),className:"mb-6"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:855,columnNumber:9},this),e.jsxDEV(a,{children:e.jsxDEV(D,{columns:te,dataSource:F,rowKey:"id",loading:y,pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`${e} formulaires au total`},scroll:{x:1e3},size:"middle"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:875,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:874,columnNumber:7},this),e.jsxDEV(G,{visible:$,onCancel:()=>{Y(!1),_(null),Q(!1)},onSubmit:J?async e=>{var s,i;if(K){H(!0);try{await m.put(`/api/public-forms/${K.id}`,e),r.success("Formulaire mis à jour avec succès !"),Y(!1),_(null),Q(!1),se()}catch(t){const e=t instanceof Error&&"response"in t?null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message:"Erreur lors de la mise à jour du formulaire";r.error(e)}finally{H(!1)}}}:async e=>{var s,i;H(!0);try{await m.post("/api/public-forms",e),r.success("Formulaire créé avec succès !"),Y(!1),se()}catch(t){const e=t instanceof Error&&"response"in t?null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message:"Erreur lors de la création du formulaire";r.error(e)}finally{H(!1)}},loading:B,form:K||void 0,isEdit:J},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:892,columnNumber:7},this),e.jsxDEV(p,{title:e.jsxDEV(g,{children:[e.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:909,columnNumber:13},this),"Soumissions: ",null==K?void 0:K.name]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:908,columnNumber:11},this),width:800,open:X,onClose:()=>{Z(!1),_(null),U([])},children:K&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{gutter:16,children:[e.jsxDEV(u,{span:8,children:e.jsxDEV(a,{size:"small",children:e.jsxDEV(c,{title:"Total soumissions",value:K.submissionCount,valueStyle:{fontSize:"20px"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:926,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:925,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:924,columnNumber:15},this),e.jsxDEV(u,{span:8,children:e.jsxDEV(a,{size:"small",children:e.jsxDEV(c,{title:"Taux conversion",value:K.conversionRate,suffix:"%",precision:1,valueStyle:{fontSize:"20px"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:935,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:934,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:933,columnNumber:15},this),e.jsxDEV(u,{span:8,children:e.jsxDEV(a,{size:"small",children:e.jsxDEV(c,{title:"Dernière soumission",value:K.lastSubmission?h(K.lastSubmission).fromNow():"Aucune",valueStyle:{fontSize:"14px"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:946,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:945,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:944,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:923,columnNumber:13},this),e.jsxDEV(D,{columns:le,dataSource:R,rowKey:"id",pagination:{pageSize:50,showSizeChanger:!1},size:"small"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:955,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:922,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:906,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PublicFormsPage.tsx",lineNumber:781,columnNumber:5},this)}export{H as default};
