import{u as e,j as s}from"./index-C0S0DpaX.js";import{r as i}from"./react-vendor-Al_k-ZB6.js";import{u as o}from"./useAuthenticatedApi-BbQI8SDU.js";import{P as r}from"./PageHeader-DUoI2t5o.js";import{S as t}from"./StatCard-B8B2qUBz.js";import{B as a,bm as n,O as l,af as m,H as c,R as u,a as d,T as g,I as v,h as p,a2 as V,aG as D,be as N,s as x}from"./antd-vendor-zFcGztvE.js";const{Title:b}=g,{Search:A}=v,C=()=>{const[g,v]=i.useState([]),[C,E]=i.useState(!0),[y,h]=i.useState({totalViews:0,totalVisitors:0,mostViewedPage:""}),[f,P]=i.useState(""),{api:S}=o(),{user:j}=e(),k=async()=>{E(!0);try{const e=[{id:"1",page:"/accueil",views:1250,uniqueVisitors:800,avgTimeOnPage:180},{id:"2",page:"/produits",views:980,uniqueVisitors:650,avgTimeOnPage:240},{id:"3",page:"/contact",views:450,uniqueVisitors:300,avgTimeOnPage:90}];v(e),O(e)}catch(e){x.error("Erreur lors de la récupération des données Google Analytics.")}finally{E(!1)}};i.useEffect(()=>{j&&k()},[j]);const O=e=>{const s=e.reduce((e,s)=>e+s.views,0),i=e.reduce((e,s)=>e+s.uniqueVisitors,0),o=e.reduce((e,s)=>e.views>s.views?e:s).page;h({totalViews:s,totalVisitors:i,mostViewedPage:o})},G=i.useMemo(()=>g.filter(e=>e.page.toLowerCase().includes(f.toLowerCase())),[g,f]);return s.jsxDEV("div",{children:[s.jsxDEV(r,{title:"Google Analytics",icon:s.jsxDEV(l,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:110,columnNumber:15},void 0),subtitle:"Analysez les performances de votre site web.",actions:s.jsxDEV(s.Fragment,{children:[s.jsxDEV(a,{type:"primary",onClick:()=>window.open("https://analytics.google.com","_blank"),children:"Voir le tableau de bord complet"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:114,columnNumber:13},void 0),s.jsxDEV(a,{icon:s.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:117,columnNumber:27},void 0),onClick:k,loading:C,children:"Synchroniser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:117,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:113,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:108,columnNumber:7},void 0),s.jsxDEV(m,{gutter:16,style:{marginBottom:24},children:[s.jsxDEV(t,{icon:s.jsxDEV(c,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:125,columnNumber:25},void 0),title:"Vues totales",value:y.totalViews,loading:C},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:125,columnNumber:9},void 0),s.jsxDEV(t,{icon:s.jsxDEV(u,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:126,columnNumber:25},void 0),title:"Visiteurs uniques",value:y.totalVisitors,loading:C},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:126,columnNumber:9},void 0),s.jsxDEV(t,{icon:s.jsxDEV("i",{className:"fas fa-file"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:127,columnNumber:25},void 0),title:"Page la plus vue",value:y.mostViewedPage,loading:C},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:127,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:124,columnNumber:7},void 0),s.jsxDEV(d,{children:[s.jsxDEV(b,{level:4,children:"Données par page"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:131,columnNumber:9},void 0),s.jsxDEV(A,{placeholder:"Rechercher une page...",onChange:e=>P(e.target.value),style:{marginBottom:20,width:300},enterButton:s.jsxDEV(p,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:136,columnNumber:24},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:132,columnNumber:9},void 0),s.jsxDEV(V,{spinning:C,children:s.jsxDEV(D,{columns:[{title:"Page",dataIndex:"page",key:"page"},{title:"Vues",dataIndex:"views",key:"views",sorter:(e,s)=>e.views-s.views},{title:"Visiteurs uniques",dataIndex:"uniqueVisitors",key:"uniqueVisitors",sorter:(e,s)=>e.uniqueVisitors-s.uniqueVisitors},{title:"Temps moyen (min)",dataIndex:"avgTimeOnPage",key:"avgTimeOnPage",render:e=>(e/60).toFixed(2)}],dataSource:G,rowKey:"id",pagination:{pageSize:10},locale:{emptyText:s.jsxDEV(N,{description:"Aucune donnée trouvée."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:144,columnNumber:34},void 0)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:139,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:138,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:130,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleAnalyticsPage.tsx",lineNumber:107,columnNumber:5},void 0)};export{C as GoogleAnalyticsPage,C as default};
