import{u as e,j as s}from"./index-C0S0DpaX.js";import{r as i,R as r}from"./react-vendor-Al_k-ZB6.js";import{u as o}from"./useAuthenticatedApi-BbQI8SDU.js";import{P as a}from"./PageHeader-DUoI2t5o.js";import{S as t}from"./StatCard-B8B2qUBz.js";import{s as l,B as n,aF as c,bm as m,P as d,af as p,cK as u,j as g,ap as v,a as D,T as N,I as C,h as x,a2 as V,aG as b,be as M,ab as h}from"./antd-vendor-zFcGztvE.js";const{Title:E}=N,{Search:S}=C,f=()=>{const[N,C]=i.useState([]),[f,P]=i.useState(!0),[k,j]=i.useState({totalPlaces:0,clientPlaces:0,prospectPlaces:0}),[A,y]=i.useState(""),[R,G]=l.useMessage();o();const{user:O}=e(),U=r.useCallback(async()=>{P(!0);try{const e=[{id:"1",name:"TechCorp",address:"123 Rue de la Tech, Paris",type:"client",lastVisit:(new Date).toISOString()},{id:"2",name:"Innov S.A.",address:"456 Avenue de l'Innovation, Lyon",type:"prospect",lastVisit:new Date(Date.now()-864e5).toISOString()},{id:"3",name:"Bureau",address:"789 Boulevard du Travail, Marseille",type:"personnel",lastVisit:(new Date).toISOString()}];C(e),w(e)}catch(e){R.error("Erreur lors de la récupération des lieux Google Maps.")}finally{P(!1)}},[R]);i.useEffect(()=>{O&&U()},[O,U]);const w=e=>{j({totalPlaces:e.length,clientPlaces:e.filter(e=>"client"===e.type).length,prospectPlaces:e.filter(e=>"prospect"===e.type).length})},I=i.useMemo(()=>N.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())||e.address.toLowerCase().includes(A.toLowerCase())),[N,A]),L=[{title:"Nom",dataIndex:"name",key:"name"},{title:"Adresse",dataIndex:"address",key:"address"},{title:"Type",dataIndex:"type",key:"type",render:e=>{let i="default";return"client"===e&&(i="success"),"prospect"===e&&(i="processing"),s.jsxDEV(h,{color:i,children:e.charAt(0).toUpperCase()+e.slice(1)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:97,columnNumber:16},void 0)}},{title:"Dernière visite",dataIndex:"lastVisit",key:"lastVisit",render:e=>new Date(e).toLocaleDateString()},{title:"Actions",key:"actions",render:(e,i)=>s.jsxDEV(n,{type:"primary",onClick:()=>window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(i.address)}`,"_blank"),children:"Voir sur la carte"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:110,columnNumber:9},void 0)}];return s.jsxDEV("div",{children:[G,s.jsxDEV(a,{title:"Google Maps",icon:s.jsxDEV(d,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:122,columnNumber:15},void 0),subtitle:"Visualisez et gérez vos lieux importants.",actions:s.jsxDEV(s.Fragment,{children:[s.jsxDEV(n,{icon:s.jsxDEV(c,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:126,columnNumber:27},void 0),type:"primary",onClick:()=>R.info("Fonctionnalité à venir."),children:"Ajouter un lieu"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:126,columnNumber:13},void 0),s.jsxDEV(n,{icon:s.jsxDEV(m,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:129,columnNumber:27},void 0),onClick:U,loading:f,children:"Synchroniser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:129,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:125,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:120,columnNumber:7},void 0),s.jsxDEV(p,{gutter:16,style:{marginBottom:24},children:[s.jsxDEV(t,{icon:s.jsxDEV(u,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:137,columnNumber:25},void 0),title:"Lieux enregistrés",value:k.totalPlaces,loading:f},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:137,columnNumber:9},void 0),s.jsxDEV(t,{icon:s.jsxDEV(g,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:138,columnNumber:25},void 0),title:"Clients",value:k.clientPlaces,loading:f},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:138,columnNumber:9},void 0),s.jsxDEV(t,{icon:s.jsxDEV(v,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:139,columnNumber:25},void 0),title:"Prospects",value:k.prospectPlaces,loading:f},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:139,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:136,columnNumber:7},void 0),s.jsxDEV(D,{children:[s.jsxDEV(E,{level:4,children:"Liste des lieux"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:143,columnNumber:9},void 0),s.jsxDEV(S,{placeholder:"Rechercher un lieu...",onChange:e=>y(e.target.value),style:{marginBottom:20,width:300},enterButton:s.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:148,columnNumber:24},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:144,columnNumber:9},void 0),s.jsxDEV(V,{spinning:f,children:s.jsxDEV(b,{columns:L,dataSource:I,rowKey:"id",pagination:{pageSize:10},locale:{emptyText:s.jsxDEV(M,{description:"Aucun lieu trouvé."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:156,columnNumber:34},void 0)}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:151,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:142,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMapsPage.tsx",lineNumber:118,columnNumber:5},void 0)};export{f as GoogleMapsPage,f as default};
