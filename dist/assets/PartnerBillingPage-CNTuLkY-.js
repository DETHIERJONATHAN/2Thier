import{j as e}from"./index-C0S0DpaX.js";import{r as i}from"./react-vendor-Al_k-ZB6.js";import{u as r}from"./useAuthenticatedApi-BbQI8SDU.js";import{s,T as t,b_ as n,B as l,bY as a,af as m,ag as c,a as d,aj as o,a6 as u,b as v,ak as g,ad as N,aG as p,aX as D,am as h,a8 as b,ab as x,$ as C,a7 as P,bo as E,x as V,a0 as f,cp as k,by as S,aJ as A,al as j,a4 as U,a3 as M}from"./antd-vendor-zFcGztvE.js";import"./fr-BNlagHuH.js";D.locale("fr");const{Title:B,Text:R}=t,O=({visible:r,onCancel:t,onConfirm:l,loading:m,packs:c})=>{const[o,u]=i.useState(""),[N,p]=i.useState("card"),D=c.find(e=>e.id===o);return e.jsxDEV(f,{title:e.jsxDEV(C,{children:[e.jsxDEV(a,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:105,columnNumber:11},void 0),"Acheter des crédits"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:104,columnNumber:9},void 0),open:r,onCancel:t,onOk:()=>{o?l(o,N):s.error("Veuillez sélectionner un pack de crédits")},confirmLoading:m,okText:"Procéder au paiement",cancelText:"Annuler",width:800,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(v,{message:"Choisissez votre pack de crédits",description:"Plus vous achetez, plus vous économisez ! Les crédits n'expirent jamais.",type:"info",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:118,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(i=>e.jsxDEV(d,{className:`cursor-pointer transition-all duration-200 ${o===i.id?"border-blue-500 bg-blue-50 shadow-md":"hover:border-gray-400"} ${i.popular?"border-orange-500":""}`,onClick:()=>u(i.id),children:[i.popular&&e.jsxDEV("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:e.jsxDEV(b,{count:"POPULAIRE",style:{backgroundColor:"#f56a00"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:138,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(B,{level:4,className:"mb-2",children:[i.name,i.bonus&&e.jsxDEV(x,{color:"gold",className:"ml-2",icon:e.jsxDEV(k,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:146,columnNumber:62},void 0),children:["+",i.bonus," bonus"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:146,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:143,columnNumber:17},void 0),e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV(R,{className:"text-3xl font-bold text-blue-600",children:i.credits+(i.bonus||0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:153,columnNumber:19},void 0),e.jsxDEV(R,{className:"text-lg text-gray-500 ml-2",children:"crédits"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:156,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:152,columnNumber:17},void 0),e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV(R,{className:"text-2xl font-bold",children:[i.price.toFixed(2),"€"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:160,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-sm text-gray-500",children:[i.pricePerCredit.toFixed(3),"€/crédit",i.savings&&e.jsxDEV("div",{className:"text-green-600 font-semibold",children:["Économie: ",i.savings,"%"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:166,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:163,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:159,columnNumber:17},void 0),e.jsxDEV(R,{type:"secondary",className:"text-xs",children:i.description},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:173,columnNumber:17},void 0),e.jsxDEV(S,{checked:o===i.id,className:"mt-3",children:"Sélectionner"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:177,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:142,columnNumber:15},void 0)]},i.id,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:127,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:125,columnNumber:9},void 0),D&&e.jsxDEV(d,{className:"bg-gray-50",children:[e.jsxDEV(B,{level:5,children:"Récapitulatif"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:190,columnNumber:13},void 0),e.jsxDEV(A,{size:"small",column:2,children:[e.jsxDEV(A.Item,{label:"Pack sélectionné",children:D.name},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:192,columnNumber:15},void 0),e.jsxDEV(A.Item,{label:"Crédits",children:D.credits+(D.bonus||0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:195,columnNumber:15},void 0),e.jsxDEV(A.Item,{label:"Prix",children:[D.price.toFixed(2),"€"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:198,columnNumber:15},void 0),e.jsxDEV(A.Item,{label:"Prix par crédit",children:[D.pricePerCredit.toFixed(3),"€"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:191,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:189,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{level:5,children:"Méthode de paiement"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:209,columnNumber:11},void 0),e.jsxDEV(S.Group,{value:N,onChange:e=>p(e.target.value),children:e.jsxDEV(C,{direction:"vertical",children:[e.jsxDEV(S,{value:"card",children:e.jsxDEV(C,{children:[e.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:217,columnNumber:19},void 0),"Carte bancaire (Stripe)"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:216,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:215,columnNumber:15},void 0),e.jsxDEV(S,{value:"paypal",children:e.jsxDEV(C,{children:[e.jsxDEV(g,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:223,columnNumber:19},void 0),"PayPal"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:222,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:221,columnNumber:15},void 0),e.jsxDEV(S,{value:"transfer",children:e.jsxDEV(C,{children:[e.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:229,columnNumber:19},void 0),"Virement bancaire (traitement sous 1-2 jours)"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:228,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:227,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:214,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:210,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:208,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:117,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:102,columnNumber:5},void 0)};function y(){const{api:t}=r(),[f,k]=i.useState({currentBalance:0,totalPurchased:0,totalSpent:0,pendingCredits:0}),[S,A]=i.useState([]),[y,w]=i.useState([]),[z,I]=i.useState(!0),[F,T]=i.useState(!1),[L,$]=i.useState(!1),Y=i.useCallback(async()=>{try{I(!0);const[e,i,r]=await Promise.all([t.get("/api/partner/credits/balance"),t.get("/api/partner/invoices"),t.get("/api/partner/credits/packs")]);k(e),A(i),w(r)}catch(e){s.error("Impossible de charger les données de facturation")}finally{I(!1)}},[t]);i.useEffect(()=>{Y()},[Y]);const G=e=>{switch(e){case"paid":return"green";case"pending":return"orange";case"failed":return"red";default:return"default"}},q=e=>{switch(e){case"paid":return"Payée";case"pending":return"En attente";case"failed":return"Échec";case"cancelled":return"Annulée";default:return e}},J=i=>{switch(i){case"paid":return e.jsxDEV(M,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:353,columnNumber:27},this);case"pending":return e.jsxDEV(j,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:354,columnNumber:30},this);case"failed":return e.jsxDEV(U,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:355,columnNumber:29},this);default:return e.jsxDEV(j,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:356,columnNumber:23},this)}},H=(i=>i>=1e4?{level:"Platine",color:"#722ed1",icon:e.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:362,columnNumber:81},this)}:i>=5e3?{level:"Or",color:"#faad14",icon:e.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:363,columnNumber:75},this)}:i>=1e3?{level:"Argent",color:"#52c41a",icon:e.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:364,columnNumber:79},this)}:{level:"Bronze",color:"#8c8c8c",icon:e.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:365,columnNumber:55},this)})(f.totalSpent),K=f.totalSpent<1e3?1e3:f.totalSpent<5e3?5e3:1e4,Q=Math.min(f.totalSpent/K*100,100),X=[{title:"Facture",dataIndex:"number",key:"number",width:150,render:i=>e.jsxDEV(R,{code:!0,className:"font-semibold",children:i},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:380,columnNumber:9},this)},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:120,sorter:(e,i)=>D(e.createdAt).unix()-D(i.createdAt).unix(),render:e=>D(e).format("DD/MM/YYYY")},{title:"Crédits",dataIndex:"credits",key:"credits",width:100,render:i=>e.jsxDEV(b,{count:i,style:{backgroundColor:"#1890ff"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:399,columnNumber:9},this)},{title:"Montant",dataIndex:"amount",key:"amount",width:120,render:i=>e.jsxDEV(R,{strong:!0,className:"text-green-600",children:[i.toFixed(2),"€"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:408,columnNumber:9},this)},{title:"Statut",dataIndex:"status",key:"status",width:120,filters:[{text:"Payée",value:"paid"},{text:"En attente",value:"pending"},{text:"Échec",value:"failed"},{text:"Annulée",value:"cancelled"}],onFilter:(e,i)=>i.status===e,render:i=>e.jsxDEV(x,{color:G(i),icon:J(i),children:q(i)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:426,columnNumber:9},this)},{title:"Paiement",dataIndex:"paymentMethod",key:"paymentMethod",width:120,render:i=>{const r={card:{text:"Carte",icon:e.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:438,columnNumber:42},this)},paypal:{text:"PayPal",icon:e.jsxDEV(g,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:439,columnNumber:45},this)},transfer:{text:"Virement",icon:e.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:440,columnNumber:49},this)}}[i]||{text:i,icon:null};return e.jsxDEV(C,{children:[r.icon,r.text]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:444,columnNumber:11},this)}},{title:"Actions",key:"actions",width:100,render:(i,r)=>e.jsxDEV(C,{children:"paid"===r.status&&e.jsxDEV(P,{title:"Télécharger la facture",children:e.jsxDEV(l,{size:"small",icon:e.jsxDEV(E,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:461,columnNumber:23},this),onClick:()=>(async e=>{try{const i=await t.get(`/api/partner/invoices/${e}/download`,{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([i])),s=document.createElement("a");s.href=r,s.setAttribute("download",`facture-${e}.pdf`),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}catch(i){s.error("Impossible de télécharger la facture")}})(r.id)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:459,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:458,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:456,columnNumber:9},this)}];return e.jsxDEV("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV("div",{className:"flex justify-between items-start mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{level:2,className:"mb-0",children:[e.jsxDEV(n,{className:"mr-2"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:478,columnNumber:15},this),"Crédits & Facturation"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:477,columnNumber:13},this),e.jsxDEV(R,{type:"secondary",children:"Gérez vos crédits et consultez vos factures"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:481,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:476,columnNumber:11},this),e.jsxDEV(l,{type:"primary",size:"large",icon:e.jsxDEV(a,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:488,columnNumber:19},this),onClick:()=>T(!0),children:"Acheter des crédits"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:485,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:475,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:474,columnNumber:7},this),e.jsxDEV(m,{gutter:16,className:"mb-6",children:[e.jsxDEV(c,{span:6,children:e.jsxDEV(d,{children:[e.jsxDEV(o,{title:"Crédits disponibles",value:f.currentBalance,precision:0,valueStyle:{color:f.currentBalance<10?"#cf1322":"#3f8600",fontSize:"2rem"},prefix:e.jsxDEV(u,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:508,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:500,columnNumber:13},this),f.currentBalance<10&&e.jsxDEV(v,{message:"Solde faible",description:"Pensez à recharger vos crédits",type:"warning",size:"small",className:"mt-2",showIcon:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:511,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:499,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:498,columnNumber:9},this),e.jsxDEV(c,{span:6,children:e.jsxDEV(d,{children:e.jsxDEV(o,{title:"Total acheté",value:f.totalPurchased,precision:0,valueStyle:{color:"#1890ff"},prefix:e.jsxDEV(a,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:529,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:524,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:523,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:522,columnNumber:9},this),e.jsxDEV(c,{span:6,children:e.jsxDEV(d,{children:e.jsxDEV(o,{title:"Total dépensé",value:f.totalSpent,precision:0,valueStyle:{color:"#722ed1"},prefix:e.jsxDEV(g,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:540,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:535,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:534,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:533,columnNumber:9},this),e.jsxDEV(c,{span:6,children:e.jsxDEV(d,{children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[H.icon,e.jsxDEV(R,{strong:!0,className:"ml-2",style:{color:H.color},children:["Niveau ",H.level]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:549,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:547,columnNumber:15},this),f.totalSpent<1e4&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(N,{percent:Q,size:"small",strokeColor:H.color,className:"mb-1"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:555,columnNumber:19},this),e.jsxDEV(R,{type:"secondary",className:"text-xs",children:[(K-f.totalSpent).toFixed(0),"€ pour le niveau suivant"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:561,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:554,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:546,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:545,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:544,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:497,columnNumber:7},this),f.pendingCredits>0&&e.jsxDEV(v,{message:"Crédits en attente",description:`${f.pendingCredits} crédits seront ajoutés à votre compte dès réception du paiement.`,type:"info",showIcon:!0,className:"mb-6"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:572,columnNumber:9},this),e.jsxDEV(d,{title:"Historique des factures",children:e.jsxDEV(p,{columns:X,dataSource:S,rowKey:"id",loading:z,pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`${e} factures au total`},scroll:{x:800},size:"middle"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:583,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:582,columnNumber:7},this),e.jsxDEV(O,{visible:F,onCancel:()=>T(!1),onConfirm:async(e,i)=>{var r,n;$(!0);try{const r=await t.post("/api/partner/credits/purchase",{packId:e,paymentMethod:i});"card"===i&&r.checkoutUrl?window.location.href=r.checkoutUrl:"paypal"===i&&r.approvalUrl?window.location.href=r.approvalUrl:(s.success("Commande enregistrée ! Vous recevrez les instructions de paiement par email."),T(!1),Y())}catch(l){const e=l instanceof Error&&"response"in l?null==(n=null==(r=l.response)?void 0:r.data)?void 0:n.message:"Erreur lors de l'achat de crédits";s.error(e)}finally{$(!1)}},loading:L,packs:y},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:600,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/devis1minute/PartnerBillingPage.tsx",lineNumber:472,columnNumber:5},this)}export{y as default};
