import{j as e}from"./index-C0S0DpaX.js";import{r as t}from"./react-vendor-Al_k-ZB6.js";import{u as i}from"./useAuthenticatedApi-BbQI8SDU.js";import{P as r}from"./PageHeader-DUoI2t5o.js";import{a as o,bf as a,T as s,b as n,B as l,bl as c,s as m,F as d,aZ as u,a4 as p,b5 as g,g as f,x as N,aQ as b,bn as h,a5 as v,cj as x,L as D,a7 as E,az as C,b7 as y,D as A,a0 as M,an as S,I as w,cF as R,be as k,aA as _,$ as T,cG as O,cf as V,b3 as U,a_ as P,b9 as j}from"./antd-vendor-zFcGztvE.js";
/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:F,setPrototypeOf:G,isFrozen:I,getPrototypeOf:L,getOwnPropertyDescriptor:z}=Object;let{freeze:H,seal:B,create:W}=Object,{apply:$,construct:Y}="undefined"!=typeof Reflect&&Reflect;H||(H=function(e){return e}),B||(B=function(e){return e}),$||($=function(e,t,i){return e.apply(t,i)}),Y||(Y=function(e,t){return new e(...t)});const q=ce(Array.prototype.forEach),X=ce(Array.prototype.lastIndexOf),K=ce(Array.prototype.pop),Z=ce(Array.prototype.push),Q=ce(Array.prototype.splice),J=ce(String.prototype.toLowerCase),ee=ce(String.prototype.toString),te=ce(String.prototype.match),ie=ce(String.prototype.replace),re=ce(String.prototype.indexOf),oe=ce(String.prototype.trim),ae=ce(Object.prototype.hasOwnProperty),se=ce(RegExp.prototype.test),ne=(le=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Y(le,t)});var le;function ce(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return $(e,t,r)}}function me(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J;G&&G(e,null);let r=t.length;for(;r--;){let o=t[r];if("string"==typeof o){const e=i(o);e!==o&&(I(t)||(t[r]=e),o=e)}e[o]=!0}return e}function de(e){for(let t=0;t<e.length;t++){ae(e,t)||(e[t]=null)}return e}function ue(e){const t=W(null);for(const[i,r]of F(e)){ae(e,i)&&(Array.isArray(r)?t[i]=de(r):r&&"object"==typeof r&&r.constructor===Object?t[i]=ue(r):t[i]=r)}return t}function pe(e,t){for(;null!==e;){const i=z(e,t);if(i){if(i.get)return ce(i.get);if("function"==typeof i.value)return ce(i.value)}e=L(e)}return function(){return null}}const ge=H(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fe=H(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ne=H(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),be=H(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),he=H(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ve=H(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xe=H(["#text"]),De=H(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ee=H(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ce=H(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ye=H(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ae=B(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Me=B(/<%[\w\W]*|[\w\W]*%>/gm),Se=B(/\$\{[\w\W]*/gm),we=B(/^data-[\-\w.\u00B7-\uFFFF]+$/),Re=B(/^aria-[\-\w]+$/),ke=B(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_e=B(/^(?:\w+script|data):/i),Te=B(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Oe=B(/^html$/i),Ve=B(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ue=Object.freeze({__proto__:null,ARIA_ATTR:Re,ATTR_WHITESPACE:Te,CUSTOM_ELEMENT:Ve,DATA_ATTR:we,DOCTYPE_NAME:Oe,ERB_EXPR:Me,IS_ALLOWED_URI:ke,IS_SCRIPT_OR_DATA:_e,MUSTACHE_EXPR:Ae,TMPLIT_EXPR:Se});const Pe=1,je=3,Fe=7,Ge=8,Ie=9;var Le=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const i=t=>e(t);if(i.version="3.2.6",i.removed=[],!t||!t.document||t.document.nodeType!==Ie||!t.Element)return i.isSupported=!1,i;let{document:r}=t;const o=r,a=o.currentScript,{DocumentFragment:s,HTMLTemplateElement:n,Node:l,Element:c,NodeFilter:m,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:p,trustedTypes:g}=t,f=c.prototype,N=pe(f,"cloneNode"),b=pe(f,"remove"),h=pe(f,"nextSibling"),v=pe(f,"childNodes"),x=pe(f,"parentNode");if("function"==typeof n){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let D,E="";const{implementation:C,createNodeIterator:y,createDocumentFragment:A,getElementsByTagName:M}=r,{importNode:S}=o;let w={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};i.isSupported="function"==typeof F&&"function"==typeof x&&C&&void 0!==C.createHTMLDocument;const{MUSTACHE_EXPR:R,ERB_EXPR:k,TMPLIT_EXPR:_,DATA_ATTR:T,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:U,CUSTOM_ELEMENT:P}=Ue;let{IS_ALLOWED_URI:j}=Ue,G=null;const I=me({},[...ge,...fe,...Ne,...he,...xe]);let L=null;const z=me({},[...De,...Ee,...Ce,...ye]);let B=Object.seal(W(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,Y=null,le=!0,ce=!0,de=!1,Ae=!0,Me=!1,Se=!0,we=!1,Re=!1,_e=!1,Te=!1,Ve=!1,Le=!1,ze=!0,He=!1,Be=!0,We=!1,$e={},Ye=null;const qe=me({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Xe=null;const Ke=me({},["audio","video","img","source","image","track"]);let Ze=null;const Qe=me({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",et="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml";let it=tt,rt=!1,ot=null;const at=me({},[Je,et,tt],ee);let st=me({},["mi","mo","mn","ms","mtext"]),nt=me({},["annotation-xml"]);const lt=me({},["title","style","font","a","script"]);let ct=null;const mt=["application/xhtml+xml","text/html"];let dt=null,ut=null;const pt=r.createElement("form"),gt=function(e){return e instanceof RegExp||e instanceof Function},ft=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ut||ut!==e){if(e&&"object"==typeof e||(e={}),e=ue(e),ct=-1===mt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,dt="application/xhtml+xml"===ct?ee:J,G=ae(e,"ALLOWED_TAGS")?me({},e.ALLOWED_TAGS,dt):I,L=ae(e,"ALLOWED_ATTR")?me({},e.ALLOWED_ATTR,dt):z,ot=ae(e,"ALLOWED_NAMESPACES")?me({},e.ALLOWED_NAMESPACES,ee):at,Ze=ae(e,"ADD_URI_SAFE_ATTR")?me(ue(Qe),e.ADD_URI_SAFE_ATTR,dt):Qe,Xe=ae(e,"ADD_DATA_URI_TAGS")?me(ue(Ke),e.ADD_DATA_URI_TAGS,dt):Ke,Ye=ae(e,"FORBID_CONTENTS")?me({},e.FORBID_CONTENTS,dt):qe,$=ae(e,"FORBID_TAGS")?me({},e.FORBID_TAGS,dt):ue({}),Y=ae(e,"FORBID_ATTR")?me({},e.FORBID_ATTR,dt):ue({}),$e=!!ae(e,"USE_PROFILES")&&e.USE_PROFILES,le=!1!==e.ALLOW_ARIA_ATTR,ce=!1!==e.ALLOW_DATA_ATTR,de=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Me=e.SAFE_FOR_TEMPLATES||!1,Se=!1!==e.SAFE_FOR_XML,we=e.WHOLE_DOCUMENT||!1,Te=e.RETURN_DOM||!1,Ve=e.RETURN_DOM_FRAGMENT||!1,Le=e.RETURN_TRUSTED_TYPE||!1,_e=e.FORCE_BODY||!1,ze=!1!==e.SANITIZE_DOM,He=e.SANITIZE_NAMED_PROPS||!1,Be=!1!==e.KEEP_CONTENT,We=e.IN_PLACE||!1,j=e.ALLOWED_URI_REGEXP||ke,it=e.NAMESPACE||tt,st=e.MATHML_TEXT_INTEGRATION_POINTS||st,nt=e.HTML_INTEGRATION_POINTS||nt,B=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(B.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Me&&(ce=!1),Ve&&(Te=!0),$e&&(G=me({},xe),L=[],!0===$e.html&&(me(G,ge),me(L,De)),!0===$e.svg&&(me(G,fe),me(L,Ee),me(L,ye)),!0===$e.svgFilters&&(me(G,Ne),me(L,Ee),me(L,ye)),!0===$e.mathMl&&(me(G,he),me(L,Ce),me(L,ye))),e.ADD_TAGS&&(G===I&&(G=ue(G)),me(G,e.ADD_TAGS,dt)),e.ADD_ATTR&&(L===z&&(L=ue(L)),me(L,e.ADD_ATTR,dt)),e.ADD_URI_SAFE_ATTR&&me(Ze,e.ADD_URI_SAFE_ATTR,dt),e.FORBID_CONTENTS&&(Ye===qe&&(Ye=ue(Ye)),me(Ye,e.FORBID_CONTENTS,dt)),Be&&(G["#text"]=!0),we&&me(G,["html","head","body"]),G.table&&(me(G,["tbody"]),delete $.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw ne('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw ne('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=e.TRUSTED_TYPES_POLICY,E=D.createHTML("")}else void 0===D&&(D=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(i=t.getAttribute(r));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(a){return null}}(g,a)),null!==D&&"string"==typeof E&&(E=D.createHTML(""));H&&H(e),ut=e}},Nt=me({},[...fe,...Ne,...be]),bt=me({},[...he,...ve]),ht=function(e){Z(i.removed,{element:e});try{x(e).removeChild(e)}catch(t){b(e)}},vt=function(e,t){try{Z(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){Z(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Te||Ve)try{ht(t)}catch(r){}else try{t.setAttribute(e,"")}catch(r){}},xt=function(e){let t=null,i=null;if(_e)e="<remove></remove>"+e;else{const t=te(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===ct&&it===tt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const o=D?D.createHTML(e):e;if(it===tt)try{t=(new p).parseFromString(o,ct)}catch(s){}if(!t||!t.documentElement){t=C.createDocument(it,"template",null);try{t.documentElement.innerHTML=rt?E:o}catch(s){}}const a=t.body||t.documentElement;return e&&i&&a.insertBefore(r.createTextNode(i),a.childNodes[0]||null),it===tt?M.call(t,we?"html":"body")[0]:we?t.documentElement:a},Dt=function(e){return y.call(e.ownerDocument||e,e,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},Et=function(e){return e instanceof u&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Ct=function(e){return"function"==typeof l&&e instanceof l};function yt(e,t,r){q(e,e=>{e.call(i,t,r,ut)})}const At=function(e){let t=null;if(yt(w.beforeSanitizeElements,e,null),Et(e))return ht(e),!0;const r=dt(e.nodeName);if(yt(w.uponSanitizeElement,e,{tagName:r,allowedTags:G}),Se&&e.hasChildNodes()&&!Ct(e.firstElementChild)&&se(/<[/\w!]/g,e.innerHTML)&&se(/<[/\w!]/g,e.textContent))return ht(e),!0;if(e.nodeType===Fe)return ht(e),!0;if(Se&&e.nodeType===Ge&&se(/<[/\w]/g,e.data))return ht(e),!0;if(!G[r]||$[r]){if(!$[r]&&St(r)){if(B.tagNameCheck instanceof RegExp&&se(B.tagNameCheck,r))return!1;if(B.tagNameCheck instanceof Function&&B.tagNameCheck(r))return!1}if(Be&&!Ye[r]){const t=x(e)||e.parentNode,i=v(e)||e.childNodes;if(i&&t){for(let r=i.length-1;r>=0;--r){const o=N(i[r],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,h(e))}}}return ht(e),!0}return e instanceof c&&!function(e){let t=x(e);t&&t.tagName||(t={namespaceURI:it,tagName:"template"});const i=J(e.tagName),r=J(t.tagName);return!!ot[e.namespaceURI]&&(e.namespaceURI===et?t.namespaceURI===tt?"svg"===i:t.namespaceURI===Je?"svg"===i&&("annotation-xml"===r||st[r]):Boolean(Nt[i]):e.namespaceURI===Je?t.namespaceURI===tt?"math"===i:t.namespaceURI===et?"math"===i&&nt[r]:Boolean(bt[i]):e.namespaceURI===tt?!(t.namespaceURI===et&&!nt[r])&&!(t.namespaceURI===Je&&!st[r])&&!bt[i]&&(lt[i]||!Nt[i]):!("application/xhtml+xml"!==ct||!ot[e.namespaceURI]))}(e)?(ht(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!se(/<\/no(script|embed|frames)/i,e.innerHTML)?(Me&&e.nodeType===je&&(t=e.textContent,q([R,k,_],e=>{t=ie(t,e," ")}),e.textContent!==t&&(Z(i.removed,{element:e.cloneNode()}),e.textContent=t)),yt(w.afterSanitizeElements,e,null),!1):(ht(e),!0)},Mt=function(e,t,i){if(ze&&("id"===t||"name"===t)&&(i in r||i in pt))return!1;if(ce&&!Y[t]&&se(T,t));else if(le&&se(O,t));else if(!L[t]||Y[t]){if(!(St(e)&&(B.tagNameCheck instanceof RegExp&&se(B.tagNameCheck,e)||B.tagNameCheck instanceof Function&&B.tagNameCheck(e))&&(B.attributeNameCheck instanceof RegExp&&se(B.attributeNameCheck,t)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(t))||"is"===t&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&se(B.tagNameCheck,i)||B.tagNameCheck instanceof Function&&B.tagNameCheck(i))))return!1}else if(Ze[t]);else if(se(j,ie(i,U,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==re(i,"data:")||!Xe[e]){if(de&&!se(V,ie(i,U,"")));else if(i)return!1}else;return!0},St=function(e){return"annotation-xml"!==e&&te(e,P)},wt=function(e){yt(w.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Et(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L,forceKeepAttr:void 0};let o=t.length;for(;o--;){const s=t[o],{name:n,namespaceURI:l,value:c}=s,m=dt(n),d=c;let u="value"===n?d:oe(d);if(r.attrName=m,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,yt(w.uponSanitizeAttribute,e,r),u=r.attrValue,!He||"id"!==m&&"name"!==m||(vt(n,e),u="user-content-"+u),Se&&se(/((--!?|])>)|<\/(style|title)/i,u)){vt(n,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){vt(n,e);continue}if(!Ae&&se(/\/>/i,u)){vt(n,e);continue}Me&&q([R,k,_],e=>{u=ie(u,e," ")});const p=dt(e.nodeName);if(Mt(p,m,u)){if(D&&"object"==typeof g&&"function"==typeof g.getAttributeType)if(l);else switch(g.getAttributeType(p,m)){case"TrustedHTML":u=D.createHTML(u);break;case"TrustedScriptURL":u=D.createScriptURL(u)}if(u!==d)try{l?e.setAttributeNS(l,n,u):e.setAttribute(n,u),Et(e)?ht(e):K(i.removed)}catch(a){vt(n,e)}}else vt(n,e)}yt(w.afterSanitizeAttributes,e,null)},Rt=function e(t){let i=null;const r=Dt(t);for(yt(w.beforeSanitizeShadowDOM,t,null);i=r.nextNode();)yt(w.uponSanitizeShadowNode,i,null),At(i),wt(i),i.content instanceof s&&e(i.content);yt(w.afterSanitizeShadowDOM,t,null)};return i.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null,n=null,c=null;if(rt=!e,rt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ct(e)){if("function"!=typeof e.toString)throw ne("toString is not a function");if("string"!=typeof(e=e.toString()))throw ne("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Re||ft(t),i.removed=[],"string"==typeof e&&(We=!1),We){if(e.nodeName){const t=dt(e.nodeName);if(!G[t]||$[t])throw ne("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=xt("\x3c!----\x3e"),a=r.ownerDocument.importNode(e,!0),a.nodeType===Pe&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!Te&&!Me&&!we&&-1===e.indexOf("<"))return D&&Le?D.createHTML(e):e;if(r=xt(e),!r)return Te?null:Le?E:""}r&&_e&&ht(r.firstChild);const m=Dt(We?e:r);for(;n=m.nextNode();)At(n),wt(n),n.content instanceof s&&Rt(n.content);if(We)return e;if(Te){if(Ve)for(c=A.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(L.shadowroot||L.shadowrootmode)&&(c=S.call(o,c,!0)),c}let d=we?r.outerHTML:r.innerHTML;return we&&G["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&se(Oe,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),Me&&q([R,k,_],e=>{d=ie(d,e," ")}),D&&Le?D.createHTML(d):d},i.setConfig=function(){ft(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Re=!0},i.clearConfig=function(){ut=null,Re=!1},i.isValidAttribute=function(e,t,i){ut||ft({});const r=dt(e),o=dt(t);return Mt(r,o,i)},i.addHook=function(e,t){"function"==typeof t&&Z(w[e],t)},i.removeHook=function(e,t){if(void 0!==t){const i=X(w[e],t);return-1===i?void 0:Q(w[e],i,1)[0]}return K(w[e])},i.removeHooks=function(e){w[e]=[]},i.removeAllHooks=function(){w={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},i}();const{Title:ze,Paragraph:He}=s,Be=({onReconnect:t})=>e.jsxDEV("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",padding:"20px"},children:e.jsxDEV(o,{style:{maxWidth:500,textAlign:"center",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsxDEV("div",{style:{marginBottom:"24px"},children:[e.jsxDEV(a,{style:{fontSize:"48px",color:"#faad14",marginBottom:"16px"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:29,columnNumber:11},void 0),e.jsxDEV(ze,{level:3,style:{color:"#1f1f1f",marginBottom:"8px"},children:"Authentification Google requise"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:36,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:28,columnNumber:9},void 0),e.jsxDEV(n,{message:"Connexion Gmail expirÃ©e",description:"Votre connexion Ã  Gmail a expirÃ©. Vous devez vous reconnecter pour accÃ©der Ã  vos emails.",type:"warning",showIcon:!0,style:{marginBottom:"24px",textAlign:"left"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:41,columnNumber:9},void 0),e.jsxDEV(He,{style:{fontSize:"14px",color:"#666",marginBottom:"24px"},children:"Cliquez sur le bouton ci-dessous pour vous reconnecter Ã  votre compte Google et rÃ©activer l'accÃ¨s Ã  Gmail."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:49,columnNumber:9},void 0),e.jsxDEV(l,{type:"primary",size:"large",icon:e.jsxDEV(c,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:57,columnNumber:17},void 0),onClick:t,style:{background:"linear-gradient(45deg, #4285f4, #34a853)",border:"none",borderRadius:"8px",height:"48px",fontSize:"16px",fontWeight:"500"},children:"Reconnecter Google"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:54,columnNumber:9},void 0),e.jsxDEV(He,{style:{fontSize:"12px",color:"#999",marginTop:"16px",marginBottom:0},children:"ðŸ”’ Connexion sÃ©curisÃ©e via Google OAuth 2.0"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:71,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:20,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/components/GoogleAuthError.tsx",lineNumber:13,columnNumber:5},void 0),{Content:We}=D,{TextArea:$e}=w,Ye=()=>{const o=(()=>{const{api:e}=i(),[r,o]=t.useState(!1),[a,s]=t.useState(null),n=t.useRef(e);n.current=e;const l=t.useCallback(async e=>{var t,i;o(!0),s(null);try{return await e()}catch(r){const e=r;return s((null==(i=null==(t=e.response)?void 0:t.data)?void 0:i.message)||e.message||"Erreur inconnue"),null}finally{o(!1)}},[]),c=t.useCallback(async(e={})=>l(async()=>{const t={maxResults:e.maxResults||20};if(e.labelIds&&e.labelIds.length>0){const i=e.labelIds[0];switch(i){case"INBOX":t.mailbox="inbox";break;case"SENT":t.mailbox="sent";break;case"DRAFT":t.mailbox="drafts";break;case"STARRED":t.mailbox="starred";break;case"TRASH":t.mailbox="trash";break;case"SPAM":t.mailbox="spam";break;default:t.mailbox=i}}else t.mailbox="inbox";return e.q&&(t.q=e.q),e.pageToken&&(t.pageToken=e.pageToken),await n.current.get("/api/gmail/messages",{params:t})}),[l]),m=t.useCallback(async(e,t="full")=>l(async()=>await n.current.get(`/api/gmail/messages/${e}`,{params:{format:t}})),[l]),d=t.useCallback(async(e,t=[],i=[])=>l(()=>n.current.post(`/api/gmail/messages/${e}/modify`,{addLabelIds:t,removeLabelIds:i})),[l]),u=t.useCallback(async e=>l(()=>n.current.post(`/api/gmail/messages/${e}/trash`)),[l]),p=t.useCallback(async e=>l(()=>n.current.post(`/api/gmail/messages/${e}/untrash`)),[l]),g=t.useCallback(async e=>l(()=>n.current.delete(`/api/gmail/messages/${e}`)),[l]),f=t.useCallback(async()=>l(()=>n.current.post("/api/gmail/trash/empty")),[l]),N=t.useCallback(async(e,t)=>l(()=>n.current.post(`/api/gmail/messages/${e}/modify`,{addLabelIds:[t],removeLabelIds:[]})),[l]),b=t.useCallback(async(e,t)=>l(()=>n.current.post(`/api/gmail/messages/${e}/modify`,{addLabelIds:[],removeLabelIds:[t]})),[l]),h=t.useCallback(async()=>l(async()=>await n.current.get("/api/gmail/labels")),[l]),v=t.useCallback(async e=>l(async()=>await n.current.post("/api/gmail/labels",{name:e})),[l]),x=t.useCallback(async(e,t)=>l(async()=>await n.current.put(`/api/gmail/labels/${e}`,{name:t})),[l]),D=t.useCallback(async e=>l(async()=>await n.current.delete(`/api/gmail/labels/${e}`)),[l]),E=t.useCallback(async(e,t)=>l(async()=>await n.current.get(`/api/gmail/messages/${e}/attachments/${t}`,{responseType:"blob"})),[l]),C=t.useCallback(async(e,t,i)=>{try{const r=await fetch(`${window.location.origin}/api/gmail/messages/${e}/attachments/${t}`,{credentials:"include",headers:{"x-organization-id":localStorage.getItem("organizationId")||""}});if(!r.ok)throw new Error(`Erreur tÃ©lÃ©chargement: ${r.status}`);const o=await r.blob(),a=window.URL.createObjectURL(o),s=document.createElement("a");s.href=a,s.download=i,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)}catch(r){throw r}},[]),y=t.useCallback(async e=>l(async()=>{if(e.attachments&&e.attachments.length>0){const t=new FormData;t.append("to",Array.isArray(e.to)?e.to.join(","):e.to.toString()),e.cc&&t.append("cc",Array.isArray(e.cc)?e.cc.join(","):e.cc.toString()),e.bcc&&t.append("bcc",Array.isArray(e.bcc)?e.bcc.join(","):e.bcc.toString()),t.append("subject",e.subject),t.append("body",e.body),e.attachments.forEach(e=>{t.append("attachments",e,e.name)});const i=await fetch(`${window.location.origin}/api/gmail/messages/send`,{method:"POST",body:t,credentials:"include",headers:{"x-organization-id":localStorage.getItem("organizationId")||""}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()}return await n.current.post("/api/gmail/messages/send",e)}),[l]);return t.useMemo(()=>({isLoading:r,error:a,getMessages:c,getMessage:m,sendMessage:y,modifyMessage:d,trashMessage:u,untrashMessage:p,deleteMessage:g,emptyTrash:f,addLabel:N,removeLabel:b,getLabels:h,createLabel:v,updateLabel:x,deleteLabel:D,getAttachment:E,downloadAttachment:C}),[r,a,c,m,y,d,u,p,g,f,N,b,h,v,x,D,E,C])})(),[a,n]=m.useMessage(),{getMessages:c,getLabels:F}=o,[G,I]=t.useState([]),[L,z]=t.useState([]),[H,B]=t.useState(null),[W,$]=t.useState(null),[Y,q]=t.useState("INBOX"),[X,K]=t.useState(""),[Z,Q]=t.useState(""),[J,ee]=t.useState(!1),[te,ie]=t.useState(!1),[re,oe]=t.useState(!1),[ae,se]=t.useState(!1),[ne]=d.useForm(),[le,ce]=t.useState(!1),me=!u.useBreakpoint().md,de=t.useMemo(()=>({INBOX:{name:"BoÃ®te de rÃ©ception",icon:e.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:85,columnNumber:50},void 0)},SENT:{name:"Messages envoyÃ©s",icon:e.jsxDEV(b,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:86,columnNumber:47},void 0)},DRAFT:{name:"Brouillons",icon:e.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:87,columnNumber:42},void 0)},STARRED:{name:"Messages suivis",icon:e.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:88,columnNumber:49},void 0)},TRASH:{name:"Corbeille",icon:e.jsxDEV(g,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:89,columnNumber:41},void 0)},SPAM:{name:"Courriers indÃ©sirables",icon:e.jsxDEV(p,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:90,columnNumber:53},void 0)}}),[]),ue=(e,t)=>{if(!Array.isArray(e))return"";const i=e.find(e=>e.name.toLowerCase()===t.toLowerCase());return i?i.value:""},pe=e=>{if(!e)return"";const t=e.replace(/-/g,"+").replace(/_/g,"/");try{const e=atob(t);if("undefined"!=typeof TextDecoder)try{const t=Uint8Array.from(e,e=>e.charCodeAt(0));return new TextDecoder("utf-8").decode(t)}catch{return e}return e}catch(i){try{return atob(e)}catch{return""}}},ge=e=>{if(!e)return"";const t=Number(e),i=Number.isFinite(t)?new Date(t):new Date(e);return Number.isNaN(i.getTime())?"":i.toLocaleString()},fe=e=>"object"==typeof e&&null!==e&&"data"in e,Ne=t.useCallback(async(e,t,i=!1)=>{try{oe(!0);const r=await c({labelIds:[e],q:t,maxResults:25,pageToken:i?Z:void 0}),o=fe(r)?r.data:r,a=Array.isArray(o)?o:Array.isArray(null==o?void 0:o.data)?o.data:Array.isArray(null==o?void 0:o.messages)?o.messages:[],s=Array.isArray(o)?"":(null==o?void 0:o.nextPageToken)||"";I(i?e=>[...e,...a]:a),Q(s||"")}catch(r){a.error("Erreur lors du chargement des messages")}finally{oe(!1)}},[Z,c,a]);t.useEffect(()=>{(async()=>{oe(!0);try{const e=await F(),t=(e=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){const t=e.data;if(Array.isArray(t))return t;if(t&&"object"==typeof t&&Array.isArray(t.labels))return t.labels;if(Array.isArray(e.labels))return e.labels}return[]})(e);if(!e&&0===t.length)return void se(!0);z(t);const i=await c({labelIds:["INBOX"],q:"",maxResults:25}),r=fe(i)?i.data:i,o=Array.isArray(r)?r:Array.isArray(null==r?void 0:r.data)?r.data:Array.isArray(null==r?void 0:r.messages)?r.messages:[],a=Array.isArray(r)?"":(null==r?void 0:r.nextPageToken)||"";I(o),Q(a||"")}catch(e){se(!0)}finally{oe(!1)}})()},[F,c]);const be=e=>{K(e),Q(""),Ne(Y,e)},he=(e="new",t)=>{var i;if(ne.resetFields(),t){const r=null==(i=t.payload)?void 0:i.headers,o=ue(r,"From"),a=ue(r,"Subject");"reply"===e?ne.setFieldsValue({to:[o],subject:a.startsWith("Re:")?a:`Re: ${a}`}):"forward"===e&&ne.setFieldsValue({subject:a.startsWith("Fwd:")?a:`Fwd: ${a}`})}ee(!0)},ve=async e=>{try{await o.sendMessage(e.to,e.subject,e.body,e.cc,e.bcc),a.success("Message envoyÃ© avec succÃ¨s!"),ee(!1)}catch(t){a.error("Erreur lors de l'envoi du message")}},xe=async(e,t)=>{const i=t?[]:["STARRED"],r=t?["STARRED"]:[];await o.modifyMessage(e,i,r)?(I(i=>i.map(i=>{var r;return i.id===e?{...i,labelIds:t?null==(r=i.labelIds)?void 0:r.filter(e=>"STARRED"!==e):[...i.labelIds||[],"STARRED"]}:i})),B(i=>{var r;if(!i||i.id!==e)return i;const o=t?null==(r=i.labelIds)?void 0:r.filter(e=>"STARRED"!==e):[...i.labelIds||[],"STARRED"];return{...i,labelIds:o}})):a.error("Impossible de modifier le statut de l'Ã©toile.")},De=e.jsxDEV(v,{mode:"inline",selectedKeys:[Y],onClick:({key:e})=>{var t;q(t=e),K(""),Q(""),B(null),$(null),ie(!1),Ne(t,""),ce(!1)},className:"border-0",children:[Object.entries(de).map(([t,i])=>e.jsxDEV(v.Item,{icon:i.icon,children:i.name},t,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:347,columnNumber:9},void 0)),L.filter(e=>!Object.keys(de).includes(e.id)).map(t=>e.jsxDEV(v.Item,{icon:e.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:354,columnNumber:43},void 0),children:t.name},t.id,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:354,columnNumber:11},void 0))]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:337,columnNumber:5},void 0),Ee=t.useMemo(()=>{const e=de[Y];if(e)return e.name;const t=L.find(e=>e.id===Y);return(null==t?void 0:t.name)??"BoÃ®te de rÃ©ception"},[Y,L,de]);if(ae)return e.jsxDEV(Be,{onReconnect:()=>window.location.href="/api/google-auth"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:421,columnNumber:12},void 0);return e.jsxDEV(D,{className:"min-h-screen bg-white",children:[n,e.jsxDEV(r,{title:"BoÃ®te Mail Gmail",subtitle:"Votre boÃ®te de rÃ©ception centralisÃ©e"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:663,columnNumber:7},void 0),e.jsxDEV(We,{className:"bg-white",children:e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"flex flex-col gap-3 mb-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(E,{title:"Nouveau message",children:e.jsxDEV(l,{type:"primary",shape:"circle",size:"large",icon:e.jsxDEV(U,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:391,columnNumber:19},void 0),onClick:()=>he("new"),"aria-label":"Nouveau message"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:387,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:386,columnNumber:9},void 0),e.jsxDEV(E,{title:"Tous les dossiers",children:e.jsxDEV(l,{shape:"circle",size:"large",icon:e.jsxDEV(P,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:400,columnNumber:19},void 0),onClick:()=>ce(!0),"aria-label":"Tous les dossiers"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:397,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:396,columnNumber:9},void 0),e.jsxDEV(E,{title:"Actualiser",children:e.jsxDEV(l,{shape:"circle",size:"large",icon:e.jsxDEV(j,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:409,columnNumber:19},void 0),onClick:()=>Ne(Y,X),loading:re,"aria-label":"Actualiser"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:406,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:405,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:385,columnNumber:7},void 0),e.jsxDEV("span",{className:"text-sm text-gray-600",children:["Dossier actuel : ",e.jsxDEV("strong",{children:Ee},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:416,columnNumber:64},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:416,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:384,columnNumber:5},void 0),e.jsxDEV("div",{className:"mb-4",children:e.jsxDEV(w.Search,{placeholder:"Rechercher dans les messages...",onSearch:be,value:X,onChange:e=>K(e.target.value),allowClear:!0},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:428,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:427,columnNumber:7},void 0),re&&0===G.length?e.jsxDEV("div",{className:"py-4",children:Array.from({length:8}).map((t,i)=>e.jsxDEV("div",{style:{padding:"12px 0",borderBottom:"1px solid #f0f0f0"},children:e.jsxDEV(R,{active:!0,title:{width:"60%"},paragraph:{rows:2,width:["80%","95%"]}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:441,columnNumber:15},void 0)},i,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:440,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:438,columnNumber:9},void 0):0===G.length?e.jsxDEV(k,{description:"Aucun message trouvÃ©"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:446,columnNumber:9},void 0):e.jsxDEV(_,{dataSource:G,renderItem:t=>e.jsxDEV(_.Item,{className:"cursor-pointer hover:bg-gray-50 "+(t.isRead?"":"bg-blue-50"),onClick:()=>(async e=>{try{$(e);const t=await o.getMessage(e.id);t&&(B(t),ie(!0),e.isRead||o.modifyMessage(e.id,[],["UNREAD"]))}catch(t){a.error("Impossible d'ouvrir le message"),$(null)}})(t),actions:[e.jsxDEV(l,{type:"text",icon:t.isStarred?e.jsxDEV(C,{style:{color:"#fadb14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:458,columnNumber:45},void 0):e.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:458,columnNumber:91},void 0),onClick:e=>{e.stopPropagation(),xe(t.id,t.isStarred||!1)}},"star",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:455,columnNumber:17},void 0)],children:e.jsxDEV(_.Item.Meta,{title:e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:t.isRead?"":"font-bold",children:t.from},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:469,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:new Date(t.timestamp).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:472,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:468,columnNumber:19},void 0),description:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm "+(t.isRead?"":"font-semibold"),children:t.subject},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:479,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1 truncate",children:t.snippet},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:482,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:478,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:466,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:451,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:448,columnNumber:9},void 0),Z&&e.jsxDEV("div",{className:"text-center py-4",children:e.jsxDEV(l,{onClick:()=>Ne(Y,X,!0),loading:re,children:"Charger plus"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:495,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:494,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:425,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:667,columnNumber:7},void 0),(()=>{var t,i;if(!H)return null;const r=(null==(t=H.payload)?void 0:t.headers)??[],n=ue(r,"From")||(null==W?void 0:W.from)||"",c=ue(r,"To")||(null==W?void 0:W.to)||"",m=ue(r,"Subject")||(null==W?void 0:W.subject)||"",d=ge(H.internalDate),u=(null==W?void 0:W.timestamp)?ge(W.timestamp):"",p=d||u||"â€”",N=null==(i=H.labelIds)?void 0:i.includes("STARRED");let b="";const h=e=>{if(!Array.isArray(e))return null;for(const t of e){if("text/html"===t.mimeType)return t;if(t.parts&&t.parts.length>0){const e=h(t.parts);if(e)return e}}return e.find(e=>"text/plain"===e.mimeType)||null},v=H.payload??{};if(v.parts&&v.parts.length>0){const e=h(v.parts);e&&e.body&&e.body.data&&(b=pe(e.body.data))}else v.body&&v.body.data&&(b=pe(v.body.data));b||(b=(null==W?void 0:W.htmlBody)||H.snippet||(null==W?void 0:W.snippet)||"Aucun contenu disponible pour ce message.");const x=Le.sanitize(b),D=()=>{ie(!1),B(null),$(null)},M=e.jsxDEV("div",{className:"flex items-center justify-between gap-2 w-full",children:[e.jsxDEV("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsxDEV(E,{title:N?"Retirer des favoris":"Ajouter aux favoris",children:e.jsxDEV(l,{type:"text",icon:N?e.jsxDEV(C,{style:{color:"#fadb14"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:560,columnNumber:33},void 0):e.jsxDEV(f,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:560,columnNumber:79},void 0),onClick:()=>xe(H.id,N),"aria-label":N?"Retirer des favoris":"Ajouter aux favoris"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:558,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:557,columnNumber:11},void 0),e.jsxDEV(s.Text,{strong:!0,ellipsis:{tooltip:m||"DÃ©tail du message"},className:"text-base leading-5",style:{maxWidth:me?"65vw":"45vw"},children:m||"DÃ©tail du message"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:565,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:556,columnNumber:9},void 0),e.jsxDEV(E,{title:"Fermer",children:e.jsxDEV(l,{type:"text",icon:e.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:575,columnNumber:37},void 0),onClick:D,"aria-label":"Fermer le message"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:575,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:574,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:555,columnNumber:7},void 0),S=e.jsxDEV(T,{wrap:!0,size:[8,8],className:me?"w-full justify-between":"",children:[e.jsxDEV(l,{icon:e.jsxDEV(O,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:586,columnNumber:23},void 0),onClick:()=>he("reply",H),block:me,children:"RÃ©pondre"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:586,columnNumber:9},void 0),e.jsxDEV(l,{icon:e.jsxDEV(V,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:587,columnNumber:23},void 0),onClick:()=>he("forward",H),block:me,children:"TransfÃ©rer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:587,columnNumber:9},void 0),e.jsxDEV(l,{icon:e.jsxDEV(g,{},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:588,columnNumber:23},void 0),danger:!0,onClick:()=>(async e=>{await o.deleteMessage(e)?(I(t=>t.filter(t=>t.id!==e)),ie(!1),B(null),$(null),a.success("Message supprimÃ©")):a.error("Impossible de supprimer le message")})(H.id),block:me,children:"Supprimer"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:588,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:581,columnNumber:7},void 0);return e.jsxDEV(A,{title:e.jsxDEV("div",{className:"flex flex-col gap-3 w-full",children:[M,S]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:595,columnNumber:11},void 0),placement:me?"bottom":"right",width:me?"100%":"60%",height:me?"100%":void 0,onClose:D,open:te,closable:!1,styles:{body:{padding:me?"16px":"24px",height:me?"100%":"auto",overflowY:"auto"},header:{padding:me?"12px 16px":"16px 24px"}},children:e.jsxDEV("div",{className:"p-2",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"De :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:618,columnNumber:14},void 0)," ",n||"â€”"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:618,columnNumber:11},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Ã€ :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:619,columnNumber:14},void 0)," ",c||"â€”"]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:619,columnNumber:11},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Date :"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:620,columnNumber:14},void 0)," ",p]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:620,columnNumber:11},void 0),e.jsxDEV("hr",{className:"my-4"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:621,columnNumber:11},void 0),e.jsxDEV("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:x},style:{overflowWrap:"break-word",wordWrap:"break-word"}},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:622,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:617,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:593,columnNumber:7},void 0)})(),e.jsxDEV(M,{title:"Nouveau message",open:J,onCancel:()=>ee(!1),width:800,destroyOnHidden:!0,footer:[e.jsxDEV(l,{onClick:()=>ee(!1),children:"Annuler"},"back",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:640,columnNumber:9},void 0),e.jsxDEV(l,{type:"primary",onClick:()=>ne.submit(),children:"Envoyer"},"submit",!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:641,columnNumber:9},void 0)],children:e.jsxDEV(d,{form:ne,layout:"vertical",onFinish:ve,children:[e.jsxDEV(d.Item,{name:"to",label:"Ã€",rules:[{required:!0,message:"Destinataire requis"}],children:e.jsxDEV(S,{mode:"tags",placeholder:"email@example.com"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:648,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:647,columnNumber:9},void 0),e.jsxDEV(d.Item,{name:"subject",label:"Objet",children:e.jsxDEV(w,{placeholder:"Objet de votre message"},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:651,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:650,columnNumber:9},void 0),e.jsxDEV(d.Item,{name:"body",label:"Message",rules:[{required:!0,message:"Le corps du message ne peut Ãªtre vide"}],children:e.jsxDEV($e,{rows:10,placeholder:"Ã‰crivez votre message ici..."},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:654,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:653,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:646,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:633,columnNumber:5},void 0),e.jsxDEV(A,{title:"Tous les dossiers",placement:"left",open:le,onClose:()=>ce(!1),width:320,styles:{body:{padding:0}},children:De},void 0,!1,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:362,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/dethi/OneDrive/Desktop/CRM SAVE/crm/src/pages/GoogleMailPageFixed_New.tsx",lineNumber:661,columnNumber:5},void 0)};export{Ye as default};
