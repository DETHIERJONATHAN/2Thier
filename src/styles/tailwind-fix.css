/* ==========================================================================
   TAILWIND CSS FIX - Résolution des conflits CSS + ICÔNES SECTIONS DEBUG v4.0
   ========================================================================== */

/* ========================================
   SIDEBAR ICÔNES - VERSION FINALE PROPRE
   ==========/* FORCE TOUS LES ENFANTS À RESPECTER LES LIMITES */
main *,
main div,
main section,
main article,
main aside,
main header,
main footer,
main nav,
main form,
main fieldset,
main p,
main h1, main h2, main h3, main h4, main h5, main h6 {
  overflow-wrap: break-word !important;
  word-wrap: break-word !important;
  word-break: break-word !important;
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

/* EXCEPTION: Permettre aux formulaires TBL de respecter le système de grille Ant Design */
.tbl-form-row,
.tbl-form-row *,
.tbl-form-col,
.tbl-form-col * {
  width: auto !important;
  max-width: none !important;
}

.tbl-form-col {
  flex: 0 0 auto !important;
}

/* EMOJIS DANS LES SECTIONS - FINALISÉS */
.flex-shrink-0 {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 24px !important;
  height: 24px !important;
  min-width: 24px !important;
  min-height: 24px !important;
}

/* Emojis spans - VERSION FINALE */
.flex-shrink-0 span {
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
  font-size: 18px !important;
  width: 20px !important;
  height: 20px !important;
  line-height: 20px !important;
  text-align: center !important;
  position: relative !important;
}

/* Headers de sections - VERSION FINALE */
.bg-gray-50 {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* PRIORITÉ TAILWIND : Neutraliser les !important des autres CSS */

/* Classes personnalisées pour nouveau layout - Header FIXE */
.h-16 { height: 4rem !important; } /* HEADER COMPACT */
.h-18 { height: 4.5rem !important; }
.pt-16 { padding-top: 4rem !important; } /* CONTENU MAXIMAL REMONTÉ */
.pt-18 { padding-top: 4.5rem !important; } 
.pt-20 { padding-top: 5rem !important; } /* SIDEBAR REMONTÉ */
.h-screen-minus-16 { height: calc(100vh - 4rem) !important; }
.h-screen-minus-18 { height: calc(100vh - 4.5rem) !important; }
.mt-16 { margin-top: 4rem !important; }
.mt-18 { margin-top: 4.5rem !important; }
.top-16 { top: 4rem !important; }
.top-18 { top: 4.5rem !important; }

/* SIDEBAR RESPONSIVE - LARGEURS ÉLARGIES POUR ICÔNES */
.w-36 { width: 9rem !important; } /* 144px ultra-compact mobile */
.w-40 { width: 10rem !important; } /* 160px encore plus petit */
.w-44 { width: 11rem !important; } /* 176px version xl */
.w-48 { width: 12rem !important; } /* 192px au lieu de 256px */
.w-56 { width: 14rem !important; } /* 224px - Taille confortable pour icônes */
.w-64 { width: 16rem !important; } /* 256px - Taille large desktop */
.w-72 { width: 18rem !important; } /* 288px - Taille XL avec texte complet */

/* RESPONSIVE UTILITIES */
@media (max-width: 768px) {
  .sidebar-mobile-hidden {
    display: none !important;
  }
  
  .content-mobile-full {
    width: 100vw !important;
    max-width: none !important;
    padding: 0.75rem !important;
  }
}

@media (min-width: 1024px) {
  .content-desktop-optimized {
    padding: 1.5rem 2rem !important;
    max-width: none !important;
  }
}

@media (min-width: 1280px) {
  .content-xl-optimized {
    padding: 2rem 2.5rem !important;
    max-width: none !important;
  }
}

/* HEADER AU-DESSUS DE TOUT - PRIORITÉ MAXIMALE ET COMPACT */
header {
  z-index: 9999 !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 4rem !important; /* HEADER COMPACT */
}

/* FORCE HEADER VISIBILITY - SUPER CRITIQUE ET COMPACT */
.header-container {
  z-index: 9999 !important;
  position: fixed !important;
  height: 4rem !important; /* HEADER COMPACT */
  background: linear-gradient(90deg, #4f46e5, #7c3aed, #4f46e5) !important;
  color: white !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3) !important;
  border-bottom: 4px solid white !important;
}

/* FORCE SIDEBAR VISIBILITY - DEBUG */
.sidebar-container {
  width: 16rem !important; /* 256px = w-64 */
  flex-shrink: 0 !important;
  background-color: #ffffff !important;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
  border-right: 4px solid #e5e7eb !important;
  overflow-y: auto !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 10 !important;
  min-height: 100vh !important;
}

/* AMÉLIORATION VISUELLE DES SECTIONS SIDEBAR */
.sidebar-container .mb-2 {
  margin-bottom: 0.75rem !important;
}

/* AMÉLIORATION VISUELLE DES ICÔNES SIDEBAR - TOUTES TAILLES */
.sidebar-container .icon,
.sidebar-container [class*="w-5 h-5"],
.sidebar-container [class*="w-4 h-4"],
.sidebar-container [class*="w-3 h-3"] {
  flex-shrink: 0 !important;
  color: inherit !important;
}

.sidebar-container .w-5.h-5 {
  width: 1.25rem !important;
  height: 1.25rem !important;
}

.sidebar-container .w-4.h-4 {
  width: 1rem !important;
  height: 1rem !important;
}

.sidebar-container .w-3.h-3 {
  width: 0.75rem !important;
  height: 0.75rem !important;
}

/* ESPACEMENT OPTIMAL POUR SIDEBAR ÉLARGIE */
.sidebar-container .crm-nav-item {
  padding: 0.75rem 1rem !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.75rem !important;
}

.sidebar-container .crm-nav-item span {
  font-size: 0.875rem !important;
  font-weight: 500 !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

.sidebar-container .crm-nav-item .icon {
  color: #374151 !important; /* gray-700 par défaut */
}

.sidebar-container .crm-nav-item.active .icon {
  color: #1d4ed8 !important; /* blue-700 pour actif */
}

.sidebar-container .crm-nav-item:hover .icon {
  color: #374151 !important; /* maintient la couleur au hover */
}

/* EN-TÊTES DE SECTIONS - BIEN VISIBLES */
.sidebar-container .bg-gray-50 {
  background-color: #f9fafb !important;
  border: 1px solid #e5e7eb !important;
  margin-bottom: 0.5rem !important;
}

.sidebar-container .bg-gray-50:hover {
  background-color: #f3f4f6 !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
}

/* DEBUG - FORCE TOUTES LES ICÔNES DE SECTIONS À ÊTRE VISIBLES */
.sidebar-container .bg-gray-50 * {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* FORCER REACT ICONS À S'AFFICHER */
.sidebar-container .bg-gray-50 svg,
.sidebar-container .bg-gray-50 .icon,
.sidebar-container .bg-gray-50 [data-icon] {
  width: 1.25rem !important;
  height: 1.25rem !important;
  color: #374151 !important;
  fill: currentColor !important;
  stroke: currentColor !important;
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
  flex-shrink: 0 !important;
  margin-right: 0.75rem !important;
}

/* ICÔNES DES SECTIONS - FORCE L'AFFICHAGE */
.sidebar-container .bg-gray-50 .flex-shrink-0 {
  flex-shrink: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 1.25rem !important;
  height: 1.25rem !important;
}

.sidebar-container .bg-gray-50 .flex-shrink-0 .icon,
.sidebar-container .bg-gray-50 .flex-shrink-0 svg {
  color: #374151 !important;
  font-weight: 600 !important;
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 1.25rem !important;
  height: 1.25rem !important;
  flex-shrink: 0 !important;
}

/* FORCE TOUTES LES ICÔNES SVG À ÊTRE VISIBLES */
.sidebar-container .bg-gray-50 svg[class*="w-5"],
.sidebar-container .bg-gray-50 svg[class*="h-5"] {
  width: 1.25rem !important;
  height: 1.25rem !important;
  color: #374151 !important;
  fill: currentColor !important;
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* TEXTE DES SECTIONS */
.sidebar-container .bg-gray-50 .font-semibold {
  color: #1f2937 !important;
  font-weight: 600 !important;
  font-size: 0.875rem !important;
}

/* CHEVRON DES SECTIONS */
.sidebar-container .bg-gray-50 .w-3.h-3 {
  color: #6b7280 !important;
  transition: transform 0.2s ease !important;
}

/* MODULES DANS LES SECTIONS */
.sidebar-container .pl-4 {
  padding-left: 1.25rem !important;
  border-left: 2px solid #e5e7eb !important;
  margin-left: 1rem !important;
  margin-bottom: 0.75rem !important;
}

.sidebar-container .pl-4 .crm-nav-item {
  padding: 0.5rem 0.75rem !important;
  margin-bottom: 0.25rem !important;
  border-radius: 0.375rem !important;
  border-left: 3px solid transparent !important;
}

.sidebar-container .pl-4 .crm-nav-item:hover {
  background-color: #f9fafb !important;
  border-left-color: #3b82f6 !important;
}

.sidebar-container .pl-4 .crm-nav-item.active {
  background-color: #eff6ff !important;
  color: #1d4ed8 !important;
  border-left-color: #1d4ed8 !important;
  font-weight: 500 !important;
}

/* DEBUG SIDEBAR - COULEUR VISIBLE */
.debug-sidebar {
  background-color: #fef3c7 !important; /* Jaune pour debug */
  border: 3px solid #f59e0b !important;
  min-height: 500px !important;
}

/* FORCE MAIN CONTENT VISIBILITY - CRITIQUES */
.main-content {
  flex: 1 !important;
  overflow-y: auto !important;
  background-color: #f9fafb !important;
  padding: 1.5rem !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  min-height: calc(100vh - 4rem) !important;
  width: 100% !important;
  max-width: none !important;
}

/* CONTAINMENT STRICT POUR TOUTES LES PAGES */
main {
  contain: layout style paint !important;
  overflow: hidden !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
}

main > div {
  width: 100% !important;
  max-width: none !important;
  overflow-x: hidden !important;
  overflow-y: auto !important;
}

/* FORCE ABSOLUMENT TOUS LES ENFANTS À RESPECTER LES LIMITES */
main *,
main *:before,
main *:after {
  max-width: 100% !important;
  box-sizing: border-box !important;
  contain: layout !important;
}

/* EMPÊCHE TOUS LES DÉBORDEMENTS HORIZONTAUX - ULTRA STRICT */
main div,
main section,
main article,
main aside,
main header,
main footer,
main nav,
main form,
main fieldset,
main p,
main h1, main h2, main h3, main h4, main h5, main h6 {
  overflow-wrap: break-word !important;
  word-wrap: break-word !important;
  word-break: break-word !important;
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

/* FORCE TOUS LES CONTENEURS À RESTER DANS LES LIMITES */
main .container,
main .wrapper,
main .content,
main .page,
main .layout,
main .grid,
main .flex,
main .block {
  max-width: 100% !important;
  width: 100% !important;
  min-width: 0 !important;
  overflow-x: hidden !important;
  box-sizing: border-box !important;
}

/* FORCE LES TABLEAUX À RESTER DANS LES LIMITES */
main table {
  width: 100% !important;
  max-width: 100% !important;
  table-layout: fixed !important;
  overflow-x: auto !important;
  display: block !important;
  white-space: nowrap !important;
}

main thead, main tbody, main tfoot {
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
}

main tr {
  display: table !important;
  width: 100% !important;
  max-width: 100% !important;
  table-layout: fixed !important;
}

main th, main td {
  display: table-cell !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
  max-width: 0 !important;
  width: auto !important;
}

/* FORCE LES IMAGES À RESTER DANS LES LIMITES */
main img,
main svg,
main canvas,
main video,
main iframe {
  max-width: 100% !important;
  height: auto !important;
  width: auto !important;
  display: block !important;
  box-sizing: border-box !important;
}

/* FORCE LES ÉLÉMENTS FLEX ET GRID À NE PAS DÉBORDER */
main .flex,
main .grid,
main [style*="display: flex"],
main [style*="display: grid"],
main [class*="flex"],
main [class*="grid"] {
  min-width: 0 !important;
  max-width: 100% !important;
  width: 100% !important;
  overflow: hidden !important;
  flex-wrap: wrap !important;
  box-sizing: border-box !important;
}

main .flex > *,
main .grid > *,
main [style*="display: flex"] > *,
main [style*="display: grid"] > *,
main [class*="flex"] > *,
main [class*="grid"] > * {
  min-width: 0 !important;
  max-width: 100% !important;
  flex-shrink: 1 !important;
  overflow: hidden !important;
  box-sizing: border-box !important;
}

/* FORCE TOUS LES ÉLÉMENTS ABSOLUS/FIXED À RESTER DANS LES LIMITES */
main *[style*="position: absolute"],
main *[style*="position: fixed"],
main .absolute,
main .fixed {
  max-width: calc(100% - 2rem) !important;
  left: 1rem !important;
  right: auto !important;
  box-sizing: border-box !important;
}

/* FORCE LES ÉLÉMENTS AVEC WIDTH/MIN-WIDTH CUSTOM */
main *[style*="width"],
main *[style*="min-width"],
main *[style*="max-width"] {
  max-width: 100% !important;
  width: auto !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* FORCE LES COMPOSANTS ANT DESIGN À RESPECTER LES LIMITES */
main .ant-layout,
main .ant-layout-content,
main .ant-layout-header,
main .ant-layout-footer,
main .ant-layout-sider,
main .ant-table,
main .ant-table-wrapper,
main .ant-form,
main .ant-card,
main .ant-list,
main .ant-descriptions,
main .ant-collapse {
  max-width: 100% !important;
  width: 100% !important;
  min-width: 0 !important;
  overflow-x: hidden !important;
  box-sizing: border-box !important;
}

/* FORCE LES ÉLÉMENTS AVEC SCROLL HORIZONTAL */
main *[style*="overflow-x: scroll"],
main *[style*="overflow-x: auto"],
main .overflow-x-scroll,
main .overflow-x-auto {
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

/* FORCE TOUS LES NOUVEAUX ÉLÉMENTS DYNAMIQUES */
main > * {
  contain: layout style !important;
  max-width: 100% !important;
  overflow-x: hidden !important;
  box-sizing: border-box !important;
}

/* SURCHARGE GLOBALE POUR EMPÊCHER TOUT DÉBORDEMENT */
main {
  max-width: 100vw !important;
  overflow-x: hidden !important;
  position: relative !important;
}

/* HACK ULTIME - SI QUELQUE CHOSE DÉPASSE ENCORE */
main::after {
  content: "" !important;
  position: absolute !important;
  top: 0 !important;
  right: -1px !important;
  bottom: 0 !important;
  width: 1px !important;
  background: transparent !important;
  pointer-events: none !important;
}

/* CONTAINER CONTENT FORCE */
.content-wrapper {
  width: 100% !important;
  height: 100% !important;
  display: block !important;
  visibility: visible !important;
}

/* FORCE FLEX CONTAINER */
.layout-flex {
  display: flex !important;
  flex: 1 !important;
  overflow: hidden !important;
  min-height: calc(100vh - 4.5rem) !important;
}

/* Classes utilitaires supplémentaires */
.backdrop-blur-sm { backdrop-filter: blur(4px) !important; }
.bg-opacity-15 { background-color: rgba(255, 255, 255, 0.15) !important; }
.bg-opacity-20 { background-color: rgba(255, 255, 255, 0.2) !important; }
.bg-opacity-30 { background-color: rgba(255, 255, 255, 0.3) !important; }
.text-opacity-80 { color: rgba(255, 255, 255, 0.8) !important; }
.border-opacity-20 { border-color: rgba(255, 255, 255, 0.2) !important; }

/* Reset des couleurs de texte */
.text-gray-100,
.text-gray-200,
.text-gray-300,
.text-gray-400,
.text-gray-500,
.text-gray-600,
.text-gray-700,
.text-gray-800,
.text-gray-900 {
  color: inherit !important;
}

.text-white {
  color: #ffffff !important;
}

.text-black {
  color: #000000 !important;
}

/* Reset des arrière-plans */
.bg-white {
  background-color: #ffffff !important;
}

.bg-gray-50 {
  background-color: #f9fafb !important;
}

.bg-gray-100 {
  background-color: #f3f4f6 !important;
}

.bg-blue-50 {
  background-color: #eff6ff !important;
}

.bg-blue-500 {
  background-color: #3b82f6 !important;
}

.bg-blue-600 {
  background-color: #2563eb !important;
}

.bg-green-50 {
  background-color: #f0fdf4 !important;
}

.bg-green-500 {
  background-color: #22c55e !important;
}

.bg-red-50 {
  background-color: #fef2f2 !important;
}

.bg-red-500 {
  background-color: #ef4444 !important;
}

/* Reset des bordures */
.border {
  border-width: 1px !important;
}

.border-gray-200 {
  border-color: #e5e7eb !important;
}

.border-blue-200 {
  border-color: #bfdbfe !important;
}

/* Reset des marges et padding */
.p-4 {
  padding: 1rem !important;
}

.p-6 {
  padding: 1.5rem !important;
}

.px-4 {
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

.py-2 {
  padding-top: 0.5rem !important;
  padding-bottom: 0.5rem !important;
}

.py-4 {
  padding-top: 1rem !important;
  padding-bottom: 1rem !important;
}

.m-4 {
  margin: 1rem !important;
}

.mb-4 {
  margin-bottom: 1rem !important;
}

.mb-6 {
  margin-bottom: 1.5rem !important;
}

/* Reset des layouts */
.flex {
  display: flex !important;
}

.grid {
  display: grid !important;
}

.items-center {
  align-items: center !important;
}

.justify-center {
  justify-content: center !important;
}

.justify-between {
  justify-content: space-between !important;
}

.gap-4 {
  gap: 1rem !important;
}

.gap-6 {
  gap: 1.5rem !important;
}

/* Reset des tailles */
.w-full {
  width: 100% !important;
}

.h-full {
  height: 100% !important;
}

.min-h-screen {
  min-height: 100vh !important;
}

/* Reset des border-radius */
.rounded {
  border-radius: 0.25rem !important;
}

.rounded-lg {
  border-radius: 0.5rem !important;
}

.rounded-xl {
  border-radius: 0.75rem !important;
}

/* Reset des shadows */
.shadow-sm {
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05) !important;
}

.shadow {
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1) !important;
}

.shadow-lg {
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
}

/* Reset des transitions */
.transition-all {
  transition-property: all !important;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
  transition-duration: 150ms !important;
}

/* Reset des z-index */
.z-10 {
  z-index: 10 !important;
}

.z-20 {
  z-index: 20 !important;
}

.z-30 {
  z-index: 30 !important;
}

.z-40 {
  z-index: 40 !important;
}

.z-50 {
  z-index: 50 !important;
}

/* Z-INDEX MAXIMUM POUR HEADER */
.z-max {
  z-index: 9999 !important;
}

.z-header {
  z-index: 9999 !important;
}

/* DÉSACTIVATION DES CSS CONFLICTUELS */

/* Désactiver les gradients premium qui interfèrent */
.bg-gradient-primary {
  background: #3b82f6 !important; /* Remplace par couleur unie */
}

/* CLASSES SPÉCIALES POUR DÉBUGGER */
.debug-tailwind {
  border: 2px solid red !important;
  background-color: yellow !important;
}

.debug-background {
  background-color: lime !important;
}
